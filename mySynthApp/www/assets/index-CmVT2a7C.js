(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function g_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var y_={exports:{}},Cc={},v_={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ba=Symbol.for("react.element"),NE=Symbol.for("react.portal"),xE=Symbol.for("react.fragment"),OE=Symbol.for("react.strict_mode"),RE=Symbol.for("react.profiler"),DE=Symbol.for("react.provider"),PE=Symbol.for("react.context"),ME=Symbol.for("react.forward_ref"),bE=Symbol.for("react.suspense"),LE=Symbol.for("react.memo"),FE=Symbol.for("react.lazy"),Rg=Symbol.iterator;function VE(t){return t===null||typeof t!="object"?null:(t=Rg&&t[Rg]||t["@@iterator"],typeof t=="function"?t:null)}var __={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w_=Object.assign,T_={};function to(t,e,n){this.props=t,this.context=e,this.refs=T_,this.updater=n||__}to.prototype.isReactComponent={};to.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};to.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function S_(){}S_.prototype=to.prototype;function sp(t,e,n){this.props=t,this.context=e,this.refs=T_,this.updater=n||__}var ip=sp.prototype=new S_;ip.constructor=sp;w_(ip,to.prototype);ip.isPureReactComponent=!0;var Dg=Array.isArray,E_=Object.prototype.hasOwnProperty,op={current:null},k_={key:!0,ref:!0,__self:!0,__source:!0};function C_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)E_.call(e,r)&&!k_.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ba,type:t,key:i,ref:o,props:s,_owner:op.current}}function $E(t,e){return{$$typeof:Ba,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ap(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ba}function UE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Pg=/\/+/g;function bh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?UE(""+t.key):e.toString(36)}function Zl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ba:case NE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+bh(o,0):r,Dg(s)?(n="",t!=null&&(n=t.replace(Pg,"$&/")+"/"),Zl(s,e,n,"",function(u){return u})):s!=null&&(ap(s)&&(s=$E(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Pg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Dg(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+bh(i,a);o+=Zl(i,e,n,l,s)}else if(l=VE(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+bh(i,a++),o+=Zl(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sl(t,e,n){if(t==null)return t;var r=[],s=0;return Zl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function jE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bt={current:null},eu={transition:null},BE={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:eu,ReactCurrentOwner:op};function I_(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Sl,forEach:function(t,e,n){Sl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sl(t,function(){e++}),e},toArray:function(t){return Sl(t,function(e){return e})||[]},only:function(t){if(!ap(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=to;re.Fragment=xE;re.Profiler=RE;re.PureComponent=sp;re.StrictMode=OE;re.Suspense=bE;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BE;re.act=I_;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=w_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=op.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)E_.call(e,l)&&!k_.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ba,type:t.type,key:s,ref:i,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:PE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DE,_context:t},t.Consumer=t};re.createElement=C_;re.createFactory=function(t){var e=C_.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:ME,render:t}};re.isValidElement=ap;re.lazy=function(t){return{$$typeof:FE,_payload:{_status:-1,_result:t},_init:jE}};re.memo=function(t,e){return{$$typeof:LE,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=eu.transition;eu.transition={};try{t()}finally{eu.transition=e}};re.unstable_act=I_;re.useCallback=function(t,e){return bt.current.useCallback(t,e)};re.useContext=function(t){return bt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return bt.current.useDeferredValue(t)};re.useEffect=function(t,e){return bt.current.useEffect(t,e)};re.useId=function(){return bt.current.useId()};re.useImperativeHandle=function(t,e,n){return bt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return bt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return bt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return bt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return bt.current.useReducer(t,e,n)};re.useRef=function(t){return bt.current.useRef(t)};re.useState=function(t){return bt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return bt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return bt.current.useTransition()};re.version="18.3.1";v_.exports=re;var Xt=v_.exports;const zE=g_(Xt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WE=Xt,qE=Symbol.for("react.element"),HE=Symbol.for("react.fragment"),GE=Object.prototype.hasOwnProperty,KE=WE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QE={key:!0,ref:!0,__self:!0,__source:!0};function A_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)GE.call(e,r)&&!QE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:qE,type:t,key:i,ref:o,props:s,_owner:KE.current}}Cc.Fragment=HE;Cc.jsx=A_;Cc.jsxs=A_;y_.exports=Cc;var Z=y_.exports,N_={exports:{}},tn={},x_={exports:{}},O_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(x,R){var M=x.length;x.push(R);e:for(;0<M;){var $=M-1>>>1,H=x[$];if(0<s(H,R))x[$]=R,x[M]=H,M=$;else break e}}function n(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var R=x[0],M=x.pop();if(M!==R){x[0]=M;e:for(var $=0,H=x.length,Ye=H>>>1;$<Ye;){var Fe=2*($+1)-1,J=x[Fe],le=Fe+1,Ue=x[le];if(0>s(J,M))le<H&&0>s(Ue,J)?(x[$]=Ue,x[le]=M,$=le):(x[$]=J,x[Fe]=M,$=Fe);else if(le<H&&0>s(Ue,M))x[$]=Ue,x[le]=M,$=le;else break e}}return R}function s(x,R){var M=x.sortIndex-R.sortIndex;return M!==0?M:x.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,p=!1,m=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(x){for(var R=n(u);R!==null;){if(R.callback===null)r(u);else if(R.startTime<=x)r(u),R.sortIndex=R.expirationTime,e(l,R);else break;R=n(u)}}function E(x){if(y=!1,v(x),!m)if(n(l)!==null)m=!0,j(_);else{var R=n(u);R!==null&&B(E,R.startTime-x)}}function _(x,R){m=!1,y&&(y=!1,f(T),T=-1),p=!0;var M=d;try{for(v(R),h=n(l);h!==null&&(!(h.expirationTime>R)||x&&!N());){var $=h.callback;if(typeof $=="function"){h.callback=null,d=h.priorityLevel;var H=$(h.expirationTime<=R);R=t.unstable_now(),typeof H=="function"?h.callback=H:h===n(l)&&r(l),v(R)}else r(l);h=n(l)}if(h!==null)var Ye=!0;else{var Fe=n(u);Fe!==null&&B(E,Fe.startTime-R),Ye=!1}return Ye}finally{h=null,d=M,p=!1}}var S=!1,k=null,T=-1,I=5,C=-1;function N(){return!(t.unstable_now()-C<I)}function A(){if(k!==null){var x=t.unstable_now();C=x;var R=!0;try{R=k(!0,x)}finally{R?L():(S=!1,k=null)}}else S=!1}var L;if(typeof g=="function")L=function(){g(A)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,W=F.port2;F.port1.onmessage=A,L=function(){W.postMessage(null)}}else L=function(){w(A,0)};function j(x){k=x,S||(S=!0,L())}function B(x,R){T=w(function(){x(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(x){x.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,j(_))},t.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<x?Math.floor(1e3/x):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(x){switch(d){case 1:case 2:case 3:var R=3;break;default:R=d}var M=d;d=R;try{return x()}finally{d=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(x,R){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var M=d;d=x;try{return R()}finally{d=M}},t.unstable_scheduleCallback=function(x,R,M){var $=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?$+M:$):M=$,x){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=M+H,x={id:c++,callback:R,priorityLevel:x,startTime:M,expirationTime:H,sortIndex:-1},M>$?(x.sortIndex=M,e(u,x),n(l)===null&&x===n(u)&&(y?(f(T),T=-1):y=!0,B(E,M-$))):(x.sortIndex=H,e(l,x),m||p||(m=!0,j(_))),x},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(x){var R=d;return function(){var M=d;d=R;try{return x.apply(this,arguments)}finally{d=M}}}})(O_);x_.exports=O_;var XE=x_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YE=Xt,Jt=XE;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var R_=new Set,na={};function Bs(t,e){Di(t,e),Di(t+"Capture",e)}function Di(t,e){for(na[t]=e,t=0;t<e.length;t++)R_.add(e[t])}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nd=Object.prototype.hasOwnProperty,JE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mg={},bg={};function ZE(t){return Nd.call(bg,t)?!0:Nd.call(Mg,t)?!1:JE.test(t)?bg[t]=!0:(Mg[t]=!0,!1)}function ek(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tk(t,e,n,r){if(e===null||typeof e>"u"||ek(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Lt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pt[t]=new Lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pt[e]=new Lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pt[t]=new Lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pt[t]=new Lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pt[t]=new Lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pt[t]=new Lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pt[t]=new Lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pt[t]=new Lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pt[t]=new Lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var lp=/[\-:]([a-z])/g;function up(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lp,up);pt[e]=new Lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lp,up);pt[e]=new Lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lp,up);pt[e]=new Lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pt[t]=new Lt(t,1,!1,t.toLowerCase(),null,!1,!1)});pt.xlinkHref=new Lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pt[t]=new Lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function cp(t,e,n,r){var s=pt.hasOwnProperty(e)?pt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tk(e,n,s,r)&&(n=null),r||s===null?ZE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var yr=YE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,El=Symbol.for("react.element"),ti=Symbol.for("react.portal"),ni=Symbol.for("react.fragment"),hp=Symbol.for("react.strict_mode"),xd=Symbol.for("react.profiler"),D_=Symbol.for("react.provider"),P_=Symbol.for("react.context"),dp=Symbol.for("react.forward_ref"),Od=Symbol.for("react.suspense"),Rd=Symbol.for("react.suspense_list"),fp=Symbol.for("react.memo"),Ir=Symbol.for("react.lazy"),M_=Symbol.for("react.offscreen"),Lg=Symbol.iterator;function So(t){return t===null||typeof t!="object"?null:(t=Lg&&t[Lg]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,Lh;function Do(t){if(Lh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Lh=e&&e[1]||""}return`
`+Lh+t}var Fh=!1;function Vh(t,e){if(!t||Fh)return"";Fh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Fh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Do(t):""}function nk(t){switch(t.tag){case 5:return Do(t.type);case 16:return Do("Lazy");case 13:return Do("Suspense");case 19:return Do("SuspenseList");case 0:case 2:case 15:return t=Vh(t.type,!1),t;case 11:return t=Vh(t.type.render,!1),t;case 1:return t=Vh(t.type,!0),t;default:return""}}function Dd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ni:return"Fragment";case ti:return"Portal";case xd:return"Profiler";case hp:return"StrictMode";case Od:return"Suspense";case Rd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case P_:return(t.displayName||"Context")+".Consumer";case D_:return(t._context.displayName||"Context")+".Provider";case dp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fp:return e=t.displayName||null,e!==null?e:Dd(t.type)||"Memo";case Ir:e=t._payload,t=t._init;try{return Dd(t(e))}catch{}}return null}function rk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dd(e);case 8:return e===hp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function b_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sk(t){var e=b_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kl(t){t._valueTracker||(t._valueTracker=sk(t))}function L_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=b_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _u(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pd(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Fg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function F_(t,e){e=e.checked,e!=null&&cp(t,"checked",e,!1)}function Md(t,e){F_(t,e);var n=Qr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bd(t,e.type,n):e.hasOwnProperty("defaultValue")&&bd(t,e.type,Qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bd(t,e,n){(e!=="number"||_u(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Po=Array.isArray;function _i(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ld(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $g(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(Po(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qr(n)}}function V_(t,e){var n=Qr(e.value),r=Qr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ug(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cl,U_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cl=Cl||document.createElement("div"),Cl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ra(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Uo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ik=["Webkit","ms","Moz","O"];Object.keys(Uo).forEach(function(t){ik.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Uo[e]=Uo[t]})});function j_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Uo.hasOwnProperty(t)&&Uo[t]?(""+e).trim():e+"px"}function B_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=j_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ok=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vd(t,e){if(e){if(ok[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function $d(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ud=null;function pp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jd=null,wi=null,Ti=null;function jg(t){if(t=qa(t)){if(typeof jd!="function")throw Error(O(280));var e=t.stateNode;e&&(e=Oc(e),jd(t.stateNode,t.type,e))}}function z_(t){wi?Ti?Ti.push(t):Ti=[t]:wi=t}function W_(){if(wi){var t=wi,e=Ti;if(Ti=wi=null,jg(t),e)for(t=0;t<e.length;t++)jg(e[t])}}function q_(t,e){return t(e)}function H_(){}var $h=!1;function G_(t,e,n){if($h)return t(e,n);$h=!0;try{return q_(t,e,n)}finally{$h=!1,(wi!==null||Ti!==null)&&(H_(),W_())}}function sa(t,e){var n=t.stateNode;if(n===null)return null;var r=Oc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var Bd=!1;if(ur)try{var Eo={};Object.defineProperty(Eo,"passive",{get:function(){Bd=!0}}),window.addEventListener("test",Eo,Eo),window.removeEventListener("test",Eo,Eo)}catch{Bd=!1}function ak(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var jo=!1,wu=null,Tu=!1,zd=null,lk={onError:function(t){jo=!0,wu=t}};function uk(t,e,n,r,s,i,o,a,l){jo=!1,wu=null,ak.apply(lk,arguments)}function ck(t,e,n,r,s,i,o,a,l){if(uk.apply(this,arguments),jo){if(jo){var u=wu;jo=!1,wu=null}else throw Error(O(198));Tu||(Tu=!0,zd=u)}}function zs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function K_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Bg(t){if(zs(t)!==t)throw Error(O(188))}function hk(t){var e=t.alternate;if(!e){if(e=zs(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Bg(s),t;if(i===r)return Bg(s),e;i=i.sibling}throw Error(O(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function Q_(t){return t=hk(t),t!==null?X_(t):null}function X_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=X_(t);if(e!==null)return e;t=t.sibling}return null}var Y_=Jt.unstable_scheduleCallback,zg=Jt.unstable_cancelCallback,dk=Jt.unstable_shouldYield,fk=Jt.unstable_requestPaint,Ve=Jt.unstable_now,pk=Jt.unstable_getCurrentPriorityLevel,mp=Jt.unstable_ImmediatePriority,J_=Jt.unstable_UserBlockingPriority,Su=Jt.unstable_NormalPriority,mk=Jt.unstable_LowPriority,Z_=Jt.unstable_IdlePriority,Ic=null,jn=null;function gk(t){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(Ic,t,void 0,(t.current.flags&128)===128)}catch{}}var Cn=Math.clz32?Math.clz32:_k,yk=Math.log,vk=Math.LN2;function _k(t){return t>>>=0,t===0?32:31-(yk(t)/vk|0)|0}var Il=64,Al=4194304;function Mo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Eu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Mo(a):(i&=o,i!==0&&(r=Mo(i)))}else o=n&~s,o!==0?r=Mo(o):i!==0&&(r=Mo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cn(e),s=1<<n,r|=t[n],e&=~s;return r}function wk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Cn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=wk(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Wd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function e0(){var t=Il;return Il<<=1,!(Il&4194240)&&(Il=64),t}function Uh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function za(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cn(e),t[e]=n}function Sk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Cn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function gp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var he=0;function t0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var n0,yp,r0,s0,i0,qd=!1,Nl=[],Fr=null,Vr=null,$r=null,ia=new Map,oa=new Map,xr=[],Ek="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wg(t,e){switch(t){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":ia.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oa.delete(e.pointerId)}}function ko(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=qa(e),e!==null&&yp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function kk(t,e,n,r,s){switch(e){case"focusin":return Fr=ko(Fr,t,e,n,r,s),!0;case"dragenter":return Vr=ko(Vr,t,e,n,r,s),!0;case"mouseover":return $r=ko($r,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ia.set(i,ko(ia.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,oa.set(i,ko(oa.get(i)||null,t,e,n,r,s)),!0}return!1}function o0(t){var e=ms(t.target);if(e!==null){var n=zs(e);if(n!==null){if(e=n.tag,e===13){if(e=K_(n),e!==null){t.blockedOn=e,i0(t.priority,function(){r0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ud=r,n.target.dispatchEvent(r),Ud=null}else return e=qa(n),e!==null&&yp(e),t.blockedOn=n,!1;e.shift()}return!0}function qg(t,e,n){tu(t)&&n.delete(e)}function Ck(){qd=!1,Fr!==null&&tu(Fr)&&(Fr=null),Vr!==null&&tu(Vr)&&(Vr=null),$r!==null&&tu($r)&&($r=null),ia.forEach(qg),oa.forEach(qg)}function Co(t,e){t.blockedOn===e&&(t.blockedOn=null,qd||(qd=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,Ck)))}function aa(t){function e(s){return Co(s,t)}if(0<Nl.length){Co(Nl[0],t);for(var n=1;n<Nl.length;n++){var r=Nl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fr!==null&&Co(Fr,t),Vr!==null&&Co(Vr,t),$r!==null&&Co($r,t),ia.forEach(e),oa.forEach(e),n=0;n<xr.length;n++)r=xr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xr.length&&(n=xr[0],n.blockedOn===null);)o0(n),n.blockedOn===null&&xr.shift()}var Si=yr.ReactCurrentBatchConfig,ku=!0;function Ik(t,e,n,r){var s=he,i=Si.transition;Si.transition=null;try{he=1,vp(t,e,n,r)}finally{he=s,Si.transition=i}}function Ak(t,e,n,r){var s=he,i=Si.transition;Si.transition=null;try{he=4,vp(t,e,n,r)}finally{he=s,Si.transition=i}}function vp(t,e,n,r){if(ku){var s=Hd(t,e,n,r);if(s===null)Xh(t,e,r,Cu,n),Wg(t,r);else if(kk(s,t,e,n,r))r.stopPropagation();else if(Wg(t,r),e&4&&-1<Ek.indexOf(t)){for(;s!==null;){var i=qa(s);if(i!==null&&n0(i),i=Hd(t,e,n,r),i===null&&Xh(t,e,r,Cu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Xh(t,e,r,null,n)}}var Cu=null;function Hd(t,e,n,r){if(Cu=null,t=pp(r),t=ms(t),t!==null)if(e=zs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=K_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cu=t,null}function a0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pk()){case mp:return 1;case J_:return 4;case Su:case mk:return 16;case Z_:return 536870912;default:return 16}default:return 16}}var br=null,_p=null,nu=null;function l0(){if(nu)return nu;var t,e=_p,n=e.length,r,s="value"in br?br.value:br.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return nu=s.slice(t,1<r?1-r:void 0)}function ru(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xl(){return!0}function Hg(){return!1}function nn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xl:Hg,this.isPropagationStopped=Hg,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xl)},persist:function(){},isPersistent:xl}),e}var no={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wp=nn(no),Wa=Re({},no,{view:0,detail:0}),Nk=nn(Wa),jh,Bh,Io,Ac=Re({},Wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Io&&(Io&&t.type==="mousemove"?(jh=t.screenX-Io.screenX,Bh=t.screenY-Io.screenY):Bh=jh=0,Io=t),jh)},movementY:function(t){return"movementY"in t?t.movementY:Bh}}),Gg=nn(Ac),xk=Re({},Ac,{dataTransfer:0}),Ok=nn(xk),Rk=Re({},Wa,{relatedTarget:0}),zh=nn(Rk),Dk=Re({},no,{animationName:0,elapsedTime:0,pseudoElement:0}),Pk=nn(Dk),Mk=Re({},no,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bk=nn(Mk),Lk=Re({},no,{data:0}),Kg=nn(Lk),Fk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$k={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$k[t])?!!e[t]:!1}function Tp(){return Uk}var jk=Re({},Wa,{key:function(t){if(t.key){var e=Fk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ru(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tp,charCode:function(t){return t.type==="keypress"?ru(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ru(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bk=nn(jk),zk=Re({},Ac,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qg=nn(zk),Wk=Re({},Wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tp}),qk=nn(Wk),Hk=Re({},no,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gk=nn(Hk),Kk=Re({},Ac,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qk=nn(Kk),Xk=[9,13,27,32],Sp=ur&&"CompositionEvent"in window,Bo=null;ur&&"documentMode"in document&&(Bo=document.documentMode);var Yk=ur&&"TextEvent"in window&&!Bo,u0=ur&&(!Sp||Bo&&8<Bo&&11>=Bo),Xg=" ",Yg=!1;function c0(t,e){switch(t){case"keyup":return Xk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ri=!1;function Jk(t,e){switch(t){case"compositionend":return h0(e);case"keypress":return e.which!==32?null:(Yg=!0,Xg);case"textInput":return t=e.data,t===Xg&&Yg?null:t;default:return null}}function Zk(t,e){if(ri)return t==="compositionend"||!Sp&&c0(t,e)?(t=l0(),nu=_p=br=null,ri=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return u0&&e.locale!=="ko"?null:e.data;default:return null}}var eC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eC[t.type]:e==="textarea"}function d0(t,e,n,r){z_(r),e=Iu(e,"onChange"),0<e.length&&(n=new wp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var zo=null,la=null;function tC(t){E0(t,0)}function Nc(t){var e=oi(t);if(L_(e))return t}function nC(t,e){if(t==="change")return e}var f0=!1;if(ur){var Wh;if(ur){var qh="oninput"in document;if(!qh){var Zg=document.createElement("div");Zg.setAttribute("oninput","return;"),qh=typeof Zg.oninput=="function"}Wh=qh}else Wh=!1;f0=Wh&&(!document.documentMode||9<document.documentMode)}function ey(){zo&&(zo.detachEvent("onpropertychange",p0),la=zo=null)}function p0(t){if(t.propertyName==="value"&&Nc(la)){var e=[];d0(e,la,t,pp(t)),G_(tC,e)}}function rC(t,e,n){t==="focusin"?(ey(),zo=e,la=n,zo.attachEvent("onpropertychange",p0)):t==="focusout"&&ey()}function sC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nc(la)}function iC(t,e){if(t==="click")return Nc(e)}function oC(t,e){if(t==="input"||t==="change")return Nc(e)}function aC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nn=typeof Object.is=="function"?Object.is:aC;function ua(t,e){if(Nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Nd.call(e,s)||!Nn(t[s],e[s]))return!1}return!0}function ty(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ny(t,e){var n=ty(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ty(n)}}function m0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?m0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function g0(){for(var t=window,e=_u();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_u(t.document)}return e}function Ep(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lC(t){var e=g0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&m0(n.ownerDocument.documentElement,n)){if(r!==null&&Ep(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ny(n,i);var o=ny(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uC=ur&&"documentMode"in document&&11>=document.documentMode,si=null,Gd=null,Wo=null,Kd=!1;function ry(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kd||si==null||si!==_u(r)||(r=si,"selectionStart"in r&&Ep(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wo&&ua(Wo,r)||(Wo=r,r=Iu(Gd,"onSelect"),0<r.length&&(e=new wp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=si)))}function Ol(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ii={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},Hh={},y0={};ur&&(y0=document.createElement("div").style,"AnimationEvent"in window||(delete ii.animationend.animation,delete ii.animationiteration.animation,delete ii.animationstart.animation),"TransitionEvent"in window||delete ii.transitionend.transition);function xc(t){if(Hh[t])return Hh[t];if(!ii[t])return t;var e=ii[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in y0)return Hh[t]=e[n];return t}var v0=xc("animationend"),_0=xc("animationiteration"),w0=xc("animationstart"),T0=xc("transitionend"),S0=new Map,sy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(t,e){S0.set(t,e),Bs(e,[t])}for(var Gh=0;Gh<sy.length;Gh++){var Kh=sy[Gh],cC=Kh.toLowerCase(),hC=Kh[0].toUpperCase()+Kh.slice(1);ns(cC,"on"+hC)}ns(v0,"onAnimationEnd");ns(_0,"onAnimationIteration");ns(w0,"onAnimationStart");ns("dblclick","onDoubleClick");ns("focusin","onFocus");ns("focusout","onBlur");ns(T0,"onTransitionEnd");Di("onMouseEnter",["mouseout","mouseover"]);Di("onMouseLeave",["mouseout","mouseover"]);Di("onPointerEnter",["pointerout","pointerover"]);Di("onPointerLeave",["pointerout","pointerover"]);Bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dC=new Set("cancel close invalid load scroll toggle".split(" ").concat(bo));function iy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ck(r,e,void 0,t),t.currentTarget=null}function E0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;iy(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;iy(s,a,u),i=l}}}if(Tu)throw t=zd,Tu=!1,zd=null,t}function ve(t,e){var n=e[Zd];n===void 0&&(n=e[Zd]=new Set);var r=t+"__bubble";n.has(r)||(k0(e,t,2,!1),n.add(r))}function Qh(t,e,n){var r=0;e&&(r|=4),k0(n,t,r,e)}var Rl="_reactListening"+Math.random().toString(36).slice(2);function ca(t){if(!t[Rl]){t[Rl]=!0,R_.forEach(function(n){n!=="selectionchange"&&(dC.has(n)||Qh(n,!1,t),Qh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rl]||(e[Rl]=!0,Qh("selectionchange",!1,e))}}function k0(t,e,n,r){switch(a0(e)){case 1:var s=Ik;break;case 4:s=Ak;break;default:s=vp}n=s.bind(null,e,n,t),s=void 0,!Bd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Xh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ms(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}G_(function(){var u=i,c=pp(n),h=[];e:{var d=S0.get(t);if(d!==void 0){var p=wp,m=t;switch(t){case"keypress":if(ru(n)===0)break e;case"keydown":case"keyup":p=Bk;break;case"focusin":m="focus",p=zh;break;case"focusout":m="blur",p=zh;break;case"beforeblur":case"afterblur":p=zh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Gg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Ok;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=qk;break;case v0:case _0:case w0:p=Pk;break;case T0:p=Gk;break;case"scroll":p=Nk;break;case"wheel":p=Qk;break;case"copy":case"cut":case"paste":p=bk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Qg}var y=(e&4)!==0,w=!y&&t==="scroll",f=y?d!==null?d+"Capture":null:d;y=[];for(var g=u,v;g!==null;){v=g;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,f!==null&&(E=sa(g,f),E!=null&&y.push(ha(g,E,v)))),w)break;g=g.return}0<y.length&&(d=new p(d,m,null,n,c),h.push({event:d,listeners:y}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&n!==Ud&&(m=n.relatedTarget||n.fromElement)&&(ms(m)||m[cr]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?ms(m):null,m!==null&&(w=zs(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(y=Gg,E="onMouseLeave",f="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=Qg,E="onPointerLeave",f="onPointerEnter",g="pointer"),w=p==null?d:oi(p),v=m==null?d:oi(m),d=new y(E,g+"leave",p,n,c),d.target=w,d.relatedTarget=v,E=null,ms(c)===u&&(y=new y(f,g+"enter",m,n,c),y.target=v,y.relatedTarget=w,E=y),w=E,p&&m)t:{for(y=p,f=m,g=0,v=y;v;v=Ys(v))g++;for(v=0,E=f;E;E=Ys(E))v++;for(;0<g-v;)y=Ys(y),g--;for(;0<v-g;)f=Ys(f),v--;for(;g--;){if(y===f||f!==null&&y===f.alternate)break t;y=Ys(y),f=Ys(f)}y=null}else y=null;p!==null&&oy(h,d,p,y,!1),m!==null&&w!==null&&oy(h,w,m,y,!0)}}e:{if(d=u?oi(u):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var _=nC;else if(Jg(d))if(f0)_=oC;else{_=sC;var S=rC}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(_=iC);if(_&&(_=_(t,u))){d0(h,_,n,c);break e}S&&S(t,d,u),t==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&bd(d,"number",d.value)}switch(S=u?oi(u):window,t){case"focusin":(Jg(S)||S.contentEditable==="true")&&(si=S,Gd=u,Wo=null);break;case"focusout":Wo=Gd=si=null;break;case"mousedown":Kd=!0;break;case"contextmenu":case"mouseup":case"dragend":Kd=!1,ry(h,n,c);break;case"selectionchange":if(uC)break;case"keydown":case"keyup":ry(h,n,c)}var k;if(Sp)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ri?c0(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(u0&&n.locale!=="ko"&&(ri||T!=="onCompositionStart"?T==="onCompositionEnd"&&ri&&(k=l0()):(br=c,_p="value"in br?br.value:br.textContent,ri=!0)),S=Iu(u,T),0<S.length&&(T=new Kg(T,t,null,n,c),h.push({event:T,listeners:S}),k?T.data=k:(k=h0(n),k!==null&&(T.data=k)))),(k=Yk?Jk(t,n):Zk(t,n))&&(u=Iu(u,"onBeforeInput"),0<u.length&&(c=new Kg("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=k))}E0(h,e)})}function ha(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Iu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=sa(t,n),i!=null&&r.unshift(ha(t,i,s)),i=sa(t,e),i!=null&&r.push(ha(t,i,s))),t=t.return}return r}function Ys(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function oy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=sa(n,i),l!=null&&o.unshift(ha(n,l,a))):s||(l=sa(n,i),l!=null&&o.push(ha(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var fC=/\r\n?/g,pC=/\u0000|\uFFFD/g;function ay(t){return(typeof t=="string"?t:""+t).replace(fC,`
`).replace(pC,"")}function Dl(t,e,n){if(e=ay(e),ay(t)!==e&&n)throw Error(O(425))}function Au(){}var Qd=null,Xd=null;function Yd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jd=typeof setTimeout=="function"?setTimeout:void 0,mC=typeof clearTimeout=="function"?clearTimeout:void 0,ly=typeof Promise=="function"?Promise:void 0,gC=typeof queueMicrotask=="function"?queueMicrotask:typeof ly<"u"?function(t){return ly.resolve(null).then(t).catch(yC)}:Jd;function yC(t){setTimeout(function(){throw t})}function Yh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),aa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);aa(e)}function Ur(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ro=Math.random().toString(36).slice(2),Fn="__reactFiber$"+ro,da="__reactProps$"+ro,cr="__reactContainer$"+ro,Zd="__reactEvents$"+ro,vC="__reactListeners$"+ro,_C="__reactHandles$"+ro;function ms(t){var e=t[Fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cr]||n[Fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uy(t);t!==null;){if(n=t[Fn])return n;t=uy(t)}return e}t=n,n=t.parentNode}return null}function qa(t){return t=t[Fn]||t[cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function oi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function Oc(t){return t[da]||null}var ef=[],ai=-1;function rs(t){return{current:t}}function Te(t){0>ai||(t.current=ef[ai],ef[ai]=null,ai--)}function ge(t,e){ai++,ef[ai]=t.current,t.current=e}var Xr={},It=rs(Xr),jt=rs(!1),As=Xr;function Pi(t,e){var n=t.type.contextTypes;if(!n)return Xr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Bt(t){return t=t.childContextTypes,t!=null}function Nu(){Te(jt),Te(It)}function cy(t,e,n){if(It.current!==Xr)throw Error(O(168));ge(It,e),ge(jt,n)}function C0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(O(108,rk(t)||"Unknown",s));return Re({},n,r)}function xu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xr,As=It.current,ge(It,t),ge(jt,jt.current),!0}function hy(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=C0(t,e,As),r.__reactInternalMemoizedMergedChildContext=t,Te(jt),Te(It),ge(It,t)):Te(jt),ge(jt,n)}var Zn=null,Rc=!1,Jh=!1;function I0(t){Zn===null?Zn=[t]:Zn.push(t)}function wC(t){Rc=!0,I0(t)}function ss(){if(!Jh&&Zn!==null){Jh=!0;var t=0,e=he;try{var n=Zn;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Zn=null,Rc=!1}catch(s){throw Zn!==null&&(Zn=Zn.slice(t+1)),Y_(mp,ss),s}finally{he=e,Jh=!1}}return null}var li=[],ui=0,Ou=null,Ru=0,sn=[],on=0,Ns=null,er=1,tr="";function ds(t,e){li[ui++]=Ru,li[ui++]=Ou,Ou=t,Ru=e}function A0(t,e,n){sn[on++]=er,sn[on++]=tr,sn[on++]=Ns,Ns=t;var r=er;t=tr;var s=32-Cn(r)-1;r&=~(1<<s),n+=1;var i=32-Cn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,er=1<<32-Cn(e)+s|n<<s|r,tr=i+t}else er=1<<i|n<<s|r,tr=t}function kp(t){t.return!==null&&(ds(t,1),A0(t,1,0))}function Cp(t){for(;t===Ou;)Ou=li[--ui],li[ui]=null,Ru=li[--ui],li[ui]=null;for(;t===Ns;)Ns=sn[--on],sn[on]=null,tr=sn[--on],sn[on]=null,er=sn[--on],sn[on]=null}var Yt=null,Qt=null,Ce=!1,vn=null;function N0(t,e){var n=ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function dy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Yt=t,Qt=Ur(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Yt=t,Qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ns!==null?{id:er,overflow:tr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Yt=t,Qt=null,!0):!1;default:return!1}}function tf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nf(t){if(Ce){var e=Qt;if(e){var n=e;if(!dy(t,e)){if(tf(t))throw Error(O(418));e=Ur(n.nextSibling);var r=Yt;e&&dy(t,e)?N0(r,n):(t.flags=t.flags&-4097|2,Ce=!1,Yt=t)}}else{if(tf(t))throw Error(O(418));t.flags=t.flags&-4097|2,Ce=!1,Yt=t}}}function fy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Yt=t}function Pl(t){if(t!==Yt)return!1;if(!Ce)return fy(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yd(t.type,t.memoizedProps)),e&&(e=Qt)){if(tf(t))throw x0(),Error(O(418));for(;e;)N0(t,e),e=Ur(e.nextSibling)}if(fy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qt=Ur(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qt=null}}else Qt=Yt?Ur(t.stateNode.nextSibling):null;return!0}function x0(){for(var t=Qt;t;)t=Ur(t.nextSibling)}function Mi(){Qt=Yt=null,Ce=!1}function Ip(t){vn===null?vn=[t]:vn.push(t)}var TC=yr.ReactCurrentBatchConfig;function Ao(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function Ml(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function py(t){var e=t._init;return e(t._payload)}function O0(t){function e(f,g){if(t){var v=f.deletions;v===null?(f.deletions=[g],f.flags|=16):v.push(g)}}function n(f,g){if(!t)return null;for(;g!==null;)e(f,g),g=g.sibling;return null}function r(f,g){for(f=new Map;g!==null;)g.key!==null?f.set(g.key,g):f.set(g.index,g),g=g.sibling;return f}function s(f,g){return f=Wr(f,g),f.index=0,f.sibling=null,f}function i(f,g,v){return f.index=v,t?(v=f.alternate,v!==null?(v=v.index,v<g?(f.flags|=2,g):v):(f.flags|=2,g)):(f.flags|=1048576,g)}function o(f){return t&&f.alternate===null&&(f.flags|=2),f}function a(f,g,v,E){return g===null||g.tag!==6?(g=id(v,f.mode,E),g.return=f,g):(g=s(g,v),g.return=f,g)}function l(f,g,v,E){var _=v.type;return _===ni?c(f,g,v.props.children,E,v.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ir&&py(_)===g.type)?(E=s(g,v.props),E.ref=Ao(f,g,v),E.return=f,E):(E=cu(v.type,v.key,v.props,null,f.mode,E),E.ref=Ao(f,g,v),E.return=f,E)}function u(f,g,v,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=od(v,f.mode,E),g.return=f,g):(g=s(g,v.children||[]),g.return=f,g)}function c(f,g,v,E,_){return g===null||g.tag!==7?(g=Ss(v,f.mode,E,_),g.return=f,g):(g=s(g,v),g.return=f,g)}function h(f,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=id(""+g,f.mode,v),g.return=f,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case El:return v=cu(g.type,g.key,g.props,null,f.mode,v),v.ref=Ao(f,null,g),v.return=f,v;case ti:return g=od(g,f.mode,v),g.return=f,g;case Ir:var E=g._init;return h(f,E(g._payload),v)}if(Po(g)||So(g))return g=Ss(g,f.mode,v,null),g.return=f,g;Ml(f,g)}return null}function d(f,g,v,E){var _=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:a(f,g,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case El:return v.key===_?l(f,g,v,E):null;case ti:return v.key===_?u(f,g,v,E):null;case Ir:return _=v._init,d(f,g,_(v._payload),E)}if(Po(v)||So(v))return _!==null?null:c(f,g,v,E,null);Ml(f,v)}return null}function p(f,g,v,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return f=f.get(v)||null,a(g,f,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case El:return f=f.get(E.key===null?v:E.key)||null,l(g,f,E,_);case ti:return f=f.get(E.key===null?v:E.key)||null,u(g,f,E,_);case Ir:var S=E._init;return p(f,g,v,S(E._payload),_)}if(Po(E)||So(E))return f=f.get(v)||null,c(g,f,E,_,null);Ml(g,E)}return null}function m(f,g,v,E){for(var _=null,S=null,k=g,T=g=0,I=null;k!==null&&T<v.length;T++){k.index>T?(I=k,k=null):I=k.sibling;var C=d(f,k,v[T],E);if(C===null){k===null&&(k=I);break}t&&k&&C.alternate===null&&e(f,k),g=i(C,g,T),S===null?_=C:S.sibling=C,S=C,k=I}if(T===v.length)return n(f,k),Ce&&ds(f,T),_;if(k===null){for(;T<v.length;T++)k=h(f,v[T],E),k!==null&&(g=i(k,g,T),S===null?_=k:S.sibling=k,S=k);return Ce&&ds(f,T),_}for(k=r(f,k);T<v.length;T++)I=p(k,f,T,v[T],E),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?T:I.key),g=i(I,g,T),S===null?_=I:S.sibling=I,S=I);return t&&k.forEach(function(N){return e(f,N)}),Ce&&ds(f,T),_}function y(f,g,v,E){var _=So(v);if(typeof _!="function")throw Error(O(150));if(v=_.call(v),v==null)throw Error(O(151));for(var S=_=null,k=g,T=g=0,I=null,C=v.next();k!==null&&!C.done;T++,C=v.next()){k.index>T?(I=k,k=null):I=k.sibling;var N=d(f,k,C.value,E);if(N===null){k===null&&(k=I);break}t&&k&&N.alternate===null&&e(f,k),g=i(N,g,T),S===null?_=N:S.sibling=N,S=N,k=I}if(C.done)return n(f,k),Ce&&ds(f,T),_;if(k===null){for(;!C.done;T++,C=v.next())C=h(f,C.value,E),C!==null&&(g=i(C,g,T),S===null?_=C:S.sibling=C,S=C);return Ce&&ds(f,T),_}for(k=r(f,k);!C.done;T++,C=v.next())C=p(k,f,T,C.value,E),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?T:C.key),g=i(C,g,T),S===null?_=C:S.sibling=C,S=C);return t&&k.forEach(function(A){return e(f,A)}),Ce&&ds(f,T),_}function w(f,g,v,E){if(typeof v=="object"&&v!==null&&v.type===ni&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case El:e:{for(var _=v.key,S=g;S!==null;){if(S.key===_){if(_=v.type,_===ni){if(S.tag===7){n(f,S.sibling),g=s(S,v.props.children),g.return=f,f=g;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ir&&py(_)===S.type){n(f,S.sibling),g=s(S,v.props),g.ref=Ao(f,S,v),g.return=f,f=g;break e}n(f,S);break}else e(f,S);S=S.sibling}v.type===ni?(g=Ss(v.props.children,f.mode,E,v.key),g.return=f,f=g):(E=cu(v.type,v.key,v.props,null,f.mode,E),E.ref=Ao(f,g,v),E.return=f,f=E)}return o(f);case ti:e:{for(S=v.key;g!==null;){if(g.key===S)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(f,g.sibling),g=s(g,v.children||[]),g.return=f,f=g;break e}else{n(f,g);break}else e(f,g);g=g.sibling}g=od(v,f.mode,E),g.return=f,f=g}return o(f);case Ir:return S=v._init,w(f,g,S(v._payload),E)}if(Po(v))return m(f,g,v,E);if(So(v))return y(f,g,v,E);Ml(f,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(n(f,g.sibling),g=s(g,v),g.return=f,f=g):(n(f,g),g=id(v,f.mode,E),g.return=f,f=g),o(f)):n(f,g)}return w}var bi=O0(!0),R0=O0(!1),Du=rs(null),Pu=null,ci=null,Ap=null;function Np(){Ap=ci=Pu=null}function xp(t){var e=Du.current;Te(Du),t._currentValue=e}function rf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ei(t,e){Pu=t,Ap=ci=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ut=!0),t.firstContext=null)}function fn(t){var e=t._currentValue;if(Ap!==t)if(t={context:t,memoizedValue:e,next:null},ci===null){if(Pu===null)throw Error(O(308));ci=t,Pu.dependencies={lanes:0,firstContext:t}}else ci=ci.next=t;return e}var gs=null;function Op(t){gs===null?gs=[t]:gs.push(t)}function D0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Op(e)):(n.next=s.next,s.next=n),e.interleaved=n,hr(t,r)}function hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ar=!1;function Rp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ir(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,hr(t,n)}return s=r.interleaved,s===null?(e.next=e,Op(r)):(e.next=s.next,s.next=e),r.interleaved=e,hr(t,n)}function su(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gp(t,n)}}function my(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Mu(t,e,n,r){var s=t.updateQueue;Ar=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,c=u=l=null,a=i;do{var d=a.lane,p=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,y=a;switch(d=e,p=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){h=m.call(p,h,d);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,d=typeof m=="function"?m.call(p,h,d):m,d==null)break e;h=Re({},h,d);break e;case 2:Ar=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=h):c=c.next=p,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(c===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Os|=o,t.lanes=o,t.memoizedState=h}}function gy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(O(191,s));s.call(r)}}}var Ha={},Bn=rs(Ha),fa=rs(Ha),pa=rs(Ha);function ys(t){if(t===Ha)throw Error(O(174));return t}function Dp(t,e){switch(ge(pa,e),ge(fa,t),ge(Bn,Ha),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fd(e,t)}Te(Bn),ge(Bn,e)}function Li(){Te(Bn),Te(fa),Te(pa)}function M0(t){ys(pa.current);var e=ys(Bn.current),n=Fd(e,t.type);e!==n&&(ge(fa,t),ge(Bn,n))}function Pp(t){fa.current===t&&(Te(Bn),Te(fa))}var xe=rs(0);function bu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zh=[];function Mp(){for(var t=0;t<Zh.length;t++)Zh[t]._workInProgressVersionPrimary=null;Zh.length=0}var iu=yr.ReactCurrentDispatcher,ed=yr.ReactCurrentBatchConfig,xs=0,Oe=null,Ke=null,Ze=null,Lu=!1,qo=!1,ma=0,SC=0;function gt(){throw Error(O(321))}function bp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nn(t[n],e[n]))return!1;return!0}function Lp(t,e,n,r,s,i){if(xs=i,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,iu.current=t===null||t.memoizedState===null?IC:AC,t=n(r,s),qo){i=0;do{if(qo=!1,ma=0,25<=i)throw Error(O(301));i+=1,Ze=Ke=null,e.updateQueue=null,iu.current=NC,t=n(r,s)}while(qo)}if(iu.current=Fu,e=Ke!==null&&Ke.next!==null,xs=0,Ze=Ke=Oe=null,Lu=!1,e)throw Error(O(300));return t}function Fp(){var t=ma!==0;return ma=0,t}function Ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Oe.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function pn(){if(Ke===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=Ze===null?Oe.memoizedState:Ze.next;if(e!==null)Ze=e,Ke=t;else{if(t===null)throw Error(O(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Ze===null?Oe.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function ga(t,e){return typeof e=="function"?e(t):e}function td(t){var e=pn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=Ke,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((xs&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Oe.lanes|=c,Os|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Nn(r,e.memoizedState)||(Ut=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Oe.lanes|=i,Os|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nd(t){var e=pn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Nn(i,e.memoizedState)||(Ut=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function b0(){}function L0(t,e){var n=Oe,r=pn(),s=e(),i=!Nn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ut=!0),r=r.queue,Vp($0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,ya(9,V0.bind(null,n,r,s,e),void 0,null),tt===null)throw Error(O(349));xs&30||F0(n,e,s)}return s}function F0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function V0(t,e,n,r){e.value=n,e.getSnapshot=r,U0(e)&&j0(t)}function $0(t,e,n){return n(function(){U0(e)&&j0(t)})}function U0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nn(t,n)}catch{return!0}}function j0(t){var e=hr(t,1);e!==null&&In(e,t,1,-1)}function yy(t){var e=Ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:t},e.queue=t,t=t.dispatch=CC.bind(null,Oe,t),[e.memoizedState,t]}function ya(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function B0(){return pn().memoizedState}function ou(t,e,n,r){var s=Ln();Oe.flags|=t,s.memoizedState=ya(1|e,n,void 0,r===void 0?null:r)}function Dc(t,e,n,r){var s=pn();r=r===void 0?null:r;var i=void 0;if(Ke!==null){var o=Ke.memoizedState;if(i=o.destroy,r!==null&&bp(r,o.deps)){s.memoizedState=ya(e,n,i,r);return}}Oe.flags|=t,s.memoizedState=ya(1|e,n,i,r)}function vy(t,e){return ou(8390656,8,t,e)}function Vp(t,e){return Dc(2048,8,t,e)}function z0(t,e){return Dc(4,2,t,e)}function W0(t,e){return Dc(4,4,t,e)}function q0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function H0(t,e,n){return n=n!=null?n.concat([t]):null,Dc(4,4,q0.bind(null,e,t),n)}function $p(){}function G0(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function K0(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Q0(t,e,n){return xs&21?(Nn(n,e)||(n=e0(),Oe.lanes|=n,Os|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ut=!0),t.memoizedState=n)}function EC(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=ed.transition;ed.transition={};try{t(!1),e()}finally{he=n,ed.transition=r}}function X0(){return pn().memoizedState}function kC(t,e,n){var r=zr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Y0(t))J0(e,n);else if(n=D0(t,e,n,r),n!==null){var s=Pt();In(n,t,r,s),Z0(n,e,r)}}function CC(t,e,n){var r=zr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Y0(t))J0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Nn(a,o)){var l=e.interleaved;l===null?(s.next=s,Op(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=D0(t,e,s,r),n!==null&&(s=Pt(),In(n,t,r,s),Z0(n,e,r))}}function Y0(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function J0(t,e){qo=Lu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Z0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gp(t,n)}}var Fu={readContext:fn,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},IC={readContext:fn,useCallback:function(t,e){return Ln().memoizedState=[t,e===void 0?null:e],t},useContext:fn,useEffect:vy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ou(4194308,4,q0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ou(4194308,4,t,e)},useInsertionEffect:function(t,e){return ou(4,2,t,e)},useMemo:function(t,e){var n=Ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kC.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=Ln();return t={current:t},e.memoizedState=t},useState:yy,useDebugValue:$p,useDeferredValue:function(t){return Ln().memoizedState=t},useTransition:function(){var t=yy(!1),e=t[0];return t=EC.bind(null,t[1]),Ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,s=Ln();if(Ce){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),tt===null)throw Error(O(349));xs&30||F0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,vy($0.bind(null,r,i,t),[t]),r.flags|=2048,ya(9,V0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ln(),e=tt.identifierPrefix;if(Ce){var n=tr,r=er;n=(r&~(1<<32-Cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ma++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AC={readContext:fn,useCallback:G0,useContext:fn,useEffect:Vp,useImperativeHandle:H0,useInsertionEffect:z0,useLayoutEffect:W0,useMemo:K0,useReducer:td,useRef:B0,useState:function(){return td(ga)},useDebugValue:$p,useDeferredValue:function(t){var e=pn();return Q0(e,Ke.memoizedState,t)},useTransition:function(){var t=td(ga)[0],e=pn().memoizedState;return[t,e]},useMutableSource:b0,useSyncExternalStore:L0,useId:X0,unstable_isNewReconciler:!1},NC={readContext:fn,useCallback:G0,useContext:fn,useEffect:Vp,useImperativeHandle:H0,useInsertionEffect:z0,useLayoutEffect:W0,useMemo:K0,useReducer:nd,useRef:B0,useState:function(){return nd(ga)},useDebugValue:$p,useDeferredValue:function(t){var e=pn();return Ke===null?e.memoizedState=t:Q0(e,Ke.memoizedState,t)},useTransition:function(){var t=nd(ga)[0],e=pn().memoizedState;return[t,e]},useMutableSource:b0,useSyncExternalStore:L0,useId:X0,unstable_isNewReconciler:!1};function gn(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pc={isMounted:function(t){return(t=t._reactInternals)?zs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pt(),s=zr(t),i=ir(r,s);i.payload=e,n!=null&&(i.callback=n),e=jr(t,i,s),e!==null&&(In(e,t,s,r),su(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pt(),s=zr(t),i=ir(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=jr(t,i,s),e!==null&&(In(e,t,s,r),su(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pt(),r=zr(t),s=ir(n,r);s.tag=2,e!=null&&(s.callback=e),e=jr(t,s,r),e!==null&&(In(e,t,r,n),su(e,t,r))}};function _y(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ua(n,r)||!ua(s,i):!0}function ew(t,e,n){var r=!1,s=Xr,i=e.contextType;return typeof i=="object"&&i!==null?i=fn(i):(s=Bt(e)?As:It.current,r=e.contextTypes,i=(r=r!=null)?Pi(t,s):Xr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function wy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Pc.enqueueReplaceState(e,e.state,null)}function of(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Rp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=fn(i):(i=Bt(e)?As:It.current,s.context=Pi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(sf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Pc.enqueueReplaceState(s,s.state,null),Mu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Fi(t,e){try{var n="",r=e;do n+=nk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function rd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function af(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xC=typeof WeakMap=="function"?WeakMap:Map;function tw(t,e,n){n=ir(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$u||($u=!0,yf=r),af(t,e)},n}function nw(t,e,n){n=ir(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){af(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){af(t,e),typeof r!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ty(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new xC;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=zC.bind(null,t,e,n),e.then(t,t))}function Sy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ey(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ir(-1,1),e.tag=2,jr(n,e,1))),n.lanes|=1),t)}var OC=yr.ReactCurrentOwner,Ut=!1;function xt(t,e,n,r){e.child=t===null?R0(e,null,n,r):bi(e,t.child,n,r)}function ky(t,e,n,r,s){n=n.render;var i=e.ref;return Ei(e,s),r=Lp(t,e,n,r,i,s),n=Fp(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,dr(t,e,s)):(Ce&&n&&kp(e),e.flags|=1,xt(t,e,r,s),e.child)}function Cy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Gp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,rw(t,e,i,r,s)):(t=cu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ua,n(o,r)&&t.ref===e.ref)return dr(t,e,s)}return e.flags|=1,t=Wr(i,r),t.ref=e.ref,t.return=e,e.child=t}function rw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ua(i,r)&&t.ref===e.ref)if(Ut=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ut=!0);else return e.lanes=t.lanes,dr(t,e,s)}return lf(t,e,n,r,s)}function sw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(di,Gt),Gt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(di,Gt),Gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ge(di,Gt),Gt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ge(di,Gt),Gt|=r;return xt(t,e,s,n),e.child}function iw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lf(t,e,n,r,s){var i=Bt(n)?As:It.current;return i=Pi(e,i),Ei(e,s),n=Lp(t,e,n,r,i,s),r=Fp(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,dr(t,e,s)):(Ce&&r&&kp(e),e.flags|=1,xt(t,e,n,s),e.child)}function Iy(t,e,n,r,s){if(Bt(n)){var i=!0;xu(e)}else i=!1;if(Ei(e,s),e.stateNode===null)au(t,e),ew(e,n,r),of(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=fn(u):(u=Bt(n)?As:It.current,u=Pi(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&wy(e,o,r,u),Ar=!1;var d=e.memoizedState;o.state=d,Mu(e,r,o,s),l=e.memoizedState,a!==r||d!==l||jt.current||Ar?(typeof c=="function"&&(sf(e,n,c,r),l=e.memoizedState),(a=Ar||_y(e,n,a,r,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,P0(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:gn(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=fn(l):(l=Bt(n)?As:It.current,l=Pi(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&wy(e,o,r,l),Ar=!1,d=e.memoizedState,o.state=d,Mu(e,r,o,s);var m=e.memoizedState;a!==h||d!==m||jt.current||Ar?(typeof p=="function"&&(sf(e,n,p,r),m=e.memoizedState),(u=Ar||_y(e,n,u,r,d,m,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return uf(t,e,n,r,i,s)}function uf(t,e,n,r,s,i){iw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&hy(e,n,!1),dr(t,e,i);r=e.stateNode,OC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bi(e,t.child,null,i),e.child=bi(e,null,a,i)):xt(t,e,a,i),e.memoizedState=r.state,s&&hy(e,n,!0),e.child}function ow(t){var e=t.stateNode;e.pendingContext?cy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cy(t,e.context,!1),Dp(t,e.containerInfo)}function Ay(t,e,n,r,s){return Mi(),Ip(s),e.flags|=256,xt(t,e,n,r),e.child}var cf={dehydrated:null,treeContext:null,retryLane:0};function hf(t){return{baseLanes:t,cachePool:null,transitions:null}}function aw(t,e,n){var r=e.pendingProps,s=xe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ge(xe,s&1),t===null)return nf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Lc(o,r,0,null),t=Ss(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=hf(n),e.memoizedState=cf,t):Up(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return RC(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Wr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Wr(a,i):(i=Ss(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?hf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=cf,r}return i=t.child,t=i.sibling,r=Wr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Up(t,e){return e=Lc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bl(t,e,n,r){return r!==null&&Ip(r),bi(e,t.child,null,n),t=Up(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function RC(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=rd(Error(O(422))),bl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Lc({mode:"visible",children:r.children},s,0,null),i=Ss(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&bi(e,t.child,null,o),e.child.memoizedState=hf(o),e.memoizedState=cf,i);if(!(e.mode&1))return bl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(O(419)),r=rd(i,r,void 0),bl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ut||a){if(r=tt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hr(t,s),In(r,t,s,-1))}return Hp(),r=rd(Error(O(421))),bl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=WC.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Qt=Ur(s.nextSibling),Yt=e,Ce=!0,vn=null,t!==null&&(sn[on++]=er,sn[on++]=tr,sn[on++]=Ns,er=t.id,tr=t.overflow,Ns=e),e=Up(e,r.children),e.flags|=4096,e)}function Ny(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),rf(t.return,e,n)}function sd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function lw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(xt(t,e,r.children,n),r=xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ny(t,n,e);else if(t.tag===19)Ny(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(xe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&bu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),sd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&bu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}sd(e,!0,n,null,i);break;case"together":sd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function au(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Os|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=Wr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function DC(t,e,n){switch(e.tag){case 3:ow(e),Mi();break;case 5:M0(e);break;case 1:Bt(e.type)&&xu(e);break;case 4:Dp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ge(Du,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(xe,xe.current&1),e.flags|=128,null):n&e.child.childLanes?aw(t,e,n):(ge(xe,xe.current&1),t=dr(t,e,n),t!==null?t.sibling:null);ge(xe,xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return lw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(xe,xe.current),r)break;return null;case 22:case 23:return e.lanes=0,sw(t,e,n)}return dr(t,e,n)}var uw,df,cw,hw;uw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};df=function(){};cw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ys(Bn.current);var i=null;switch(n){case"input":s=Pd(t,s),r=Pd(t,r),i=[];break;case"select":s=Re({},s,{value:void 0}),r=Re({},r,{value:void 0}),i=[];break;case"textarea":s=Ld(t,s),r=Ld(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Au)}Vd(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(na.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(na.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ve("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};hw=function(t,e,n,r){n!==r&&(e.flags|=4)};function No(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function PC(t,e,n){var r=e.pendingProps;switch(Cp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(e),null;case 1:return Bt(e.type)&&Nu(),yt(e),null;case 3:return r=e.stateNode,Li(),Te(jt),Te(It),Mp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vn!==null&&(wf(vn),vn=null))),df(t,e),yt(e),null;case 5:Pp(e);var s=ys(pa.current);if(n=e.type,t!==null&&e.stateNode!=null)cw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return yt(e),null}if(t=ys(Bn.current),Pl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Fn]=e,r[da]=i,t=(e.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(s=0;s<bo.length;s++)ve(bo[s],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":Fg(r,i),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ve("invalid",r);break;case"textarea":$g(r,i),ve("invalid",r)}Vd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Dl(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Dl(r.textContent,a,t),s=["children",""+a]):na.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ve("scroll",r)}switch(n){case"input":kl(r),Vg(r,i,!0);break;case"textarea":kl(r),Ug(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Au)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Fn]=e,t[da]=r,uw(t,e,!1,!1),e.stateNode=t;e:{switch(o=$d(n,r),n){case"dialog":ve("cancel",t),ve("close",t),s=r;break;case"iframe":case"object":case"embed":ve("load",t),s=r;break;case"video":case"audio":for(s=0;s<bo.length;s++)ve(bo[s],t);s=r;break;case"source":ve("error",t),s=r;break;case"img":case"image":case"link":ve("error",t),ve("load",t),s=r;break;case"details":ve("toggle",t),s=r;break;case"input":Fg(t,r),s=Pd(t,r),ve("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Re({},r,{value:void 0}),ve("invalid",t);break;case"textarea":$g(t,r),s=Ld(t,r),ve("invalid",t);break;default:s=r}Vd(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?B_(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&U_(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ra(t,l):typeof l=="number"&&ra(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(na.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ve("scroll",t):l!=null&&cp(t,i,l,o))}switch(n){case"input":kl(t),Vg(t,r,!1);break;case"textarea":kl(t),Ug(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?_i(t,!!r.multiple,i,!1):r.defaultValue!=null&&_i(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Au)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yt(e),null;case 6:if(t&&e.stateNode!=null)hw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=ys(pa.current),ys(Bn.current),Pl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Fn]=e,(i=r.nodeValue!==n)&&(t=Yt,t!==null))switch(t.tag){case 3:Dl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fn]=e,e.stateNode=r}return yt(e),null;case 13:if(Te(xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Qt!==null&&e.mode&1&&!(e.flags&128))x0(),Mi(),e.flags|=98560,i=!1;else if(i=Pl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(O(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[Fn]=e}else Mi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yt(e),i=!1}else vn!==null&&(wf(vn),vn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?Qe===0&&(Qe=3):Hp())),e.updateQueue!==null&&(e.flags|=4),yt(e),null);case 4:return Li(),df(t,e),t===null&&ca(e.stateNode.containerInfo),yt(e),null;case 10:return xp(e.type._context),yt(e),null;case 17:return Bt(e.type)&&Nu(),yt(e),null;case 19:if(Te(xe),i=e.memoizedState,i===null)return yt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)No(i,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=bu(t),o!==null){for(e.flags|=128,No(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(xe,xe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ve()>Vi&&(e.flags|=128,r=!0,No(i,!1),e.lanes=4194304)}else{if(!r)if(t=bu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),No(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ce)return yt(e),null}else 2*Ve()-i.renderingStartTime>Vi&&n!==1073741824&&(e.flags|=128,r=!0,No(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ve(),e.sibling=null,n=xe.current,ge(xe,r?n&1|2:n&1),e):(yt(e),null);case 22:case 23:return qp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gt&1073741824&&(yt(e),e.subtreeFlags&6&&(e.flags|=8192)):yt(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function MC(t,e){switch(Cp(e),e.tag){case 1:return Bt(e.type)&&Nu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Li(),Te(jt),Te(It),Mp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pp(e),null;case 13:if(Te(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));Mi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(xe),null;case 4:return Li(),null;case 10:return xp(e.type._context),null;case 22:case 23:return qp(),null;case 24:return null;default:return null}}var Ll=!1,wt=!1,bC=typeof WeakSet=="function"?WeakSet:Set,U=null;function hi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function ff(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var xy=!1;function LC(t,e){if(Qd=ku,t=g0(),Ep(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)d=h,h=p;for(;;){if(h===t)break t;if(d===n&&++u===s&&(a=o),d===i&&++c===r&&(l=o),(p=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xd={focusedElem:t,selectionRange:n},ku=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,w=m.memoizedState,f=e.stateNode,g=f.getSnapshotBeforeUpdate(e.elementType===e.type?y:gn(e.type,y),w);f.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(E){Pe(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return m=xy,xy=!1,m}function Ho(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ff(e,n,i)}s=s.next}while(s!==r)}}function Mc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function dw(t){var e=t.alternate;e!==null&&(t.alternate=null,dw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fn],delete e[da],delete e[Zd],delete e[vC],delete e[_C])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fw(t){return t.tag===5||t.tag===3||t.tag===4}function Oy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Au));else if(r!==4&&(t=t.child,t!==null))for(mf(t,e,n),t=t.sibling;t!==null;)mf(t,e,n),t=t.sibling}function gf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gf(t,e,n),t=t.sibling;t!==null;)gf(t,e,n),t=t.sibling}var lt=null,yn=!1;function Er(t,e,n){for(n=n.child;n!==null;)pw(t,e,n),n=n.sibling}function pw(t,e,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(Ic,n)}catch{}switch(n.tag){case 5:wt||hi(n,e);case 6:var r=lt,s=yn;lt=null,Er(t,e,n),lt=r,yn=s,lt!==null&&(yn?(t=lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(yn?(t=lt,n=n.stateNode,t.nodeType===8?Yh(t.parentNode,n):t.nodeType===1&&Yh(t,n),aa(t)):Yh(lt,n.stateNode));break;case 4:r=lt,s=yn,lt=n.stateNode.containerInfo,yn=!0,Er(t,e,n),lt=r,yn=s;break;case 0:case 11:case 14:case 15:if(!wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ff(n,e,o),s=s.next}while(s!==r)}Er(t,e,n);break;case 1:if(!wt&&(hi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Pe(n,e,a)}Er(t,e,n);break;case 21:Er(t,e,n);break;case 22:n.mode&1?(wt=(r=wt)||n.memoizedState!==null,Er(t,e,n),wt=r):Er(t,e,n);break;default:Er(t,e,n)}}function Ry(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bC),e.forEach(function(r){var s=qC.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function mn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:lt=a.stateNode,yn=!1;break e;case 3:lt=a.stateNode.containerInfo,yn=!0;break e;case 4:lt=a.stateNode.containerInfo,yn=!0;break e}a=a.return}if(lt===null)throw Error(O(160));pw(i,o,s),lt=null,yn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Pe(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mw(e,t),e=e.sibling}function mw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mn(e,t),bn(t),r&4){try{Ho(3,t,t.return),Mc(3,t)}catch(y){Pe(t,t.return,y)}try{Ho(5,t,t.return)}catch(y){Pe(t,t.return,y)}}break;case 1:mn(e,t),bn(t),r&512&&n!==null&&hi(n,n.return);break;case 5:if(mn(e,t),bn(t),r&512&&n!==null&&hi(n,n.return),t.flags&32){var s=t.stateNode;try{ra(s,"")}catch(y){Pe(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&F_(s,i),$d(a,o);var u=$d(a,i);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?B_(s,h):c==="dangerouslySetInnerHTML"?U_(s,h):c==="children"?ra(s,h):cp(s,c,h,u)}switch(a){case"input":Md(s,i);break;case"textarea":V_(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?_i(s,!!i.multiple,p,!1):d!==!!i.multiple&&(i.defaultValue!=null?_i(s,!!i.multiple,i.defaultValue,!0):_i(s,!!i.multiple,i.multiple?[]:"",!1))}s[da]=i}catch(y){Pe(t,t.return,y)}}break;case 6:if(mn(e,t),bn(t),r&4){if(t.stateNode===null)throw Error(O(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){Pe(t,t.return,y)}}break;case 3:if(mn(e,t),bn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{aa(e.containerInfo)}catch(y){Pe(t,t.return,y)}break;case 4:mn(e,t),bn(t);break;case 13:mn(e,t),bn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(zp=Ve())),r&4&&Ry(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(wt=(u=wt)||c,mn(e,t),wt=u):mn(e,t),bn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(U=t,c=t.child;c!==null;){for(h=U=c;U!==null;){switch(d=U,p=d.child,d.tag){case 0:case 11:case 14:case 15:Ho(4,d,d.return);break;case 1:hi(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){Pe(r,n,y)}}break;case 5:hi(d,d.return);break;case 22:if(d.memoizedState!==null){Py(h);continue}}p!==null?(p.return=d,U=p):Py(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=j_("display",o))}catch(y){Pe(t,t.return,y)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){Pe(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mn(e,t),bn(t),r&4&&Ry(t);break;case 21:break;default:mn(e,t),bn(t)}}function bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(fw(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ra(s,""),r.flags&=-33);var i=Oy(t);gf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Oy(t);mf(t,a,o);break;default:throw Error(O(161))}}catch(l){Pe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FC(t,e,n){U=t,gw(t)}function gw(t,e,n){for(var r=(t.mode&1)!==0;U!==null;){var s=U,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ll;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||wt;a=Ll;var u=wt;if(Ll=o,(wt=l)&&!u)for(U=s;U!==null;)o=U,l=o.child,o.tag===22&&o.memoizedState!==null?My(s):l!==null?(l.return=o,U=l):My(s);for(;i!==null;)U=i,gw(i),i=i.sibling;U=s,Ll=a,wt=u}Dy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,U=i):Dy(t)}}function Dy(t){for(;U!==null;){var e=U;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wt||Mc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!wt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:gn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&gy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&aa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}wt||e.flags&512&&pf(e)}catch(d){Pe(e,e.return,d)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function Py(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function My(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Mc(4,e)}catch(l){Pe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Pe(e,s,l)}}var i=e.return;try{pf(e)}catch(l){Pe(e,i,l)}break;case 5:var o=e.return;try{pf(e)}catch(l){Pe(e,o,l)}}}catch(l){Pe(e,e.return,l)}if(e===t){U=null;break}var a=e.sibling;if(a!==null){a.return=e.return,U=a;break}U=e.return}}var VC=Math.ceil,Vu=yr.ReactCurrentDispatcher,jp=yr.ReactCurrentOwner,cn=yr.ReactCurrentBatchConfig,ae=0,tt=null,qe=null,dt=0,Gt=0,di=rs(0),Qe=0,va=null,Os=0,bc=0,Bp=0,Go=null,Vt=null,zp=0,Vi=1/0,Yn=null,$u=!1,yf=null,Br=null,Fl=!1,Lr=null,Uu=0,Ko=0,vf=null,lu=-1,uu=0;function Pt(){return ae&6?Ve():lu!==-1?lu:lu=Ve()}function zr(t){return t.mode&1?ae&2&&dt!==0?dt&-dt:TC.transition!==null?(uu===0&&(uu=e0()),uu):(t=he,t!==0||(t=window.event,t=t===void 0?16:a0(t.type)),t):1}function In(t,e,n,r){if(50<Ko)throw Ko=0,vf=null,Error(O(185));za(t,n,r),(!(ae&2)||t!==tt)&&(t===tt&&(!(ae&2)&&(bc|=n),Qe===4&&Or(t,dt)),zt(t,r),n===1&&ae===0&&!(e.mode&1)&&(Vi=Ve()+500,Rc&&ss()))}function zt(t,e){var n=t.callbackNode;Tk(t,e);var r=Eu(t,t===tt?dt:0);if(r===0)n!==null&&zg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zg(n),e===1)t.tag===0?wC(by.bind(null,t)):I0(by.bind(null,t)),gC(function(){!(ae&6)&&ss()}),n=null;else{switch(t0(r)){case 1:n=mp;break;case 4:n=J_;break;case 16:n=Su;break;case 536870912:n=Z_;break;default:n=Su}n=kw(n,yw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function yw(t,e){if(lu=-1,uu=0,ae&6)throw Error(O(327));var n=t.callbackNode;if(ki()&&t.callbackNode!==n)return null;var r=Eu(t,t===tt?dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ju(t,r);else{e=r;var s=ae;ae|=2;var i=_w();(tt!==t||dt!==e)&&(Yn=null,Vi=Ve()+500,Ts(t,e));do try{jC();break}catch(a){vw(t,a)}while(!0);Np(),Vu.current=i,ae=s,qe!==null?e=0:(tt=null,dt=0,e=Qe)}if(e!==0){if(e===2&&(s=Wd(t),s!==0&&(r=s,e=_f(t,s))),e===1)throw n=va,Ts(t,0),Or(t,r),zt(t,Ve()),n;if(e===6)Or(t,r);else{if(s=t.current.alternate,!(r&30)&&!$C(s)&&(e=ju(t,r),e===2&&(i=Wd(t),i!==0&&(r=i,e=_f(t,i))),e===1))throw n=va,Ts(t,0),Or(t,r),zt(t,Ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:fs(t,Vt,Yn);break;case 3:if(Or(t,r),(r&130023424)===r&&(e=zp+500-Ve(),10<e)){if(Eu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Jd(fs.bind(null,t,Vt,Yn),e);break}fs(t,Vt,Yn);break;case 4:if(Or(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Cn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*VC(r/1960))-r,10<r){t.timeoutHandle=Jd(fs.bind(null,t,Vt,Yn),r);break}fs(t,Vt,Yn);break;case 5:fs(t,Vt,Yn);break;default:throw Error(O(329))}}}return zt(t,Ve()),t.callbackNode===n?yw.bind(null,t):null}function _f(t,e){var n=Go;return t.current.memoizedState.isDehydrated&&(Ts(t,e).flags|=256),t=ju(t,e),t!==2&&(e=Vt,Vt=n,e!==null&&wf(e)),t}function wf(t){Vt===null?Vt=t:Vt.push.apply(Vt,t)}function $C(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Nn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Or(t,e){for(e&=~Bp,e&=~bc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cn(e),r=1<<n;t[n]=-1,e&=~r}}function by(t){if(ae&6)throw Error(O(327));ki();var e=Eu(t,0);if(!(e&1))return zt(t,Ve()),null;var n=ju(t,e);if(t.tag!==0&&n===2){var r=Wd(t);r!==0&&(e=r,n=_f(t,r))}if(n===1)throw n=va,Ts(t,0),Or(t,e),zt(t,Ve()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fs(t,Vt,Yn),zt(t,Ve()),null}function Wp(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(Vi=Ve()+500,Rc&&ss())}}function Rs(t){Lr!==null&&Lr.tag===0&&!(ae&6)&&ki();var e=ae;ae|=1;var n=cn.transition,r=he;try{if(cn.transition=null,he=1,t)return t()}finally{he=r,cn.transition=n,ae=e,!(ae&6)&&ss()}}function qp(){Gt=di.current,Te(di)}function Ts(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mC(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(Cp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nu();break;case 3:Li(),Te(jt),Te(It),Mp();break;case 5:Pp(r);break;case 4:Li();break;case 13:Te(xe);break;case 19:Te(xe);break;case 10:xp(r.type._context);break;case 22:case 23:qp()}n=n.return}if(tt=t,qe=t=Wr(t.current,null),dt=Gt=e,Qe=0,va=null,Bp=bc=Os=0,Vt=Go=null,gs!==null){for(e=0;e<gs.length;e++)if(n=gs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}gs=null}return t}function vw(t,e){do{var n=qe;try{if(Np(),iu.current=Fu,Lu){for(var r=Oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Lu=!1}if(xs=0,Ze=Ke=Oe=null,qo=!1,ma=0,jp.current=null,n===null||n.return===null){Qe=1,va=e,qe=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=dt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Sy(o);if(p!==null){p.flags&=-257,Ey(p,o,a,i,e),p.mode&1&&Ty(i,u,e),e=p,l=u;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){Ty(i,u,e),Hp();break e}l=Error(O(426))}}else if(Ce&&a.mode&1){var w=Sy(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Ey(w,o,a,i,e),Ip(Fi(l,a));break e}}i=l=Fi(l,a),Qe!==4&&(Qe=2),Go===null?Go=[i]:Go.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var f=tw(i,l,e);my(i,f);break e;case 1:a=l;var g=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Br===null||!Br.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=nw(i,a,e);my(i,E);break e}}i=i.return}while(i!==null)}Tw(n)}catch(_){e=_,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function _w(){var t=Vu.current;return Vu.current=Fu,t===null?Fu:t}function Hp(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),tt===null||!(Os&268435455)&&!(bc&268435455)||Or(tt,dt)}function ju(t,e){var n=ae;ae|=2;var r=_w();(tt!==t||dt!==e)&&(Yn=null,Ts(t,e));do try{UC();break}catch(s){vw(t,s)}while(!0);if(Np(),ae=n,Vu.current=r,qe!==null)throw Error(O(261));return tt=null,dt=0,Qe}function UC(){for(;qe!==null;)ww(qe)}function jC(){for(;qe!==null&&!dk();)ww(qe)}function ww(t){var e=Ew(t.alternate,t,Gt);t.memoizedProps=t.pendingProps,e===null?Tw(t):qe=e,jp.current=null}function Tw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=MC(n,e),n!==null){n.flags&=32767,qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,qe=null;return}}else if(n=PC(n,e,Gt),n!==null){qe=n;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Qe===0&&(Qe=5)}function fs(t,e,n){var r=he,s=cn.transition;try{cn.transition=null,he=1,BC(t,e,n,r)}finally{cn.transition=s,he=r}return null}function BC(t,e,n,r){do ki();while(Lr!==null);if(ae&6)throw Error(O(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Sk(t,i),t===tt&&(qe=tt=null,dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fl||(Fl=!0,kw(Su,function(){return ki(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=cn.transition,cn.transition=null;var o=he;he=1;var a=ae;ae|=4,jp.current=null,LC(t,n),mw(n,t),lC(Xd),ku=!!Qd,Xd=Qd=null,t.current=n,FC(n),fk(),ae=a,he=o,cn.transition=i}else t.current=n;if(Fl&&(Fl=!1,Lr=t,Uu=s),i=t.pendingLanes,i===0&&(Br=null),gk(n.stateNode),zt(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($u)throw $u=!1,t=yf,yf=null,t;return Uu&1&&t.tag!==0&&ki(),i=t.pendingLanes,i&1?t===vf?Ko++:(Ko=0,vf=t):Ko=0,ss(),null}function ki(){if(Lr!==null){var t=t0(Uu),e=cn.transition,n=he;try{if(cn.transition=null,he=16>t?16:t,Lr===null)var r=!1;else{if(t=Lr,Lr=null,Uu=0,ae&6)throw Error(O(331));var s=ae;for(ae|=4,U=t.current;U!==null;){var i=U,o=i.child;if(U.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(U=u;U!==null;){var c=U;switch(c.tag){case 0:case 11:case 15:Ho(8,c,i)}var h=c.child;if(h!==null)h.return=c,U=h;else for(;U!==null;){c=U;var d=c.sibling,p=c.return;if(dw(c),c===u){U=null;break}if(d!==null){d.return=p,U=d;break}U=p}}}var m=i.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}U=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,U=o;else e:for(;U!==null;){if(i=U,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ho(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,U=f;break e}U=i.return}}var g=t.current;for(U=g;U!==null;){o=U;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,U=v;else e:for(o=g;U!==null;){if(a=U,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Mc(9,a)}}catch(_){Pe(a,a.return,_)}if(a===o){U=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,U=E;break e}U=a.return}}if(ae=s,ss(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(Ic,t)}catch{}r=!0}return r}finally{he=n,cn.transition=e}}return!1}function Ly(t,e,n){e=Fi(n,e),e=tw(t,e,1),t=jr(t,e,1),e=Pt(),t!==null&&(za(t,1,e),zt(t,e))}function Pe(t,e,n){if(t.tag===3)Ly(t,t,n);else for(;e!==null;){if(e.tag===3){Ly(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Br===null||!Br.has(r))){t=Fi(n,t),t=nw(e,t,1),e=jr(e,t,1),t=Pt(),e!==null&&(za(e,1,t),zt(e,t));break}}e=e.return}}function zC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&n,tt===t&&(dt&n)===n&&(Qe===4||Qe===3&&(dt&130023424)===dt&&500>Ve()-zp?Ts(t,0):Bp|=n),zt(t,e)}function Sw(t,e){e===0&&(t.mode&1?(e=Al,Al<<=1,!(Al&130023424)&&(Al=4194304)):e=1);var n=Pt();t=hr(t,e),t!==null&&(za(t,e,n),zt(t,n))}function WC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Sw(t,n)}function qC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),Sw(t,n)}var Ew;Ew=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)Ut=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ut=!1,DC(t,e,n);Ut=!!(t.flags&131072)}else Ut=!1,Ce&&e.flags&1048576&&A0(e,Ru,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;au(t,e),t=e.pendingProps;var s=Pi(e,It.current);Ei(e,n),s=Lp(null,e,r,t,s,n);var i=Fp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bt(r)?(i=!0,xu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Rp(e),s.updater=Pc,e.stateNode=s,s._reactInternals=e,of(e,r,t,n),e=uf(null,e,r,!0,i,n)):(e.tag=0,Ce&&i&&kp(e),xt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(au(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=GC(r),t=gn(r,t),s){case 0:e=lf(null,e,r,t,n);break e;case 1:e=Iy(null,e,r,t,n);break e;case 11:e=ky(null,e,r,t,n);break e;case 14:e=Cy(null,e,r,gn(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gn(r,s),lf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gn(r,s),Iy(t,e,r,s,n);case 3:e:{if(ow(e),t===null)throw Error(O(387));r=e.pendingProps,i=e.memoizedState,s=i.element,P0(t,e),Mu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Fi(Error(O(423)),e),e=Ay(t,e,r,n,s);break e}else if(r!==s){s=Fi(Error(O(424)),e),e=Ay(t,e,r,n,s);break e}else for(Qt=Ur(e.stateNode.containerInfo.firstChild),Yt=e,Ce=!0,vn=null,n=R0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mi(),r===s){e=dr(t,e,n);break e}xt(t,e,r,n)}e=e.child}return e;case 5:return M0(e),t===null&&nf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Yd(r,s)?o=null:i!==null&&Yd(r,i)&&(e.flags|=32),iw(t,e),xt(t,e,o,n),e.child;case 6:return t===null&&nf(e),null;case 13:return aw(t,e,n);case 4:return Dp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bi(e,null,r,n):xt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gn(r,s),ky(t,e,r,s,n);case 7:return xt(t,e,e.pendingProps,n),e.child;case 8:return xt(t,e,e.pendingProps.children,n),e.child;case 12:return xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ge(Du,r._currentValue),r._currentValue=o,i!==null)if(Nn(i.value,o)){if(i.children===s.children&&!jt.current){e=dr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ir(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),rf(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(O(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),rf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}xt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ei(e,n),s=fn(s),r=r(s),e.flags|=1,xt(t,e,r,n),e.child;case 14:return r=e.type,s=gn(r,e.pendingProps),s=gn(r.type,s),Cy(t,e,r,s,n);case 15:return rw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gn(r,s),au(t,e),e.tag=1,Bt(r)?(t=!0,xu(e)):t=!1,Ei(e,n),ew(e,r,s),of(e,r,s,n),uf(null,e,r,!0,t,n);case 19:return lw(t,e,n);case 22:return sw(t,e,n)}throw Error(O(156,e.tag))};function kw(t,e){return Y_(t,e)}function HC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(t,e,n,r){return new HC(t,e,n,r)}function Gp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function GC(t){if(typeof t=="function")return Gp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===dp)return 11;if(t===fp)return 14}return 2}function Wr(t,e){var n=t.alternate;return n===null?(n=ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Gp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ni:return Ss(n.children,s,i,e);case hp:o=8,s|=8;break;case xd:return t=ln(12,n,e,s|2),t.elementType=xd,t.lanes=i,t;case Od:return t=ln(13,n,e,s),t.elementType=Od,t.lanes=i,t;case Rd:return t=ln(19,n,e,s),t.elementType=Rd,t.lanes=i,t;case M_:return Lc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D_:o=10;break e;case P_:o=9;break e;case dp:o=11;break e;case fp:o=14;break e;case Ir:o=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=ln(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ss(t,e,n,r){return t=ln(7,t,r,e),t.lanes=n,t}function Lc(t,e,n,r){return t=ln(22,t,r,e),t.elementType=M_,t.lanes=n,t.stateNode={isHidden:!1},t}function id(t,e,n){return t=ln(6,t,null,e),t.lanes=n,t}function od(t,e,n){return e=ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KC(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uh(0),this.expirationTimes=Uh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Kp(t,e,n,r,s,i,o,a,l){return t=new KC(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ln(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rp(i),t}function QC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ti,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Cw(t){if(!t)return Xr;t=t._reactInternals;e:{if(zs(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(Bt(n))return C0(t,n,e)}return e}function Iw(t,e,n,r,s,i,o,a,l){return t=Kp(n,r,!0,t,s,i,o,a,l),t.context=Cw(null),n=t.current,r=Pt(),s=zr(n),i=ir(r,s),i.callback=e??null,jr(n,i,s),t.current.lanes=s,za(t,s,r),zt(t,r),t}function Fc(t,e,n,r){var s=e.current,i=Pt(),o=zr(s);return n=Cw(n),e.context===null?e.context=n:e.pendingContext=n,e=ir(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jr(s,e,o),t!==null&&(In(t,s,o,i),su(t,s,o)),o}function Bu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Fy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qp(t,e){Fy(t,e),(t=t.alternate)&&Fy(t,e)}function XC(){return null}var Aw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xp(t){this._internalRoot=t}Vc.prototype.render=Xp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));Fc(t,e,null,null)};Vc.prototype.unmount=Xp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Rs(function(){Fc(null,t,null,null)}),e[cr]=null}};function Vc(t){this._internalRoot=t}Vc.prototype.unstable_scheduleHydration=function(t){if(t){var e=s0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xr.length&&e!==0&&e<xr[n].priority;n++);xr.splice(n,0,t),n===0&&o0(t)}};function Yp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vy(){}function YC(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Bu(o);i.call(u)}}var o=Iw(e,r,t,0,null,!1,!1,"",Vy);return t._reactRootContainer=o,t[cr]=o.current,ca(t.nodeType===8?t.parentNode:t),Rs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Bu(l);a.call(u)}}var l=Kp(t,0,!1,null,null,!1,!1,"",Vy);return t._reactRootContainer=l,t[cr]=l.current,ca(t.nodeType===8?t.parentNode:t),Rs(function(){Fc(e,l,n,r)}),l}function Uc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Bu(o);a.call(l)}}Fc(e,o,t,s)}else o=YC(n,e,t,s,r);return Bu(o)}n0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Mo(e.pendingLanes);n!==0&&(gp(e,n|1),zt(e,Ve()),!(ae&6)&&(Vi=Ve()+500,ss()))}break;case 13:Rs(function(){var r=hr(t,1);if(r!==null){var s=Pt();In(r,t,1,s)}}),Qp(t,1)}};yp=function(t){if(t.tag===13){var e=hr(t,134217728);if(e!==null){var n=Pt();In(e,t,134217728,n)}Qp(t,134217728)}};r0=function(t){if(t.tag===13){var e=zr(t),n=hr(t,e);if(n!==null){var r=Pt();In(n,t,e,r)}Qp(t,e)}};s0=function(){return he};i0=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};jd=function(t,e,n){switch(e){case"input":if(Md(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Oc(r);if(!s)throw Error(O(90));L_(r),Md(r,s)}}}break;case"textarea":V_(t,n);break;case"select":e=n.value,e!=null&&_i(t,!!n.multiple,e,!1)}};q_=Wp;H_=Rs;var JC={usingClientEntryPoint:!1,Events:[qa,oi,Oc,z_,W_,Wp]},xo={findFiberByHostInstance:ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZC={bundleType:xo.bundleType,version:xo.version,rendererPackageName:xo.rendererPackageName,rendererConfig:xo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Q_(t),t===null?null:t.stateNode},findFiberByHostInstance:xo.findFiberByHostInstance||XC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vl.isDisabled&&Vl.supportsFiber)try{Ic=Vl.inject(ZC),jn=Vl}catch{}}tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JC;tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yp(e))throw Error(O(200));return QC(t,e,null,n)};tn.createRoot=function(t,e){if(!Yp(t))throw Error(O(299));var n=!1,r="",s=Aw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Kp(t,1,!1,null,null,n,!1,r,s),t[cr]=e.current,ca(t.nodeType===8?t.parentNode:t),new Xp(e)};tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=Q_(e),t=t===null?null:t.stateNode,t};tn.flushSync=function(t){return Rs(t)};tn.hydrate=function(t,e,n){if(!$c(e))throw Error(O(200));return Uc(null,t,e,!0,n)};tn.hydrateRoot=function(t,e,n){if(!Yp(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Aw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Iw(e,null,t,1,n??null,s,!1,i,o),t[cr]=e.current,ca(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Vc(e)};tn.render=function(t,e,n){if(!$c(e))throw Error(O(200));return Uc(null,t,e,!1,n)};tn.unmountComponentAtNode=function(t){if(!$c(t))throw Error(O(40));return t._reactRootContainer?(Rs(function(){Uc(null,null,t,!1,function(){t._reactRootContainer=null,t[cr]=null})}),!0):!1};tn.unstable_batchedUpdates=Wp;tn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$c(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return Uc(t,e,n,!1,r)};tn.version="18.3.1-next-f1338f8080-20240426";function Nw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nw)}catch(t){console.error(t)}}Nw(),N_.exports=tn;var eI=N_.exports;const tI=g_(eI);var $y={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},nI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ow={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,c=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(d=64)),r.push(n[c],n[h],n[d],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw new rI;const d=i<<2|a>>4;if(r.push(d),u!==64){const p=a<<4&240|u>>2;if(r.push(p),h!==64){const m=u<<6&192|h;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sI=function(t){const e=xw(t);return Ow.encodeByteArray(e,!0)},zu=function(t){return sI(t).replace(/\./g,"")},Rw=function(t){try{return Ow.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=()=>iI().__FIREBASE_DEFAULTS__,aI=()=>{if(typeof process>"u"||typeof $y>"u")return;const t=$y.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Rw(t[1]);return e&&JSON.parse(e)},Jp=()=>{try{return oI()||aI()||lI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Dw=t=>{var e,n;return(n=(e=Jp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},uI=t=>{const e=Dw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Pw=()=>{var t;return(t=Jp())===null||t===void 0?void 0:t.config},Mw=t=>{var e;return(e=Jp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[zu(JSON.stringify(n)),zu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function fI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mI(){const t=At();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gI(){try{return typeof indexedDB=="object"}catch{return!1}}function yI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="FirebaseError";class vr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=vI,Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ga.prototype.create)}}class Ga{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?_I(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new vr(s,a,r)}}function _I(t,e){return t.replace(wI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const wI=/\{\$([^}]+)}/g;function TI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Uy(i)&&Uy(o)){if(!Wu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Uy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Lo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Fo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function SI(t,e){const n=new EI(t,e);return n.subscribe.bind(n)}class EI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ad),s.error===void 0&&(s.error=ad),s.complete===void 0&&(s.complete=ad);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ad(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t){return t&&t._delegate?t._delegate:t}class Ds{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AI(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:II(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function II(t){return t===ps?void 0:t}function AI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const xI={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},OI=ue.INFO,RI={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},DI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=RI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zp{constructor(e){this.name=e,this._logLevel=OI,this._logHandler=DI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const PI=(t,e)=>e.some(n=>t instanceof n);let jy,By;function MI(){return jy||(jy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bI(){return By||(By=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bw=new WeakMap,Tf=new WeakMap,Lw=new WeakMap,ld=new WeakMap,em=new WeakMap;function LI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(qr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&bw.set(n,t)}).catch(()=>{}),em.set(e,t),e}function FI(t){if(Tf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Tf.set(t,e)}let Sf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Lw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VI(t){Sf=t(Sf)}function $I(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ud(this),e,...n);return Lw.set(r,e.sort?e.sort():[e]),qr(r)}:bI().includes(t)?function(...e){return t.apply(ud(this),e),qr(bw.get(this))}:function(...e){return qr(t.apply(ud(this),e))}}function UI(t){return typeof t=="function"?$I(t):(t instanceof IDBTransaction&&FI(t),PI(t,MI())?new Proxy(t,Sf):t)}function qr(t){if(t instanceof IDBRequest)return LI(t);if(ld.has(t))return ld.get(t);const e=UI(t);return e!==t&&(ld.set(t,e),em.set(e,t)),e}const ud=t=>em.get(t);function jI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=qr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(qr(o.result),l.oldVersion,l.newVersion,qr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const BI=["get","getKey","getAll","getAllKeys","count"],zI=["put","add","delete","clear"],cd=new Map;function zy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cd.get(e))return cd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=zI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BI.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return cd.set(e,i),i}VI(t=>({...t,get:(e,n,r)=>zy(e,n)||t.get(e,n,r),has:(e,n)=>!!zy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ef="@firebase/app",Wy="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new Zp("@firebase/app"),HI="@firebase/app-compat",GI="@firebase/analytics-compat",KI="@firebase/analytics",QI="@firebase/app-check-compat",XI="@firebase/app-check",YI="@firebase/auth",JI="@firebase/auth-compat",ZI="@firebase/database",eA="@firebase/database-compat",tA="@firebase/functions",nA="@firebase/functions-compat",rA="@firebase/installations",sA="@firebase/installations-compat",iA="@firebase/messaging",oA="@firebase/messaging-compat",aA="@firebase/performance",lA="@firebase/performance-compat",uA="@firebase/remote-config",cA="@firebase/remote-config-compat",hA="@firebase/storage",dA="@firebase/storage-compat",fA="@firebase/firestore",pA="@firebase/firestore-compat",mA="firebase",gA="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf="[DEFAULT]",yA={[Ef]:"fire-core",[HI]:"fire-core-compat",[KI]:"fire-analytics",[GI]:"fire-analytics-compat",[XI]:"fire-app-check",[QI]:"fire-app-check-compat",[YI]:"fire-auth",[JI]:"fire-auth-compat",[ZI]:"fire-rtdb",[eA]:"fire-rtdb-compat",[tA]:"fire-fn",[nA]:"fire-fn-compat",[rA]:"fire-iid",[sA]:"fire-iid-compat",[iA]:"fire-fcm",[oA]:"fire-fcm-compat",[aA]:"fire-perf",[lA]:"fire-perf-compat",[uA]:"fire-rc",[cA]:"fire-rc-compat",[hA]:"fire-gcs",[dA]:"fire-gcs-compat",[fA]:"fire-fst",[pA]:"fire-fst-compat","fire-js":"fire-js",[mA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu=new Map,Cf=new Map;function vA(t,e){try{t.container.addComponent(e)}catch(n){Ps.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $i(t){const e=t.name;if(Cf.has(e))return Ps.debug(`There were multiple attempts to register component ${e}.`),!1;Cf.set(e,t);for(const n of qu.values())vA(n,t);return!0}function tm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Hr=new Ga("app","Firebase",_A);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=gA;function Fw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:kf,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Hr.create("bad-app-name",{appName:String(s)});if(n||(n=Pw()),!n)throw Hr.create("no-options");const i=qu.get(s);if(i){if(Wu(n,i.options)&&Wu(r,i.config))return i;throw Hr.create("duplicate-app",{appName:s})}const o=new NI(s);for(const l of Cf.values())o.addComponent(l);const a=new wA(n,r,o);return qu.set(s,a),a}function Vw(t=kf){const e=qu.get(t);if(!e&&t===kf&&Pw())return Fw();if(!e)throw Hr.create("no-app",{appName:t});return e}function Gr(t,e,n){var r;let s=(r=yA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ps.warn(a.join(" "));return}$i(new Ds(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="firebase-heartbeat-database",SA=1,_a="firebase-heartbeat-store";let hd=null;function $w(){return hd||(hd=jI(TA,SA,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_a)}}}).catch(t=>{throw Hr.create("idb-open",{originalErrorMessage:t.message})})),hd}async function EA(t){try{return await(await $w()).transaction(_a).objectStore(_a).get(Uw(t))}catch(e){if(e instanceof vr)Ps.warn(e.message);else{const n=Hr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ps.warn(n.message)}}}async function qy(t,e){try{const r=(await $w()).transaction(_a,"readwrite");await r.objectStore(_a).put(e,Uw(t)),await r.done}catch(n){if(n instanceof vr)Ps.warn(n.message);else{const r=Hr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ps.warn(r.message)}}}function Uw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=1024,CA=30*24*60*60*1e3;class IA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Hy();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=CA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Hy(),{heartbeatsToSend:n,unsentEntries:r}=AA(this._heartbeatsCache.heartbeats),s=zu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Hy(){return new Date().toISOString().substring(0,10)}function AA(t,e=kA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Gy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Gy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class NA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gI()?yI().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await EA(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return qy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return qy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Gy(t){return zu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t){$i(new Ds("platform-logger",e=>new WI(e),"PRIVATE")),$i(new Ds("heartbeat",e=>new IA(e),"PRIVATE")),Gr(Ef,Wy,t),Gr(Ef,Wy,"esm2017"),Gr("fire-js","")}xA("");function nm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Dn(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function He(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}function jw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OA=jw,Bw=new Ga("auth","Firebase",jw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=new Zp("@firebase/auth");function RA(t,...e){Hu.logLevel<=ue.WARN&&Hu.warn(`Auth (${so}): ${t}`,...e)}function hu(t,...e){Hu.logLevel<=ue.ERROR&&Hu.error(`Auth (${so}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t,...e){throw rm(t,...e)}function zn(t,...e){return rm(t,...e)}function DA(t,e,n){const r=Object.assign(Object.assign({},OA()),{[e]:n});return new Ga("auth","Firebase",r).create(e,{appName:t.name})}function rm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Bw.create(t,...e)}function K(t,e,...n){if(!t)throw rm(e,...n)}function nr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hu(e),new Error(e)}function fr(t,e){t||nr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function PA(){return Ky()==="http:"||Ky()==="https:"}function Ky(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PA()||fI()||"connection"in navigator)?navigator.onLine:!0}function bA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n){this.shortDelay=e,this.longDelay=n,fr(n>e,"Short delay should be less than long delay!"),this.isMobile=dI()||pI()}get(){return MA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t,e){fr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=new Qa(3e4,6e4);function io(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function oo(t,e,n,r,s={}){return Ww(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Ka(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),zw.fetch()(qw(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function Ww(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},LA),e);try{const s=new VA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw $l(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw $l(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw $l(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw $l(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw DA(t,c,u);On(t,c)}}catch(s){if(s instanceof vr)throw s;On(t,"network-request-failed",{message:String(s)})}}async function Xa(t,e,n,r,s={}){const i=await oo(t,e,n,r,s);return"mfaPendingCredential"in i&&On(t,"multi-factor-auth-required",{_serverResponse:i}),i}function qw(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?sm(t.config,s):`${t.config.apiScheme}://${s}`}class VA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zn(this.auth,"network-request-failed")),FA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $l(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=zn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(t,e){return oo(t,"POST","/v1/accounts:delete",e)}async function UA(t,e){return oo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jA(t,e=!1){const n=xn(t),r=await n.getIdToken(e),s=im(r);K(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Qo(dd(s.auth_time)),issuedAtTime:Qo(dd(s.iat)),expirationTime:Qo(dd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function dd(t){return Number(t)*1e3}function im(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hu("JWT malformed, contained fewer than 3 sections"),null;try{const s=Rw(n);return s?JSON.parse(s):(hu("Failed to decode base64 JWT payload"),null)}catch(s){return hu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function BA(t){const e=im(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof vr&&zA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function zA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qo(this.lastLoginAt),this.creationTime=Qo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await wa(t,UA(n,{idToken:r}));K(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?GA(i.providerUserInfo):[],a=HA(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Hw(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function qA(t){const e=xn(t);await Gu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function GA(t){return t.map(e=>{var{providerId:n}=e,r=nm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(t,e){const n=await Ww(t,{},async()=>{const r=Ka({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=qw(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",zw.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):BA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return K(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await KA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ta;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(K(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(K(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ta,this.toJSON())}_performRefresh(){return nr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Es{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=nm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new WA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Hw(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await wa(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jA(this,e)}reload(){return qA(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Es(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Gu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await wa(this,$A(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,f=(u=n.createdAt)!==null&&u!==void 0?u:void 0,g=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:v,emailVerified:E,isAnonymous:_,providerData:S,stsTokenManager:k}=n;K(v&&k,e,"internal-error");const T=Ta.fromJSON(this.name,k);K(typeof v=="string",e,"internal-error"),kr(h,e.name),kr(d,e.name),K(typeof E=="boolean",e,"internal-error"),K(typeof _=="boolean",e,"internal-error"),kr(p,e.name),kr(m,e.name),kr(y,e.name),kr(w,e.name),kr(f,e.name),kr(g,e.name);const I=new Es({uid:v,auth:e,email:d,emailVerified:E,displayName:h,isAnonymous:_,photoURL:m,phoneNumber:p,tenantId:y,stsTokenManager:T,createdAt:f,lastLoginAt:g});return S&&Array.isArray(S)&&(I.providerData=S.map(C=>Object.assign({},C))),w&&(I._redirectEventId=w),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ta;s.updateFromServerResponse(n);const i=new Es({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Gu(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=new Map;function rr(t){fr(t instanceof Function,"Expected a class definition");let e=Qy.get(t);return e?(fr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Qy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Gw.type="NONE";const Xy=Gw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t,e,n){return`firebase:${t}:${e}:${n}`}class Ci{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=du(this.userKey,s.apiKey,i),this.fullPersistenceKey=du("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Es._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ci(rr(Xy),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||rr(Xy);const o=du(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const h=Es._fromJSON(e,c);u!==i&&(a=h),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ci(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Ci(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jw(e))return"Blackberry";if(Zw(e))return"Webos";if(om(e))return"Safari";if((e.includes("chrome/")||Qw(e))&&!e.includes("edge/"))return"Chrome";if(Yw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Kw(t=At()){return/firefox\//i.test(t)}function om(t=At()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qw(t=At()){return/crios\//i.test(t)}function Xw(t=At()){return/iemobile/i.test(t)}function Yw(t=At()){return/android/i.test(t)}function Jw(t=At()){return/blackberry/i.test(t)}function Zw(t=At()){return/webos/i.test(t)}function jc(t=At()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function QA(t=At()){var e;return jc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XA(){return mI()&&document.documentMode===10}function e1(t=At()){return jc(t)||Yw(t)||Zw(t)||Jw(t)||/windows phone/i.test(t)||Xw(t)}function YA(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(t,e=[]){let n;switch(t){case"Browser":n=Yy(At());break;case"Worker":n=`${Yy(At())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${so}/${r}`}async function n1(t,e){return oo(t,"GET","/v2/recaptchaConfig",io(t,e))}function Jy(t){return t!==void 0&&t.enterprise!==void 0}class r1{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function s1(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=zn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",JA().appendChild(r)})}function ZA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const eN="https://www.google.com/recaptcha/enterprise.js?render=",tN="recaptcha-enterprise",nN="NO_RECAPTCHA";class i1{constructor(e){this.type=tN,this.auth=ao(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{n1(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new r1(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Jy(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(nN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Jy(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}s1(eN+a).then(()=>{s(a,i,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function Ku(t,e,n,r=!1){const s=new i1(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zy(this),this.idTokenSubscription=new Zy(this),this.beforeStateQueue=new rN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=rr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ci.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?xn(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(rr(e))})}async initializeRecaptchaConfig(){const e=await n1(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new r1(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new i1(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ga("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&rr(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await Ci.create(this,[rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return K(o,this,"internal-error"),o.then(()=>i(this.currentUser)),typeof n=="function"?e.addObserver(n,r,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=t1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&RA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ao(t){return xn(t)}class Zy{constructor(e){this.auth=e,this.observer=null,this.addObserver=SI(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(t,e){const n=tm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Wu(i,e??{}))return s;On(s,"already-initialized")}return n.initialize({options:e})}function oN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(rr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function aN(t,e,n){const r=ao(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=o1(e),{host:o,port:a}=lN(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),uN()}function o1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lN(t){const e=o1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ev(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ev(o)}}}function ev(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return nr("not implemented")}_getIdTokenResponse(e){return nr("not implemented")}_linkToIdToken(e,n){return nr("not implemented")}_getReauthenticationResolver(e){return nr("not implemented")}}async function cN(t,e){return oo(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fd(t,e){return Xa(t,"POST","/v1/accounts:signInWithPassword",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hN(t,e){return Xa(t,"POST","/v1/accounts:signInWithEmailLink",io(t,e))}async function dN(t,e){return Xa(t,"POST","/v1/accounts:signInWithEmailLink",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends am{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Sa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Sa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const s=await Ku(e,r,"signInWithPassword");return fd(e,s)}else return fd(e,r).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const i=await Ku(e,r,"signInWithPassword");return fd(e,i)}else return Promise.reject(s)});case"emailLink":return hN(e,{email:this._email,oobCode:this._password});default:On(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return cN(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return dN(e,{idToken:n,email:this._email,oobCode:this._password});default:On(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ii(t,e){return Xa(t,"POST","/v1/accounts:signInWithIdp",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="http://localhost";class Ms extends am{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):On("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=nm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ms(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ii(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ii(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ii(e,n)}buildRequest(){const e={requestUri:fN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ka(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mN(t){const e=Lo(Fo(t)).link,n=e?Lo(Fo(e)).deep_link_id:null,r=Lo(Fo(t)).deep_link_id;return(r?Lo(Fo(r)).link:null)||r||n||e||t}class lm{constructor(e){var n,r,s,i,o,a;const l=Lo(Fo(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,h=pN((s=l.mode)!==null&&s!==void 0?s:null);K(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=mN(e);try{return new lm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.providerId=lo.PROVIDER_ID}static credential(e,n){return Sa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=lm.parseLink(n);return K(r,"argument-error"),Sa._fromEmailAndCode(e,r.code,r.tenantId)}}lo.PROVIDER_ID="password";lo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";lo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends a1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Ya{constructor(){super("facebook.com")}static credential(e){return Ms._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Ya{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ms._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Dr.credential(n,r)}catch{return null}}}Dr.GOOGLE_SIGN_IN_METHOD="google.com";Dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Ya{constructor(){super("github.com")}static credential(e){return Ms._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.GITHUB_SIGN_IN_METHOD="github.com";Pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends Ya{constructor(){super("twitter.com")}static credential(e,n){return Ms._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Mr.credential(n,r)}catch{return null}}}Mr.TWITTER_SIGN_IN_METHOD="twitter.com";Mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pd(t,e){return Xa(t,"POST","/v1/accounts:signUp",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Es._fromIdTokenResponse(e,r,s),o=tv(r);return new bs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=tv(r);return new bs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function tv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends vr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Qu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Qu(e,n,r,s)}}function l1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Qu._fromErrorAndOperation(t,i,e,r):i})}async function gN(t,e,n=!1){const r=await wa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return bs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await wa(t,l1(r,s,e,t),n);K(i.idToken,r,"internal-error");const o=im(i.idToken);K(o,r,"internal-error");const{sub:a}=o;return K(t.uid===a,r,"user-mismatch"),bs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&On(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u1(t,e,n=!1){const r="signIn",s=await l1(t,r,e),i=await bs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function vN(t,e){return u1(ao(t),e)}async function _N(t,e,n){var r;const s=ao(t),i={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=s._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const u=await Ku(s,i,"signUpPassword");o=pd(s,u)}else o=pd(s,i).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const c=await Ku(s,i,"signUpPassword");return pd(s,c)}else return Promise.reject(u)});const a=await o.catch(u=>Promise.reject(u)),l=await bs._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(l.user),l}function wN(t,e,n){return vN(xn(t),lo.credential(e,n))}function TN(t,e,n,r){return xn(t).onIdTokenChanged(e,n,r)}function SN(t,e,n){return xn(t).beforeAuthStateChanged(e,n)}const Xu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xu,"1"),this.storage.removeItem(Xu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(){const t=At();return om(t)||jc(t)}const kN=1e3,CN=10;class h1 extends c1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=EN()&&YA(),this.fallbackToPolling=e1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);XA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,CN):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},kN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}h1.type="LOCAL";const IN=h1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1 extends c1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}d1.type="SESSION";const f1=d1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Bc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await AN(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=um("",20);s.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const d=h;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(d.data.response);break;default:clearTimeout(c),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return window}function xN(t){Wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(){return typeof Wn().WorkerGlobalScope<"u"&&typeof Wn().importScripts=="function"}async function ON(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function DN(){return p1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="firebaseLocalStorageDb",PN=1,Yu="firebaseLocalStorage",g1="fbase_key";class Ja{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zc(t,e){return t.transaction([Yu],e?"readwrite":"readonly").objectStore(Yu)}function MN(){const t=indexedDB.deleteDatabase(m1);return new Ja(t).toPromise()}function Af(){const t=indexedDB.open(m1,PN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Yu,{keyPath:g1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Yu)?e(r):(r.close(),await MN(),e(await Af()))})})}async function nv(t,e,n){const r=zc(t,!0).put({[g1]:e,value:n});return new Ja(r).toPromise()}async function bN(t,e){const n=zc(t,!1).get(e),r=await new Ja(n).toPromise();return r===void 0?null:r.value}function rv(t,e){const n=zc(t,!0).delete(e);return new Ja(n).toPromise()}const LN=800,FN=3;class y1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Af(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>FN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return p1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bc._getInstance(DN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ON(),!this.activeServiceWorker)return;this.sender=new NN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Af();return await nv(e,Xu,"1"),await rv(e,Xu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>nv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>bN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=zc(s,!1).getAll();return new Ja(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}y1.type="LOCAL";const VN=y1;new Qa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t,e){return e?rr(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm extends am{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ii(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ii(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ii(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function UN(t){return u1(t.auth,new cm(t),t.bypassAuthState)}function jN(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),yN(n,new cm(t),t.bypassAuthState)}async function BN(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),gN(n,new cm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UN;case"linkViaPopup":case"linkViaRedirect":return BN;case"reauthViaPopup":case"reauthViaRedirect":return jN;default:On(this.auth,"internal-error")}}resolve(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=new Qa(2e3,1e4);class fi extends v1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,fi.currentPopupAction&&fi.currentPopupAction.cancel(),fi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){fr(this.filter.length===1,"Popup operations only handle one event");const e=um();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zN.get())};e()}}fi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="pendingRedirect",fu=new Map;class qN extends v1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=fu.get(this.auth._key());if(!e){try{const r=await HN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fu.set(this.auth._key(),e)}return this.bypassAuthState||fu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HN(t,e){const n=QN(e),r=KN(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function GN(t,e){fu.set(t._key(),e)}function KN(t){return rr(t._redirectPersistence)}function QN(t){return du(WN,t.config.apiKey,t.name)}async function XN(t,e,n=!1){const r=ao(t),s=$N(r,e),o=await new qN(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=10*60*1e3;class JN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(zn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YN&&this.cachedEventUids.clear(),this.cachedEventUids.has(sv(e))}saveEventToCache(e){this.cachedEventUids.add(sv(e)),this.lastProcessedEventTime=Date.now()}}function sv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ex(t,e={}){return oo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nx=/^https?/;async function rx(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ex(t);for(const n of e)try{if(sx(n))return}catch{}On(t,"unauthorized-domain")}function sx(t){const e=If(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!nx.test(n))return!1;if(tx.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=new Qa(3e4,6e4);function iv(){const t=Wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ox(t){return new Promise((e,n)=>{var r,s,i;function o(){iv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iv(),n(zn(t,"network-request-failed"))},timeout:ix.get()})}if(!((s=(r=Wn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Wn().gapi)===null||i===void 0)&&i.load)o();else{const a=ZA("iframefcb");return Wn()[a]=()=>{gapi.load?o():n(zn(t,"network-request-failed"))},s1(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw pu=null,e})}let pu=null;function ax(t){return pu=pu||ox(t),pu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=new Qa(5e3,15e3),ux="__/auth/iframe",cx="emulator/auth/iframe",hx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fx(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?sm(e,cx):`https://${t.config.authDomain}/${ux}`,r={apiKey:e.apiKey,appName:t.name,v:so},s=dx.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ka(r).slice(1)}`}async function px(t){const e=await ax(t),n=Wn().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:fx(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hx,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=zn(t,"network-request-failed"),a=Wn().setTimeout(()=>{i(o)},lx.get());function l(){Wn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gx=500,yx=600,vx="_blank",_x="http://localhost";class ov{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wx(t,e,n,r=gx,s=yx){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},mx),{width:r.toString(),height:s.toString(),top:i,left:o}),u=At().toLowerCase();n&&(a=Qw(u)?vx:n),Kw(u)&&(e=e||_x,l.scrollbars="yes");const c=Object.entries(l).reduce((d,[p,m])=>`${d}${p}=${m},`,"");if(QA(u)&&a!=="_self")return Tx(e||"",a),new ov(null);const h=window.open(e||"",a,c);K(h,t,"popup-blocked");try{h.focus()}catch{}return new ov(h)}function Tx(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="__/auth/handler",Ex="emulator/auth/handler",kx=encodeURIComponent("fac");async function av(t,e,n,r,s,i){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:so,eventId:s};if(e instanceof a1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",TI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries({}))o[c]=h}if(e instanceof Ya){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${kx}=${encodeURIComponent(l)}`:"";return`${Cx(t)}?${Ka(a).slice(1)}${u}`}function Cx({config:t}){return t.emulator?sm(t,Ex):`https://${t.authDomain}/${Sx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="webStorageSupport";class Ix{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=f1,this._completeRedirectFn=XN,this._overrideRedirectResult=GN}async _openPopup(e,n,r,s){var i;fr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await av(e,n,r,If(),s);return wx(e,o,um())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await av(e,n,r,If(),s);return xN(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(fr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await px(e),r=new JN(e);return n.register("authEvent",s=>(K(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(md,{type:md},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[md];o!==void 0&&n(!!o),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return e1()||om()||jc()}}const Ax=Ix;var lv="@firebase/auth",uv="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Ox(t){$i(new Ds("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:t1(t)},u=new sN(r,s,i,l);return oN(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),$i(new Ds("auth-internal",e=>{const n=ao(e.getProvider("auth").getImmediate());return(r=>new Nx(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gr(lv,uv,xx(t)),Gr(lv,uv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=5*60,Dx=Mw("authIdTokenMaxAge")||Rx;let cv=null;const Px=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Dx)return;const s=n==null?void 0:n.token;cv!==s&&(cv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Mx(t=Vw()){const e=tm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=iN(t,{popupRedirectResolver:Ax,persistence:[VN,IN,f1]}),r=Mw("authTokenSyncURL");if(r){const i=Px(r);SN(n,i,()=>i(n.currentUser)),TN(n,o=>i(o))}const s=Dw("auth");return s&&aN(n,`http://${s}`),n}Ox("Browser");var bx="firebase",Lx="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gr(bx,Lx,"app");var Fx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},b,hm=hm||{},Q=Fx||self;function Wc(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function qc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Vx(t){return Object.prototype.hasOwnProperty.call(t,gd)&&t[gd]||(t[gd]=++$x)}var gd="closure_uid_"+(1e9*Math.random()>>>0),$x=0;function Ux(t,e,n){return t.call.apply(t.bind,arguments)}function jx(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Et(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Et=Ux:Et=jx,Et.apply(null,arguments)}function Ul(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function at(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function is(){this.s=this.s,this.o=this.o}var Bx=0;is.prototype.s=!1;is.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Bx!=0)&&Vx(this)};is.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const w1=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function dm(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function hv(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Wc(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function kt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}kt.prototype.h=function(){this.defaultPrevented=!0};var zx=function(){if(!Q.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Q.addEventListener("test",()=>{},e),Q.removeEventListener("test",()=>{},e)}catch{}return t}();function Ea(t){return/^[\s\xa0]*$/.test(t)}function Hc(){var t=Q.navigator;return t&&(t=t.userAgent)?t:""}function Vn(t){return Hc().indexOf(t)!=-1}function fm(t){return fm[" "](t),t}fm[" "]=function(){};function Wx(t,e){var n=FO;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var qx=Vn("Opera"),Ui=Vn("Trident")||Vn("MSIE"),T1=Vn("Edge"),Nf=T1||Ui,S1=Vn("Gecko")&&!(Hc().toLowerCase().indexOf("webkit")!=-1&&!Vn("Edge"))&&!(Vn("Trident")||Vn("MSIE"))&&!Vn("Edge"),Hx=Hc().toLowerCase().indexOf("webkit")!=-1&&!Vn("Edge");function E1(){var t=Q.document;return t?t.documentMode:void 0}var xf;e:{var yd="",vd=function(){var t=Hc();if(S1)return/rv:([^\);]+)(\)|;)/.exec(t);if(T1)return/Edge\/([\d\.]+)/.exec(t);if(Ui)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Hx)return/WebKit\/(\S+)/.exec(t);if(qx)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(vd&&(yd=vd?vd[1]:""),Ui){var _d=E1();if(_d!=null&&_d>parseFloat(yd)){xf=String(_d);break e}}xf=yd}var Of;if(Q.document&&Ui){var dv=E1();Of=dv||parseInt(xf,10)||void 0}else Of=void 0;var Gx=Of;function ka(t,e){if(kt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(S1){e:{try{fm(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Kx[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ka.$.h.call(this)}}at(ka,kt);var Kx={2:"touch",3:"pen",4:"mouse"};ka.prototype.h=function(){ka.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Gc="closure_listenable_"+(1e6*Math.random()|0),Qx=0;function Xx(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++Qx,this.fa=this.ia=!1}function Kc(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function pm(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Yx(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function k1(t){const e={};for(const n in t)e[n]=t[n];return e}const fv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C1(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<fv.length;i++)n=fv[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Qc(t){this.src=t,this.g={},this.h=0}Qc.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Df(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Xx(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function Rf(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=w1(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Kc(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Df(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var mm="closure_lm_"+(1e6*Math.random()|0),wd={};function I1(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)I1(t,e[i],n,r,s);return null}return n=x1(n),t&&t[Gc]?t.O(e,n,qc(r)?!!r.capture:!!r,s):Jx(t,e,n,!1,r,s)}function Jx(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=qc(s)?!!s.capture:!!s,a=ym(t);if(a||(t[mm]=a=new Qc(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=Zx(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)zx||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(N1(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Zx(){function t(n){return e.call(t.src,t.listener,n)}const e=eO;return t}function A1(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)A1(t,e[i],n,r,s);else r=qc(r)?!!r.capture:!!r,n=x1(n),t&&t[Gc]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Df(i,n,r,s),-1<n&&(Kc(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=ym(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Df(e,n,r,s)),(n=-1<t?e[t]:null)&&gm(n))}function gm(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Gc])Rf(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(N1(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ym(e))?(Rf(n,t),n.h==0&&(n.src=null,e[mm]=null)):Kc(t)}}}function N1(t){return t in wd?wd[t]:wd[t]="on"+t}function eO(t,e){if(t.fa)t=!0;else{e=new ka(e,this);var n=t.listener,r=t.la||t.src;t.ia&&gm(t),t=n.call(r,e)}return t}function ym(t){return t=t[mm],t instanceof Qc?t:null}var Td="__closure_events_fn_"+(1e9*Math.random()>>>0);function x1(t){return typeof t=="function"?t:(t[Td]||(t[Td]=function(e){return t.handleEvent(e)}),t[Td])}function st(){is.call(this),this.i=new Qc(this),this.S=this,this.J=null}at(st,is);st.prototype[Gc]=!0;st.prototype.removeEventListener=function(t,e,n,r){A1(this,t,e,n,r)};function ft(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new kt(e,t);else if(e instanceof kt)e.target=e.target||t;else{var s=e;e=new kt(r,t),C1(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=jl(o,r,!0,e)&&s}if(o=e.g=t,s=jl(o,r,!0,e)&&s,s=jl(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=jl(o,r,!1,e)&&s}st.prototype.N=function(){if(st.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Kc(n[r]);delete t.g[e],t.h--}}this.J=null};st.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};st.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function jl(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Rf(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var vm=Q.JSON.stringify;class tO{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function nO(){var t=_m;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class rO{constructor(){this.h=this.g=null}add(e,n){const r=O1.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var O1=new tO(()=>new sO,t=>t.reset());class sO{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function iO(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function oO(t){Q.setTimeout(()=>{throw t},0)}let Ca,Ia=!1,_m=new rO,R1=()=>{const t=Q.Promise.resolve(void 0);Ca=()=>{t.then(aO)}};var aO=()=>{for(var t;t=nO();){try{t.h.call(t.g)}catch(n){oO(n)}var e=O1;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ia=!1};function Xc(t,e){st.call(this),this.h=t||1,this.g=e||Q,this.j=Et(this.qb,this),this.l=Date.now()}at(Xc,st);b=Xc.prototype;b.ga=!1;b.T=null;b.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ft(this,"tick"),this.ga&&(wm(this),this.start()))}};b.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function wm(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}b.N=function(){Xc.$.N.call(this),wm(this),delete this.g};function Tm(t,e,n){if(typeof t=="function")n&&(t=Et(t,n));else if(t&&typeof t.handleEvent=="function")t=Et(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Q.setTimeout(t,e||0)}function D1(t){t.g=Tm(()=>{t.g=null,t.i&&(t.i=!1,D1(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class lO extends is{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:D1(this)}N(){super.N(),this.g&&(Q.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Aa(t){is.call(this),this.h=t,this.g={}}at(Aa,is);var pv=[];function P1(t,e,n,r){Array.isArray(n)||(n&&(pv[0]=n.toString()),n=pv);for(var s=0;s<n.length;s++){var i=I1(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function M1(t){pm(t.g,function(e,n){this.g.hasOwnProperty(n)&&gm(e)},t),t.g={}}Aa.prototype.N=function(){Aa.$.N.call(this),M1(this)};Aa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Yc(){this.g=!0}Yc.prototype.Ea=function(){this.g=!1};function uO(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function cO(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function pi(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+dO(t,n)+(r?" "+r:"")})}function hO(t,e){t.info(function(){return"TIMEOUT: "+e})}Yc.prototype.info=function(){};function dO(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return vm(n)}catch{return e}}var Ws={},mv=null;function Jc(){return mv=mv||new st}Ws.Ta="serverreachability";function b1(t){kt.call(this,Ws.Ta,t)}at(b1,kt);function Na(t){const e=Jc();ft(e,new b1(e))}Ws.STAT_EVENT="statevent";function L1(t,e){kt.call(this,Ws.STAT_EVENT,t),this.stat=e}at(L1,kt);function Rt(t){const e=Jc();ft(e,new L1(e,t))}Ws.Ua="timingevent";function F1(t,e){kt.call(this,Ws.Ua,t),this.size=e}at(F1,kt);function Za(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Q.setTimeout(function(){t()},e)}var Zc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},V1={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Sm(){}Sm.prototype.h=null;function gv(t){return t.h||(t.h=t.i())}function $1(){}var el={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Em(){kt.call(this,"d")}at(Em,kt);function km(){kt.call(this,"c")}at(km,kt);var Pf;function eh(){}at(eh,Sm);eh.prototype.g=function(){return new XMLHttpRequest};eh.prototype.i=function(){return{}};Pf=new eh;function tl(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Aa(this),this.P=fO,t=Nf?125:void 0,this.V=new Xc(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new U1}function U1(){this.i=null,this.g="",this.h=!1}var fO=45e3,Mf={},Ju={};b=tl.prototype;b.setTimeout=function(t){this.P=t};function bf(t,e,n){t.L=1,t.v=nh(pr(e)),t.s=n,t.S=!0,j1(t,null)}function j1(t,e){t.G=Date.now(),nl(t),t.A=pr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),Q1(n.i,"t",r),t.C=0,n=t.l.J,t.h=new U1,t.g=gT(t.l,n?e:null,!t.s),0<t.O&&(t.M=new lO(Et(t.Pa,t,t.g),t.O)),P1(t.U,t.g,"readystatechange",t.nb),e=t.I?k1(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Na(),uO(t.j,t.u,t.A,t.m,t.W,t.s)}b.nb=function(t){t=t.target;const e=this.M;e&&$n(t)==3?e.l():this.Pa(t)};b.Pa=function(t){try{if(t==this.g)e:{const c=$n(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>c)&&(c!=3||Nf||this.g&&(this.h.h||this.g.ja()||wv(this.g)))){this.J||c!=4||e==7||(e==8||0>=h?Na(3):Na(2)),th(this);var n=this.g.da();this.ca=n;t:if(B1(this)){var r=wv(this.g);t="";var s=r.length,i=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vs(this),Xo(this);var o="";break t}this.h.i=new Q.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,cO(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ea(a)){var u=a;break t}}u=null}if(n=u)pi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lf(this,n);else{this.i=!1,this.o=3,Rt(12),vs(this),Xo(this);break e}}this.S?(z1(this,c,o),Nf&&this.i&&c==3&&(P1(this.U,this.V,"tick",this.mb),this.V.start())):(pi(this.j,this.m,o,null),Lf(this,o)),c==4&&vs(this),this.i&&!this.J&&(c==4?dT(this.l,this):(this.i=!1,nl(this)))}else MO(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Rt(12)):(this.o=0,Rt(13)),vs(this),Xo(this)}}}catch{}finally{}};function B1(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function z1(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=pO(t,n),s==Ju){e==4&&(t.o=4,Rt(14),r=!1),pi(t.j,t.m,null,"[Incomplete Response]");break}else if(s==Mf){t.o=4,Rt(15),pi(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else pi(t.j,t.m,s,null),Lf(t,s);B1(t)&&s!=Ju&&s!=Mf&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Rt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Om(e),e.M=!0,Rt(11))):(pi(t.j,t.m,n,"[Invalid Chunked Response]"),vs(t),Xo(t))}b.mb=function(){if(this.g){var t=$n(this.g),e=this.g.ja();this.C<e.length&&(th(this),z1(this,t,e),this.i&&t!=4&&nl(this))}};function pO(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Ju:(n=Number(e.substring(n,r)),isNaN(n)?Mf:(r+=1,r+n>e.length?Ju:(e=e.slice(r,r+n),t.C=r+n,e)))}b.cancel=function(){this.J=!0,vs(this)};function nl(t){t.Y=Date.now()+t.P,W1(t,t.P)}function W1(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Za(Et(t.lb,t),e)}function th(t){t.B&&(Q.clearTimeout(t.B),t.B=null)}b.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(hO(this.j,this.A),this.L!=2&&(Na(),Rt(17)),vs(this),this.o=2,Xo(this)):W1(this,this.Y-t)};function Xo(t){t.l.H==0||t.J||dT(t.l,t)}function vs(t){th(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,wm(t.V),M1(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Lf(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Ff(n.i,t))){if(!t.K&&Ff(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)tc(n),ih(n);else break e;xm(n),Rt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=Za(Et(n.ib,n),6e3));if(1>=J1(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else _s(n,11)}else if((t.K||n.g==t)&&tc(n),!Ea(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=t.g;if(p){const m=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var i=r.i;i.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Cm(i,i.h),i.h=null))}if(r.F){const y=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.Da=y,we(r.I,r.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=mT(r,r.J?r.pa:null,r.Y),o.K){Z1(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(th(a),nl(a)),r.g=o}else cT(r);0<n.j.length&&oh(n)}else u[0]!="stop"&&u[0]!="close"||_s(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?_s(n,7):Nm(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Na(4)}catch{}}function mO(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Wc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function gO(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Wc(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function q1(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Wc(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=gO(t),r=mO(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var H1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yO(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function ks(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ks){this.h=t.h,Zu(this,t.j),this.s=t.s,this.g=t.g,ec(this,t.m),this.l=t.l;var e=t.i,n=new xa;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),yv(this,n),this.o=t.o}else t&&(e=String(t).match(H1))?(this.h=!1,Zu(this,e[1]||"",!0),this.s=Vo(e[2]||""),this.g=Vo(e[3]||"",!0),ec(this,e[4]),this.l=Vo(e[5]||"",!0),yv(this,e[6]||"",!0),this.o=Vo(e[7]||"")):(this.h=!1,this.i=new xa(null,this.h))}ks.prototype.toString=function(){var t=[],e=this.j;e&&t.push($o(e,vv,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push($o(e,vv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push($o(n,n.charAt(0)=="/"?wO:_O,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",$o(n,SO)),t.join("")};function pr(t){return new ks(t)}function Zu(t,e,n){t.j=n?Vo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ec(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function yv(t,e,n){e instanceof xa?(t.i=e,EO(t.i,t.h)):(n||(e=$o(e,TO)),t.i=new xa(e,t.h))}function we(t,e,n){t.i.set(e,n)}function nh(t){return we(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Vo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function $o(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,vO),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function vO(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var vv=/[#\/\?@]/g,_O=/[#\?:]/g,wO=/[#\?]/g,TO=/[#\?@]/g,SO=/#/g;function xa(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function os(t){t.g||(t.g=new Map,t.h=0,t.i&&yO(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}b=xa.prototype;b.add=function(t,e){os(this),this.i=null,t=uo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function G1(t,e){os(t),e=uo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function K1(t,e){return os(t),e=uo(t,e),t.g.has(e)}b.forEach=function(t,e){os(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};b.ta=function(){os(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};b.Z=function(t){os(this);let e=[];if(typeof t=="string")K1(this,t)&&(e=e.concat(this.g.get(uo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};b.set=function(t,e){return os(this),this.i=null,t=uo(this,t),K1(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};b.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Q1(t,e,n){G1(t,e),0<n.length&&(t.i=null,t.g.set(uo(t,e),dm(n)),t.h+=n.length)}b.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function uo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function EO(t,e){e&&!t.j&&(os(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(G1(this,r),Q1(this,s,n))},t)),t.j=e}var kO=class{constructor(t,e){this.g=t,this.map=e}};function X1(t){this.l=t||CO,Q.PerformanceNavigationTiming?(t=Q.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Q.g&&Q.g.Ka&&Q.g.Ka()&&Q.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var CO=10;function Y1(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function J1(t){return t.h?1:t.g?t.g.size:0}function Ff(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Cm(t,e){t.g?t.g.add(e):t.h=e}function Z1(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}X1.prototype.cancel=function(){if(this.i=eT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function eT(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return dm(t.i)}var IO=class{stringify(t){return Q.JSON.stringify(t,void 0)}parse(t){return Q.JSON.parse(t,void 0)}};function AO(){this.g=new IO}function NO(t,e,n){const r=n||"";try{q1(t,function(s,i){let o=s;qc(s)&&(o=vm(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function xO(t,e){const n=new Yc;if(Q.Image){const r=new Image;r.onload=Ul(Bl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ul(Bl,n,r,"TestLoadImage: error",!1,e),r.onabort=Ul(Bl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ul(Bl,n,r,"TestLoadImage: timeout",!1,e),Q.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Bl(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function rl(t){this.l=t.fc||null,this.j=t.ob||!1}at(rl,Sm);rl.prototype.g=function(){return new rh(this.l,this.j)};rl.prototype.i=function(t){return function(){return t}}({});function rh(t,e){st.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Im,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}at(rh,st);var Im=0;b=rh.prototype;b.open=function(t,e){if(this.readyState!=Im)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Oa(this)};b.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Q).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};b.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sl(this)),this.readyState=Im};b.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Oa(this)),this.g&&(this.readyState=3,Oa(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Q.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tT(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function tT(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}b.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?sl(this):Oa(this),this.readyState==3&&tT(this)}};b.Za=function(t){this.g&&(this.response=this.responseText=t,sl(this))};b.Ya=function(t){this.g&&(this.response=t,sl(this))};b.ka=function(){this.g&&sl(this)};function sl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Oa(t)}b.setRequestHeader=function(t,e){this.v.append(t,e)};b.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};b.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Oa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(rh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var OO=Q.JSON.parse;function be(t){st.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=nT,this.L=this.M=!1}at(be,st);var nT="",RO=/^https?$/i,DO=["POST","PUT"];b=be.prototype;b.Oa=function(t){this.M=t};b.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Pf.g(),this.C=this.u?gv(this.u):gv(Pf),this.g.onreadystatechange=Et(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){_v(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=Q.FormData&&t instanceof Q.FormData,!(0<=w1(DO,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{iT(this),0<this.B&&((this.L=PO(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Et(this.ua,this)):this.A=Tm(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){_v(this,i)}};function PO(t){return Ui&&typeof t.timeout=="number"&&t.ontimeout!==void 0}b.ua=function(){typeof hm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ft(this,"timeout"),this.abort(8))};function _v(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,rT(t),sh(t)}function rT(t){t.F||(t.F=!0,ft(t,"complete"),ft(t,"error"))}b.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ft(this,"complete"),ft(this,"abort"),sh(this))};b.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sh(this,!0)),be.$.N.call(this)};b.La=function(){this.s||(this.G||this.v||this.l?sT(this):this.kb())};b.kb=function(){sT(this)};function sT(t){if(t.h&&typeof hm<"u"&&(!t.C[1]||$n(t)!=4||t.da()!=2)){if(t.v&&$n(t)==4)Tm(t.La,0,t);else if(ft(t,"readystatechange"),$n(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(H1)[1]||null;!s&&Q.self&&Q.self.location&&(s=Q.self.location.protocol.slice(0,-1)),r=!RO.test(s?s.toLowerCase():"")}n=r}if(n)ft(t,"complete"),ft(t,"success");else{t.m=6;try{var i=2<$n(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",rT(t)}}finally{sh(t)}}}}function sh(t,e){if(t.g){iT(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||ft(t,"ready");try{n.onreadystatechange=r}catch{}}}function iT(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Q.clearTimeout(t.A),t.A=null)}b.isActive=function(){return!!this.g};function $n(t){return t.g?t.g.readyState:0}b.da=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}};b.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};b.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),OO(e)}};function wv(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case nT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function MO(t){const e={};t=(t.g&&2<=$n(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ea(t[r]))continue;var n=iO(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}Yx(e,function(r){return r.join(", ")})}b.Ia=function(){return this.m};b.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function oT(t){let e="";return pm(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Am(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=oT(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):we(t,e,n))}function Oo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function aT(t){this.Ga=0,this.j=[],this.l=new Yc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Oo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Oo("baseRetryDelayMs",5e3,t),this.hb=Oo("retryDelaySeedMs",1e4,t),this.eb=Oo("forwardChannelMaxRetries",2,t),this.xa=Oo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new X1(t&&t.concurrentRequestLimit),this.Ja=new AO,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}b=aT.prototype;b.ra=8;b.H=1;function Nm(t){if(lT(t),t.H==3){var e=t.W++,n=pr(t.I);if(we(n,"SID",t.K),we(n,"RID",e),we(n,"TYPE","terminate"),il(t,n),e=new tl(t,t.l,e),e.L=2,e.v=nh(pr(n)),n=!1,Q.navigator&&Q.navigator.sendBeacon)try{n=Q.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Q.Image&&(new Image().src=e.v,n=!0),n||(e.g=gT(e.l,null),e.g.ha(e.v)),e.G=Date.now(),nl(e)}pT(t)}function ih(t){t.g&&(Om(t),t.g.cancel(),t.g=null)}function lT(t){ih(t),t.u&&(Q.clearTimeout(t.u),t.u=null),tc(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Q.clearTimeout(t.m),t.m=null)}function oh(t){if(!Y1(t.i)&&!t.m){t.m=!0;var e=t.Na;Ca||R1(),Ia||(Ca(),Ia=!0),_m.add(e,t),t.C=0}}function bO(t,e){return J1(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Za(Et(t.Na,t,e),fT(t,t.C)),t.C++,!0)}b.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new tl(this,this.l,t);let i=this.s;if(this.U&&(i?(i=k1(i),C1(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=uT(this,s,e),n=pr(this.I),we(n,"RID",t),we(n,"CVER",22),this.F&&we(n,"X-HTTP-Session-Id",this.F),il(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(oT(i)))+"&"+e:this.o&&Am(n,this.o,i)),Cm(this.i,s),this.bb&&we(n,"TYPE","init"),this.P?(we(n,"$req",e),we(n,"SID","null"),s.aa=!0,bf(s,n,null)):bf(s,n,e),this.H=2}}else this.H==3&&(t?Tv(this,t):this.j.length==0||Y1(this.i)||Tv(this))};function Tv(t,e){var n;e?n=e.m:n=t.W++;const r=pr(t.I);we(r,"SID",t.K),we(r,"RID",n),we(r,"AID",t.V),il(t,r),t.o&&t.s&&Am(r,t.o,t.s),n=new tl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=uT(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Cm(t.i,n),bf(n,r,e)}function il(t,e){t.na&&pm(t.na,function(n,r){we(e,r,n)}),t.h&&q1({},function(n,r){we(e,r,n)})}function uT(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Et(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let u=s[l].g;const c=s[l].map;if(u-=i,0>u)i=Math.max(0,s[l].g-100),a=!1;else try{NO(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function cT(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ca||R1(),Ia||(Ca(),Ia=!0),_m.add(e,t),t.A=0}}function xm(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Za(Et(t.Ma,t),fT(t,t.A)),t.A++,!0)}b.Ma=function(){if(this.u=null,hT(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Za(Et(this.jb,this),t)}};b.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Rt(10),ih(this),hT(this))};function Om(t){t.B!=null&&(Q.clearTimeout(t.B),t.B=null)}function hT(t){t.g=new tl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=pr(t.wa);we(e,"RID","rpc"),we(e,"SID",t.K),we(e,"AID",t.V),we(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&we(e,"TO",t.qa),we(e,"TYPE","xmlhttp"),il(t,e),t.o&&t.s&&Am(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=nh(pr(e)),n.s=null,n.S=!0,j1(n,t)}b.ib=function(){this.v!=null&&(this.v=null,ih(this),xm(this),Rt(19))};function tc(t){t.v!=null&&(Q.clearTimeout(t.v),t.v=null)}function dT(t,e){var n=null;if(t.g==e){tc(t),Om(t),t.g=null;var r=2}else if(Ff(t.i,e))n=e.F,Z1(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=Jc(),ft(r,new F1(r,n)),oh(t)}else cT(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&bO(t,e)||r==2&&xm(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:_s(t,5);break;case 4:_s(t,10);break;case 3:_s(t,6);break;default:_s(t,2)}}}function fT(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function _s(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Et(t.pb,t);n||(n=new ks("//www.google.com/images/cleardot.gif"),Q.location&&Q.location.protocol=="http"||Zu(n,"https"),nh(n)),xO(n.toString(),r)}else Rt(2);t.H=0,t.h&&t.h.za(e),pT(t),lT(t)}b.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Rt(2)):(this.l.info("Failed to ping google.com"),Rt(1))};function pT(t){if(t.H=0,t.ma=[],t.h){const e=eT(t.i);(e.length!=0||t.j.length!=0)&&(hv(t.ma,e),hv(t.ma,t.j),t.i.i.length=0,dm(t.j),t.j.length=0),t.h.ya()}}function mT(t,e,n){var r=n instanceof ks?pr(n):new ks(n);if(r.g!="")e&&(r.g=e+"."+r.g),ec(r,r.m);else{var s=Q.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new ks(null);r&&Zu(i,r),e&&(i.g=e),s&&ec(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&we(r,n,e),we(r,"VER",t.ra),il(t,r),r}function gT(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new be(new rl({ob:!0})):new be(t.va),e.Oa(t.J),e}b.isActive=function(){return!!this.h&&this.h.isActive(this)};function yT(){}b=yT.prototype;b.Ba=function(){};b.Aa=function(){};b.za=function(){};b.ya=function(){};b.isActive=function(){return!0};b.Va=function(){};function nc(){if(Ui&&!(10<=Number(Gx)))throw Error("Environmental error: no available transport.")}nc.prototype.g=function(t,e){return new Zt(t,e)};function Zt(t,e){st.call(this),this.g=new aT(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ea(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ea(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new co(this)}at(Zt,st);Zt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Rt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=mT(t,null,t.Y),oh(t)};Zt.prototype.close=function(){Nm(this.g)};Zt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=vm(t),t=n);e.j.push(new kO(e.fb++,t)),e.H==3&&oh(e)};Zt.prototype.N=function(){this.g.h=null,delete this.j,Nm(this.g),delete this.g,Zt.$.N.call(this)};function vT(t){Em.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}at(vT,Em);function _T(){km.call(this),this.status=1}at(_T,km);function co(t){this.g=t}at(co,yT);co.prototype.Ba=function(){ft(this.g,"a")};co.prototype.Aa=function(t){ft(this.g,new vT(t))};co.prototype.za=function(t){ft(this.g,new _T)};co.prototype.ya=function(){ft(this.g,"b")};function LO(){this.blockSize=-1}function qn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}at(qn,LO);qn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Sd(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}qn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)Sd(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){Sd(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){Sd(this,r),s=0;break}}this.h=s,this.i+=e};qn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function de(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var FO={};function Rm(t){return-128<=t&&128>t?Wx(t,function(e){return new de([e|0],0>e?-1:0)}):new de([t|0],0>t?-1:0)}function Un(t){if(isNaN(t)||!isFinite(t))return Ai;if(0>t)return ht(Un(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Vf;return new de(e,0)}function wT(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return ht(wT(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Un(Math.pow(e,8)),r=Ai,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=Un(Math.pow(e,i)),r=r.R(i).add(Un(o))):(r=r.R(n),r=r.add(Un(o)))}return r}var Vf=4294967296,Ai=Rm(0),$f=Rm(1),Sv=Rm(16777216);b=de.prototype;b.ea=function(){if(an(this))return-ht(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Vf+r)*e,e*=Vf}return t};b.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(sr(this))return"0";if(an(this))return"-"+ht(this).toString(t);for(var e=Un(Math.pow(t,6)),n=this,r="";;){var s=sc(n,e).g;n=rc(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,sr(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};b.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function sr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function an(t){return t.h==-1}b.X=function(t){return t=rc(this,t),an(t)?-1:sr(t)?0:1};function ht(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new de(n,~t.h).add($f)}b.abs=function(){return an(this)?ht(this):this};b.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new de(n,n[n.length-1]&-2147483648?-1:0)};function rc(t,e){return t.add(ht(e))}b.R=function(t){if(sr(this)||sr(t))return Ai;if(an(this))return an(t)?ht(this).R(ht(t)):ht(ht(this).R(t));if(an(t))return ht(this.R(ht(t)));if(0>this.X(Sv)&&0>t.X(Sv))return Un(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,zl(n,2*r+2*s),n[2*r+2*s+1]+=i*l,zl(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,zl(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,zl(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new de(n,0)};function zl(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ro(t,e){this.g=t,this.h=e}function sc(t,e){if(sr(e))throw Error("division by zero");if(sr(t))return new Ro(Ai,Ai);if(an(t))return e=sc(ht(t),e),new Ro(ht(e.g),ht(e.h));if(an(e))return e=sc(t,ht(e)),new Ro(ht(e.g),e.h);if(30<t.g.length){if(an(t)||an(e))throw Error("slowDivide_ only works with positive integers.");for(var n=$f,r=e;0>=r.X(t);)n=Ev(n),r=Ev(r);var s=Js(n,1),i=Js(r,1);for(r=Js(r,2),n=Js(n,2);!sr(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Js(r,1),n=Js(n,1)}return e=rc(t,s.R(e)),new Ro(s,e)}for(s=Ai;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Un(n),o=i.R(e);an(o)||0<o.X(t);)n-=r,i=Un(n),o=i.R(e);sr(i)&&(i=$f),s=s.add(i),t=rc(t,o)}return new Ro(s,t)}b.gb=function(t){return sc(this,t).h};b.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new de(n,this.h&t.h)};b.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new de(n,this.h|t.h)};b.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new de(n,this.h^t.h)};function Ev(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new de(n,t.h)}function Js(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new de(s,t.h)}nc.prototype.createWebChannel=nc.prototype.g;Zt.prototype.send=Zt.prototype.u;Zt.prototype.open=Zt.prototype.m;Zt.prototype.close=Zt.prototype.close;Zc.NO_ERROR=0;Zc.TIMEOUT=8;Zc.HTTP_ERROR=6;V1.COMPLETE="complete";$1.EventType=el;el.OPEN="a";el.CLOSE="b";el.ERROR="c";el.MESSAGE="d";st.prototype.listen=st.prototype.O;be.prototype.listenOnce=be.prototype.P;be.prototype.getLastError=be.prototype.Sa;be.prototype.getLastErrorCode=be.prototype.Ia;be.prototype.getStatus=be.prototype.da;be.prototype.getResponseJson=be.prototype.Wa;be.prototype.getResponseText=be.prototype.ja;be.prototype.send=be.prototype.ha;be.prototype.setWithCredentials=be.prototype.Oa;qn.prototype.digest=qn.prototype.l;qn.prototype.reset=qn.prototype.reset;qn.prototype.update=qn.prototype.j;de.prototype.add=de.prototype.add;de.prototype.multiply=de.prototype.R;de.prototype.modulo=de.prototype.gb;de.prototype.compare=de.prototype.X;de.prototype.toNumber=de.prototype.ea;de.prototype.toString=de.prototype.toString;de.prototype.getBits=de.prototype.D;de.fromNumber=Un;de.fromString=wT;var VO=function(){return new nc},$O=function(){return Jc()},Ed=Zc,UO=V1,jO=Ws,kv={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},BO=rl,Wl=$1,zO=be,WO=de;const Cv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new Zp("@firebase/firestore");function Iv(){return Ls.logLevel}function q(t,...e){if(Ls.logLevel<=ue.DEBUG){const n=e.map(Dm);Ls.debug(`Firestore (${ho}): ${t}`,...n)}}function Fs(t,...e){if(Ls.logLevel<=ue.ERROR){const n=e.map(Dm);Ls.error(`Firestore (${ho}): ${t}`,...n)}}function ic(t,...e){if(Ls.logLevel<=ue.WARN){const n=e.map(Dm);Ls.warn(`Firestore (${ho}): ${t}`,...n)}}function Dm(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: `+t;throw Fs(e),new Error(e)}function it(t,e){t||ie()}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends vr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class HO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class GO{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Cs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Cs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Cs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string"),new TT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string"),new _t(e)}}class KO{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class QO{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new KO(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YO{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.T;return this.T=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.I.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.I.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(it(typeof n.token=="string"),this.T=n.token,new XO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=JO(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function ji(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new nt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new nt(0,0))}static max(){return new Ae(new nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ra.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ra?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ze extends Ra{construct(e,n,r){return new ze(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ze(n)}static emptyPath(){return new ze([])}}const ZO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends Ra{construct(e,n,r){return new St(e,n,r)}static isValidIdentifier(e){return ZO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new St(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new X(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new X(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new X(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(ze.fromString(e))}static fromName(e){return new te(ze.fromString(e).popFirst(5))}static empty(){return new te(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new ze(e.slice()))}}function eR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ae.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new Yr(s,te.empty(),e)}function tR(t){return new Yr(t.readTime,t.key,-1)}class Yr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yr(Ae.min(),te.empty(),-1)}static max(){return new Yr(Ae.max(),te.empty(),-1)}}function nR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ET(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==rR)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new P((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):P.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):P.reject(n)}static resolve(e){return new P((n,r)=>{n(e)})}static reject(e){return new P((n,r)=>{r(e)})}static waitFor(e){return new P((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=P.resolve(!1);for(const r of e)n=n.next(s=>s?P.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new P((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===i&&r(o)},c=>s(c))}})}static doWhile(e,n){return new P((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function ah(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>n.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}kT.ct=-1;function Pm(t){return t==null}function oc(t){return t===0&&1/t==-1/0}function iR(t){return typeof t=="number"&&Number.isInteger(t)&&!oc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ol(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n){this.comparator=e,this.root=n||ut.EMPTY}insert(e,n){return new qt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ql(this.root,e,this.comparator,!0)}}class ql{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ut.RED,this.left=s??ut.EMPTY,this.right=i??ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ut(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ut.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(t,e,n,r,s){return this}insert(t,e,n){return new ut(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nv(this.data.getIterator())}getIteratorFrom(e){return new Nv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Mt(this.comparator);return n.data=e,n}}class Nv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new Sn([])}unionWith(e){let n=new Mt(St.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ji(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new oR("Invalid base64 string: "+s):s}}(e);return new mr(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new mr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mr.EMPTY_BYTE_STRING=new mr("");const aR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(t){if(it(!!t),typeof t=="string"){let e=0;const n=aR.exec(t);if(it(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ct(t.seconds),nanos:ct(t.nanos)}}function ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Da(t){return typeof t=="string"?mr.fromBase64String(t):mr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function IT(t){const e=t.mapValue.fields.__previous_value__;return Mm(e)?IT(e):e}function ac(t){const e=Vs(t.mapValue.fields.__local_write_time__.timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,r,s,i,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class lc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new lc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof lc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Bi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mm(t)?4:uR(t)?9007199254740991:10:ie()}function Hn(t,e){if(t===e)return!0;const n=Bi(t);if(n!==Bi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ac(t).isEqual(ac(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=Vs(r.timestampValue),o=Vs(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Da(r.bytesValue).isEqual(Da(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return ct(r.geoPointValue.latitude)===ct(s.geoPointValue.latitude)&&ct(r.geoPointValue.longitude)===ct(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ct(r.integerValue)===ct(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=ct(r.doubleValue),o=ct(s.doubleValue);return i===o?oc(i)===oc(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return ji(t.arrayValue.values||[],e.arrayValue.values||[],Hn);case 10:return function(r,s){const i=r.mapValue.fields||{},o=s.mapValue.fields||{};if(Av(i)!==Av(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!Hn(i[a],o[a])))return!1;return!0}(t,e);default:return ie()}}function Pa(t,e){return(t.values||[]).find(n=>Hn(n,e))!==void 0}function zi(t,e){if(t===e)return 0;const n=Bi(t),r=Bi(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=ct(s.integerValue||s.doubleValue),a=ct(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return xv(t.timestampValue,e.timestampValue);case 4:return xv(ac(t),ac(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Da(s),a=Da(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=me(o[l],a[l]);if(u!==0)return u}return me(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=me(ct(s.latitude),ct(i.latitude));return o!==0?o:me(ct(s.longitude),ct(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const o=s.values||[],a=i.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=zi(o[l],a[l]);if(u)return u}return me(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){if(s===Hl.mapValue&&i===Hl.mapValue)return 0;if(s===Hl.mapValue)return 1;if(i===Hl.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const h=me(a[c],u[c]);if(h!==0)return h;const d=zi(o[a[c]],l[u[c]]);if(d!==0)return d}return me(a.length,u.length)}(t.mapValue,e.mapValue);default:throw ie()}}function xv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=Vs(t),r=Vs(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function Wi(t){return Uf(t)}function Uf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=Vs(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Da(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,te.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=Uf(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of s)o?o=!1:i+=",",i+=`${a}:${Uf(r.fields[a])}`;return i+"}"}(t.mapValue):ie();var e,n}function jf(t){return!!t&&"integerValue"in t}function bm(t){return!!t&&"arrayValue"in t}function mu(t){return!!t&&"mapValue"in t}function Yo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ol(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Yo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!mu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yo(n)}setAll(e){let n=St.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Yo(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());mu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];mu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ol(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Tn(Yo(this.value))}}function AT(t){const e=[];return ol(t.fields,(n,r)=>{const s=new St([n]);if(mu(r)){const i=AT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new _n(e,0,Ae.min(),Ae.min(),Ae.min(),Tn.empty(),0)}static newFoundDocument(e,n,r,s){return new _n(e,1,n,Ae.min(),r,s,0)}static newNoDocument(e,n){return new _n(e,2,n,Ae.min(),Ae.min(),Tn.empty(),0)}static newUnknownDocument(e,n){return new _n(e,3,n,Ae.min(),Ae.min(),Tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n){this.position=e,this.inclusive=n}}function Ov(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=zi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Rv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n="asc"){this.field=e,this.dir=n}}function cR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{}class et extends NT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new dR(e,n,r):n==="array-contains"?new mR(e,r):n==="in"?new gR(e,r):n==="not-in"?new yR(e,r):n==="array-contains-any"?new vR(e,r):new et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fR(e,r):new pR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(zi(n,this.value)):n!==null&&Bi(this.value)===Bi(n)&&this.matchesComparison(zi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Jr extends NT{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new Jr(e,n)}matches(e){return xT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function xT(t){return t.op==="and"}function OT(t){return hR(t)&&xT(t)}function hR(t){for(const e of t.filters)if(e instanceof Jr)return!1;return!0}function Bf(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+Wi(t.value);if(OT(t))return t.filters.map(e=>Bf(e)).join(",");{const e=t.filters.map(n=>Bf(n)).join(",");return`${t.op}(${e})`}}function RT(t,e){return t instanceof et?function(n,r){return r instanceof et&&n.op===r.op&&n.field.isEqual(r.field)&&Hn(n.value,r.value)}(t,e):t instanceof Jr?function(n,r){return r instanceof Jr&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,i,o)=>s&&RT(i,r.filters[o]),!0):!1}(t,e):void ie()}function DT(t){return t instanceof et?function(e){return`${e.field.canonicalString()} ${e.op} ${Wi(e.value)}`}(t):t instanceof Jr?function(e){return e.op.toString()+" {"+e.getFilters().map(DT).join(" ,")+"}"}(t):"Filter"}class dR extends et{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class fR extends et{constructor(e,n){super(e,"in",n),this.keys=PT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class pR extends et{constructor(e,n){super(e,"not-in",n),this.keys=PT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function PT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class mR extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bm(n)&&Pa(n.arrayValue,this.value)}}class gR extends et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pa(this.value.arrayValue,n)}}class yR extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Pa(this.value.arrayValue,n)}}class vR extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Pa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.dt=null}}function Dv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new _R(t,e,n,r,s,i,o)}function Lm(t){const e=Ee(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Bf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Pm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Wi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Wi(r)).join(",")),e.dt=n}return e.dt}function Fm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Rv(t.startAt,e.startAt)&&Rv(t.endAt,e.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null,this.startAt,this.endAt}}function wR(t,e,n,r,s,i,o,a){return new lh(t,e,n,r,s,i,o,a)}function TR(t){return new lh(t)}function Pv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function SR(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ER(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function kR(t){return t.collectionGroup!==null}function Ni(t){const e=Ee(t);if(e.wt===null){e.wt=[];const n=ER(e),r=SR(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new Jo(n)),e.wt.push(new Jo(St.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.wt.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Jo(St.keyField(),i))}}}return e.wt}function qi(t){const e=Ee(t);if(!e._t)if(e.limitType==="F")e._t=Dv(e.path,e.collectionGroup,Ni(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of Ni(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new Jo(i.field,o))}const r=e.endAt?new uc(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new uc(e.startAt.position,e.startAt.inclusive):null;e._t=Dv(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e._t}function zf(t,e,n){return new lh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function MT(t,e){return Fm(qi(t),qi(e))&&t.limitType===e.limitType}function bT(t){return`${Lm(qi(t))}|lt:${t.limitType}`}function Mv(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>DT(r)).join(", ")}]`),Pm(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Wi(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Wi(r)).join(",")),`Target(${n})`}(qi(t))}; limitType=${t.limitType})`}function Vm(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):te.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of Ni(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,o){const a=Ov(s,i,o);return s.inclusive?a<=0:a<0}(n.startAt,Ni(n),r)||n.endAt&&!function(s,i,o){const a=Ov(s,i,o);return s.inclusive?a>=0:a>0}(n.endAt,Ni(n),r))}(t,e)}function CR(t){return(e,n)=>{let r=!1;for(const s of Ni(t)){const i=IR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function IR(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),l=o.data.field(s);return a!==null&&l!==null?zi(a,l):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ol(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return CT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=new qt(te.comparator);function cc(){return AR}const LT=new qt(te.comparator);function Gl(...t){let e=LT;for(const n of t)e=e.insert(n.key,n);return e}function FT(t){let e=LT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ws(){return Zo()}function VT(){return Zo()}function Zo(){return new fo(t=>t.toString(),(t,e)=>t.isEqual(e))}const NR=new qt(te.comparator),xR=new Mt(te.comparator);function Tt(...t){let e=xR;for(const n of t)e=e.add(n);return e}const OR=new Mt(me);function RR(){return OR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oc(e)?"-0":e}}function UT(t){return{integerValue:""+t}}function DR(t,e){return iR(e)?UT(e):$T(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(){this._=void 0}}function PR(t,e,n){return t instanceof hc?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Mm(s)&&(s=IT(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof Ma?BT(t,e):t instanceof ba?zT(t,e):function(r,s){const i=jT(r,s),o=bv(i)+bv(r.gt);return jf(i)&&jf(r.gt)?UT(o):$T(r.serializer,o)}(t,e)}function MR(t,e,n){return t instanceof Ma?BT(t,e):t instanceof ba?zT(t,e):n}function jT(t,e){return t instanceof dc?jf(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class hc extends uh{}class Ma extends uh{constructor(e){super(),this.elements=e}}function BT(t,e){const n=WT(e);for(const r of t.elements)n.some(s=>Hn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ba extends uh{constructor(e){super(),this.elements=e}}function zT(t,e){let n=WT(e);for(const r of t.elements)n=n.filter(s=>!Hn(s,r));return{arrayValue:{values:n}}}class dc extends uh{constructor(e,n){super(),this.serializer=e,this.gt=n}}function bv(t){return ct(t.integerValue||t.doubleValue)}function WT(t){return bm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function bR(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Ma&&r instanceof Ma||n instanceof ba&&r instanceof ba?ji(n.elements,r.elements,Hn):n instanceof dc&&r instanceof dc?Hn(n.gt,r.gt):n instanceof hc&&r instanceof hc}(t.transform,e.transform)}class LR{constructor(e,n){this.version=e,this.transformResults=n}}class or{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ch{}function qT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new GT(t.key,or.none()):new al(t.key,t.data,or.none());{const n=t.data,r=Tn.empty();let s=new Mt(St.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new qs(t.key,r,new Sn(s.toArray()),or.none())}}function FR(t,e,n){t instanceof al?function(r,s,i){const o=r.value.clone(),a=Fv(r.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof qs?function(r,s,i){if(!gu(r.precondition,s))return void s.convertToUnknownDocument(i.version);const o=Fv(r.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(HT(r)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function ea(t,e,n,r){return t instanceof al?function(s,i,o,a){if(!gu(s.precondition,i))return o;const l=s.value.clone(),u=Vv(s.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof qs?function(s,i,o,a){if(!gu(s.precondition,i))return o;const l=Vv(s.fieldTransforms,a,i),u=i.data;return u.setAll(HT(s)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(s,i,o){return gu(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function VR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=jT(r.transform,s||null);i!=null&&(n===null&&(n=Tn.empty()),n.set(r.field,i))}return n||null}function Lv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&ji(n,r,(s,i)=>bR(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class al extends ch{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qs extends ch{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function HT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Fv(t,e,n){const r=new Map;it(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,MR(o,a,n[s]))}return r}function Vv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,PR(i,o,e))}return r}class GT extends ch{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $R extends ch{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&FR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ea(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ea(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=VT();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=qT(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Tt())}isEqual(e){return this.batchId===e.batchId&&ji(this.mutations,e.mutations,(n,r)=>Lv(n,r))&&ji(this.baseMutations,e.baseMutations,(n,r)=>Lv(n,r))}}class $m{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){it(e.mutations.length===r.length);let s=NR;const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new $m(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,oe;function BR(t){switch(t){default:return ie();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function zR(t){if(t===void 0)return Fs("GRPC error has no .code"),D.UNKNOWN;switch(t){case je.OK:return D.OK;case je.CANCELLED:return D.CANCELLED;case je.UNKNOWN:return D.UNKNOWN;case je.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case je.INTERNAL:return D.INTERNAL;case je.UNAVAILABLE:return D.UNAVAILABLE;case je.UNAUTHENTICATED:return D.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case je.NOT_FOUND:return D.NOT_FOUND;case je.ALREADY_EXISTS:return D.ALREADY_EXISTS;case je.PERMISSION_DENIED:return D.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case je.ABORTED:return D.ABORTED;case je.OUT_OF_RANGE:return D.OUT_OF_RANGE;case je.UNIMPLEMENTED:return D.UNIMPLEMENTED;case je.DATA_LOSS:return D.DATA_LOSS;default:return ie()}}(oe=je||(je={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new WO([4294967295,4294967295],0);class WR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HR(t,e){return Wf(t,e.toTimestamp())}function xi(t){return it(!!t),Ae.fromTimestamp(function(e){const n=Vs(e);return new nt(n.seconds,n.nanos)}(t))}function KT(t,e){return function(n){return new ze(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function GR(t){const e=ze.fromString(t);return it(tD(e)),e}function qf(t,e){return KT(t.databaseId,e.path)}function KR(t){const e=GR(t);return e.length===4?ze.emptyPath():XR(e)}function QR(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function XR(t){return it(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $v(t,e,n){return{name:qf(t,e),fields:n.value.mapValue.fields}}function YR(t,e){let n;if(e instanceof al)n={update:$v(t,e.key,e.value)};else if(e instanceof GT)n={delete:qf(t,e.key)};else if(e instanceof qs)n={update:$v(t,e.key,e.data),updateMask:eD(e.fieldMask)};else{if(!(e instanceof $R))return ie();n={verify:qf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof hc)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ma)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ba)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof dc)return{fieldPath:i.field.canonicalString(),increment:o.gt};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:HR(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ie()}(t,e.precondition)),n}function JR(t,e){return t&&t.length>0?(it(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?xi(r.updateTime):xi(s);return i.isEqual(Ae.min())&&(i=xi(s)),new LR(i,r.transformResults||[])}(n,e))):[]}function ZR(t){let e=KR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){it(r===1);const c=n.from[0];c.allDescendants?s=c.collectionId:e=e.child(c.collectionId)}let i=[];n.where&&(i=function(c){const h=QT(c);return h instanceof Jr&&OT(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new Jo(Zs(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,Pm(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(c){const h=!!c.before,d=c.values||[];return new uc(d,h)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const h=!c.before,d=c.values||[];return new uc(d,h)}(n.endAt)),wR(e,s,o,i,a,"F",l,u)}function QT(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Zs(e.unaryFilter.field);return et.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Zs(e.unaryFilter.field);return et.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Zs(e.unaryFilter.field);return et.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Zs(e.unaryFilter.field);return et.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(e){return et.create(Zs(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Jr.create(e.compositeFilter.filters.map(n=>QT(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return ie()}}(e.compositeFilter.op))}(t):ie()}function Zs(t){return St.fromServerFormat(t.fieldPath)}function eD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.fe=e}}function rD(t){const e=ZR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this.rn=new iD}addToCollectionParentIndex(e,n){return this.rn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Yr.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Yr.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}}class iD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Mt(ze.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Mt(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Hi(0)}static Mn(){return new Hi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(){this.changes=new fo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ea(r.mutation,s,Sn.empty(),nt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Tt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Tt()){const s=ws();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Gl();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ws();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Tt()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=cc();const o=Zo(),a=Zo();return n.forEach((l,u)=>{const c=r.get(u.key);s.has(u.key)&&(c===void 0||c.mutation instanceof qs)?i=i.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),ea(c.mutation,u,c.mutation.getFieldMask(),nt.now())):o.set(u.key,Sn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new aD(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Zo();let s=new qt((o,a)=>o-a),i=Tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||Sn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(s.get(a.batchId)||Tt()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=VT();c.forEach(d=>{if(!i.has(d)){const p=qT(n.get(d),r.get(d));p!==null&&h.set(d,p),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):P.resolve(ws());let a=-1,l=i;return o.next(u=>P.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(c)?P.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Tt())).next(c=>({batchId:a,changes:FT(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=Gl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Gl();return this.indexManager.getCollectionParents(e,s).next(o=>P.forEach(o,a=>{const l=function(u,c){return new lh(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,h)=>{i=i.insert(c,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const u=l.getKey();i.get(u)===null&&(i=i.insert(u,_n.newInvalidDocument(u)))});let o=Gl();return i.forEach((a,l)=>{const u=s.get(a);u!==void 0&&ea(u.mutation,l,Sn.empty(),nt.now()),Vm(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return P.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:xi(r.createTime)}),P.resolve()}getNamedQuery(e,n){return P.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(r){return{name:r.name,query:rD(r.bundledQuery),readTime:xi(r.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.overlays=new qt(te.comparator),this.ls=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ws();return P.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.we(e,n,i)}),P.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.ls.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.ls.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){const s=ws(),i=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return P.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new qt((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=i.get(u.largestBatchId);c===null&&(c=ws(),i=i.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=ws(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=s)););return P.resolve(a)}we(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new jR(n,r));let i=this.ls.get(n);i===void 0&&(i=Tt(),this.ls.set(n,i)),this.ls.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(){this.fs=new Mt(Je.ds),this.ws=new Mt(Je._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new Je(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new Je(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new te(new ze([])),r=new Je(n,e),s=new Je(n,e+1),i=[];return this.ws.forEachInRange([r,s],o=>{this.ys(o),i.push(o.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new te(new ze([])),r=new Je(n,e),s=new Je(n,e+1);let i=Tt();return this.ws.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Je(e,0),r=this.fs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return te.comparator(e.key,n.key)||me(e.As,n.As)}static _s(e,n){return me(e.As,n.As)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Mt(Je.ds)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new UR(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Rs=this.Rs.add(new Je(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,n){return P.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.bs(r),i=s<0?0:s;return P.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),s=new Je(n,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([r,s],o=>{const a=this.Ps(o.As);i.push(a)}),P.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(me);return n.forEach(s=>{const i=new Je(s,0),o=new Je(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([i,o],a=>{r=r.add(a.As)})}),P.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new Je(new te(i),0);let a=new Mt(me);return this.Rs.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.As)),!0)},o),P.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const s=this.Ps(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){it(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return P.forEach(n.mutations,s=>{const i=new Je(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new Je(n,0),s=this.Rs.firstAfterOrEqual(r);return P.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this.Ds=e,this.docs=new qt(te.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():_n.newInvalidDocument(n))}getEntries(e,n){let r=cc();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():_n.newInvalidDocument(s))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=cc();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||nR(tR(c),r)<=0||(s.has(c.key)||Vm(n,c))&&(i=i.insert(c.key,c.mutableCopy()))}return P.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}Cs(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new fD(this)}getSize(e){return P.resolve(this.size)}}class fD extends oD{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.persistence=e,this.xs=new fo(n=>Lm(n),Fm),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Um,this.targetCount=0,this.Ms=Hi.kn()}forEachTarget(e,n){return this.xs.forEach((r,s)=>n(s)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),P.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Hi(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.Fn(n),P.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.xs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),P.waitFor(i).next(()=>s)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),P.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),P.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n){this.$s={},this.overlays={},this.Os=new kT(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new pD(this),this.indexManager=new sD,this.remoteDocumentCache=function(r){return new dD(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new nD(n),this.qs=new uD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new cD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new hD(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new gD(this.Os.next());return this.referenceDelegate.Us(),r(s).next(i=>this.referenceDelegate.Ks(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gs(e,n){return P.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class gD extends sR{constructor(e){super(),this.currentSequenceNumber=e}}class jm{constructor(e){this.persistence=e,this.Qs=new Um,this.js=null}static zs(e){return new jm(e)}get Ws(){if(this.js)return this.js;throw ie()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),P.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Ws.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Ws,r=>{const s=te.fromPath(r);return this.Hs(e,s).next(i=>{i||n.removeEntry(s,Ae.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return P.or([()=>P.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=s}static Li(e,n){let r=Tt(),s=Tt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Bm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Ki(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.Qi(e,n))}Ki(e,n){if(Pv(n))return P.resolve(null);let r=qi(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=zf(n,null,"F"),r=qi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Tt(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ji(n,a);return this.zi(n,u,o,l.readTime)?this.Ki(e,zf(n,null,"F")):this.Wi(e,u,n,l)}))})))}Gi(e,n,r,s){return Pv(n)||s.isEqual(Ae.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.zi(n,o,r,s)?this.Qi(e,n):(Iv()<=ue.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Mv(n)),this.Wi(e,o,n,eR(s,-1)))})}ji(e,n){let r=new Mt(CR(e));return n.forEach((s,i)=>{Vm(e,i)&&(r=r.add(i))}),r}zi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Qi(e,n){return Iv()<=ue.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Mv(n)),this.Ui.getDocumentsMatchingQuery(e,n,Yr.min())}Wi(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n,r,s){this.persistence=e,this.Hi=n,this.serializer=s,this.Ji=new qt(me),this.Yi=new fo(i=>Lm(i),Fm),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lD(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function _D(t,e,n,r){return new vD(t,e,n,r)}async function XT(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Tt();for(const u of s){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of i){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({er:u,removedBatchIds:o,addedBatchIds:a}))})})}function wD(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,h=c.keys();let d=P.resolve();return h.forEach(p=>{d=d.next(()=>u.getEntry(a,p)).next(m=>{const y=l.docVersions.get(p);it(y!==null),m.version.compareTo(y)<0&&(c.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),u.addEntry(m)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Tt();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function TD(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function SD(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}class Uv{constructor(){this.activeTargetIds=RR()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ED{constructor(){this.Hr=new Uv,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Uv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kl=null;function kd(){return Kl===null?Kl=268435456+Math.round(2147483648*Math.random()):Kl++,"0x"+Kl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt="WebChannelConnection";class AD extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,s,i){const o=kd(),a=this.To(e,n);q("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const l={};return this.Eo(l,s,i),this.Ao(e,a,l,r).then(u=>(q("RestConnection",`Received RPC '${e}' ${o}: `,u),u),u=>{throw ic("RestConnection",`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",r),u})}vo(e,n,r,s,i,o){return this.Io(e,n,r,s,i)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ho,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}To(e,n){const r=CD[e];return`${this.mo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,s){const i=kd();return new Promise((o,a)=>{const l=new zO;l.setWithCredentials(!0),l.listenOnce(UO.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ed.NO_ERROR:const c=l.getResponseJson();q(vt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(c)),o(c);break;case Ed.TIMEOUT:q(vt,`RPC '${e}' ${i} timed out`),a(new X(D.DEADLINE_EXCEEDED,"Request time out"));break;case Ed.HTTP_ERROR:const h=l.getStatus();if(q(vt,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const m=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(w)>=0?w:D.UNKNOWN}(p.status);a(new X(m,p.message))}else a(new X(D.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new X(D.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{q(vt,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);q(vt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",u,r,15)})}Ro(e,n,r){const s=kd(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=VO(),a=$O(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new BO({})),this.Eo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=i.join("");q(vt,`Creating RPC '${e}' stream ${s}: ${c}`,l);const h=o.createWebChannel(c,l);let d=!1,p=!1;const m=new ID({ro:w=>{p?q(vt,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(d||(q(vt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),q(vt,`RPC '${e}' stream ${s} sending:`,w),h.send(w))},oo:()=>h.close()}),y=(w,f,g)=>{w.listen(f,v=>{try{g(v)}catch(E){setTimeout(()=>{throw E},0)}})};return y(h,Wl.EventType.OPEN,()=>{p||q(vt,`RPC '${e}' stream ${s} transport opened.`)}),y(h,Wl.EventType.CLOSE,()=>{p||(p=!0,q(vt,`RPC '${e}' stream ${s} transport closed`),m.wo())}),y(h,Wl.EventType.ERROR,w=>{p||(p=!0,ic(vt,`RPC '${e}' stream ${s} transport errored:`,w),m.wo(new X(D.UNAVAILABLE,"The operation could not be completed")))}),y(h,Wl.EventType.MESSAGE,w=>{var f;if(!p){const g=w.data[0];it(!!g);const v=g,E=v.error||((f=v[0])===null||f===void 0?void 0:f.error);if(E){q(vt,`RPC '${e}' stream ${s} received error:`,E);const _=E.status;let S=function(T){const I=je[T];if(I!==void 0)return zR(I)}(_),k=E.message;S===void 0&&(S=D.INTERNAL,k="Unknown error status: "+_+" with message "+E.message),p=!0,m.wo(new X(S,k)),h.close()}else q(vt,`RPC '${e}' stream ${s} received:`,g),m._o(g)}}),y(a,jO.STAT_EVENT,w=>{w.stat===kv.PROXY?q(vt,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===kv.NOPROXY&&q(vt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{m.fo()},0),m}}function Cd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t){return new WR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=s,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n,r,s,i,o,a,l){this.ii=e,this.$o=r,this.Oo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new YT(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(Fs(n.toString()),Fs("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===n&&this.Zo(r,s)},r=>{e(()=>{const s=new X(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xD extends ND{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(it(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=JR(e.writeResults,e.commitTime),r=xi(e.commitTime);return this.listener.cu(r,n)}return it(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=QR(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>YR(this.serializer,r))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new X(D.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Io(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(D.UNKNOWN,s.toString())})}vo(e,n,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.vo(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(D.UNKNOWN,i.toString())})}terminate(){this.lu=!0}}class RD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Fs(n),this.mu=!1):q("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(o=>{r.enqueueAndForget(async()=>{ul(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=Ee(a);l.vu.add(4),await ll(l),l.bu.set("Unknown"),l.vu.delete(4),await dh(l)}(this))})}),this.bu=new RD(r,s)}}async function dh(t){if(ul(t))for(const e of t.Ru)await e(!0)}async function ll(t){for(const e of t.Ru)await e(!1)}function ul(t){return Ee(t).vu.size===0}async function JT(t,e,n){if(!ah(e))throw e;t.vu.add(1),await ll(t),t.bu.set("Offline"),n||(n=()=>TD(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await dh(t)})}function ZT(t,e){return e().catch(n=>JT(t,n,e))}async function fh(t){const e=Ee(t),n=Zr(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;PD(e);)try{const s=await SD(e.localStore,r);if(s===null){e.Eu.length===0&&n.jo();break}r=s.batchId,MD(e,s)}catch(s){await JT(e,s)}eS(e)&&tS(e)}function PD(t){return ul(t)&&t.Eu.length<10}function MD(t,e){t.Eu.push(e);const n=Zr(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function eS(t){return ul(t)&&!Zr(t).Uo()&&t.Eu.length>0}function tS(t){Zr(t).start()}async function bD(t){Zr(t).hu()}async function LD(t){const e=Zr(t);for(const n of t.Eu)e.uu(n.mutations)}async function FD(t,e,n){const r=t.Eu.shift(),s=$m.from(r,e,n);await ZT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await fh(t)}async function VD(t,e){e&&Zr(t).ou&&await async function(n,r){if(s=r.code,BR(s)&&s!==D.ABORTED){const i=n.Eu.shift();Zr(n).Qo(),await ZT(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await fh(n)}var s}(t,e),eS(t)&&tS(t)}async function Bv(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=ul(n);n.vu.add(3),await ll(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await dh(n)}async function $D(t,e){const n=Ee(t);e?(n.vu.delete(2),await dh(n)):e||(n.vu.add(2),await ll(n),n.bu.set("Unknown"))}function Zr(t){return t.Du||(t.Du=function(e,n,r){const s=Ee(e);return s.fu(),new xD(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{uo:bD.bind(null,t),ao:VD.bind(null,t),au:LD.bind(null,t),cu:FD.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await fh(t)):(await t.Du.stop(),t.Eu.length>0&&(q("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new zm(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nS(t,e){if(Fs("AsyncQueue",`${e}: ${t}`),ah(t))return new X(D.UNAVAILABLE,`${e}: ${t}`);throw t}class UD{constructor(){this.queries=new fo(e=>bT(e),MT),this.onlineState="Unknown",this.ku=new Set}}function jD(t){t.ku.forEach(e=>{e.next()})}class BD{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new fo(a=>bT(a),MT),this._c=new Map,this.mc=new Set,this.gc=new qt(te.comparator),this.yc=new Map,this.Ic=new Um,this.Tc={},this.Ec=new Map,this.Ac=Hi.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function zD(t,e,n){const r=GD(t);try{const s=await function(i,o){const a=Ee(i),l=nt.now(),u=o.reduce((d,p)=>d.add(p.key),Tt());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let p=cc(),m=Tt();return a.Zi.getEntries(d,u).next(y=>{p=y,p.forEach((w,f)=>{f.isValidDocument()||(m=m.add(w))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,p)).next(y=>{c=y;const w=[];for(const f of o){const g=VR(f,c.get(f.key).overlayedDocument);g!=null&&w.push(new qs(f.key,g,AT(g.value.mapValue),or.exists(!0)))}return a.mutationQueue.addMutationBatch(d,l,w,o)}).next(y=>{h=y;const w=y.applyToLocalDocumentSet(c,m);return a.documentOverlayCache.saveOverlays(d,y.batchId,w)})}).then(()=>({batchId:h.batchId,changes:FT(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let l=i.Tc[i.currentUser.toKey()];l||(l=new qt(me)),l=l.insert(o,a),i.Tc[i.currentUser.toKey()]=l}(r,s.batchId,n),await ph(r,s.changes),await fh(r.remoteStore)}catch(s){const i=nS(s,"Failed to persist write");n.reject(i)}}function zv(t,e,n){const r=Ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.wc.forEach((i,o)=>{const a=o.view.Mu(e);a.snapshot&&s.push(a.snapshot)}),function(i,o){const a=Ee(i);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const h of c.listeners)h.Mu(o)&&(l=!0)}),l&&jD(a)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WD(t,e){const n=Ee(t),r=e.batch.batchId;try{const s=await wD(n.localStore,e);sS(n,r,null),rS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ph(n,s)}catch(s){await ET(s)}}async function qD(t,e,n){const r=Ee(t);try{const s=await function(i,o){const a=Ee(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(it(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);sS(r,e,n),rS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ph(r,s)}catch(s){await ET(s)}}function rS(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function sS(t,e,n){const r=Ee(t);let s=r.Tc[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}async function ph(t,e,n){const r=Ee(t),s=[],i=[],o=[];r.wc.isEmpty()||(r.wc.forEach((a,l)=>{o.push(r.Rc(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){s.push(u);const c=Bm.Li(l.targetId,u);i.push(c)}}))}),await Promise.all(o),r.dc.nu(s),await async function(a,l){const u=Ee(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>P.forEach(l,h=>P.forEach(h.Fi,d=>u.persistence.referenceDelegate.addReference(c,h.targetId,d)).next(()=>P.forEach(h.Bi,d=>u.persistence.referenceDelegate.removeReference(c,h.targetId,d)))))}catch(c){if(!ah(c))throw c;q("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const h=c.targetId;if(!c.fromCache){const d=u.Ji.get(h),p=d.snapshotVersion,m=d.withLastLimboFreeSnapshotVersion(p);u.Ji=u.Ji.insert(h,m)}}}(r.localStore,i))}async function HD(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await XT(n.localStore,e);n.currentUser=e,function(s,i){s.Ec.forEach(o=>{o.forEach(a=>{a.reject(new X(D.CANCELLED,i))})}),s.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ph(n,r.er)}}function GD(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qD.bind(null,e),e}class Wv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=hh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return _D(this.persistence,new yD,e.initialUser,this.serializer)}createPersistence(e){return new mD(jm.zs,this.serializer)}createSharedClientState(e){return new ED}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class KD{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HD.bind(null,this.syncEngine),await $D(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new UD}createDatastore(e){const n=hh(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new AD(s));var s;return function(i,o,a,l){return new OD(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=a=>zv(this.syncEngine,a,0),o=jv.D()?new jv:new kD,new DD(n,r,s,i,o);var n,r,s,i,o}createSyncEngine(e,n){return function(r,s,i,o,a,l,u){const c=new BD(r,s,i,o,a,l);return u&&(c.vc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=Ee(e);q("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await ll(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=_t.UNAUTHENTICATED,this.clientId=ST.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{q("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(q("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new X(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=nS(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Id(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await XT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function qv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await YD(t);q("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Bv(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Bv(e.remoteStore,i)),t._onlineComponents=e}function XD(t){return t.name==="FirebaseError"?t.code===D.FAILED_PRECONDITION||t.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function YD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Id(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!XD(n))throw n;ic("Error using user provided cache. Falling back to memory cache: "+n),await Id(t,new Wv)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await Id(t,new Wv);return t._offlineComponents}async function JD(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await qv(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await qv(t,new KD))),t._onlineComponents}function ZD(t){return JD(t).then(e=>e.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(t,e,n){if(!n)throw new X(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tP(t,e,n,r){if(e===!0&&r===!0)throw new X(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Gv(t){if(!te.isDocumentKey(t))throw new X(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Wm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function Hf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wm(t);throw new X(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new X(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new X(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new X(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,n.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,r}}class qm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new X(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new X(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kv(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new qO;switch(n.type){case"firstParty":return new QO(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new X(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Hv.get(e);n&&(q("ComponentProvider","Removing Datastore"),Hv.delete(e),n.terminate())}(this),Promise.resolve()}}function nP(t,e,n,r={}){var s;const i=(t=Hf(t,qm))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ic("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=_t.MOCK_USER;else{a=hI(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new X(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new _t(u)}t._authCredentials=new HO(new TT(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new La(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ar(this.firestore,e,this._key)}}class Hm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hm(this.firestore,e,this._query)}}class La extends Hm{constructor(e,n,r){super(e,n,TR(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ar(this.firestore,null,new te(e))}withConverter(e){return new La(this.firestore,e,this._path)}}function rP(t,e,...n){if(t=xn(t),arguments.length===1&&(e=ST.A()),eP("doc","path",e),t instanceof qm){const r=ze.fromString(e,...n);return Gv(r),new ar(t,null,new te(r))}{if(!(t instanceof ar||t instanceof La))throw new X(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return Gv(r),new ar(t.firestore,t instanceof La?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new YT(this,"async_queue_retry"),this.Xc=()=>{const n=Cd();n&&q("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Cd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Cd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new Cs;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!ah(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw Fs("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const s=zm.createAndSchedule(this,e,n,r,i=>this.na(i));return this.zc.push(s),s}Zc(){this.Wc&&ie()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}class oS extends qm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new sP,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||aS(this),this._firestoreClient.terminate()}}function iP(t,e){const n=typeof t=="object"?t:Vw(),r=typeof t=="string"?t:"(default)",s=tm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=uI("firestore");i&&nP(s,...i)}return s}function oP(t){return t._firestoreClient||aS(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function aS(t){var e,n,r;const s=t._freezeSettings(),i=function(o,a,l,u){return new lR(o,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,iS(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new QD(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fa(mr.fromBase64String(e))}catch(n){throw new X(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fa(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=/^__.*__$/;class lP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qs(e,this.data,this.fieldMask,n,this.fieldTransforms):new al(e,this.data,n,this.fieldTransforms)}}function hS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class Gm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Gm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return fc(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(hS(this.ca)&&aP.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class uP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||hh(e)}ya(e,n,r,s=!1){return new Gm({ca:e,methodName:n,ga:r,path:St.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cP(t){const e=t._freezeSettings(),n=hh(t._databaseId);return new uP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hP(t,e,n,r,s,i={}){const o=t.ya(i.merge||i.mergeFields?2:0,e,n,s);mS("Data must be an object, but it was:",o,r);const a=fS(r,o);let l,u;if(i.merge)l=new Sn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const c=[];for(const h of i.mergeFields){const d=dP(e,h,n);if(!o.contains(d))throw new X(D.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);mP(c,d)||c.push(d)}l=new Sn(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new lP(new Tn(a),l,u)}function dS(t,e){if(pS(t=xn(t)))return mS("Unsupported field value:",e,t),fS(t,e);if(t instanceof uS)return function(n,r){if(!hS(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const o of n){let a=dS(o,r.wa(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=xn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return DR(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=nt.fromDate(n);return{timestampValue:Wf(r.serializer,s)}}if(n instanceof nt){const s=new nt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Wf(r.serializer,s)}}if(n instanceof cS)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Fa)return{bytesValue:qR(r.serializer,n._byteString)};if(n instanceof ar){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r._a(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:KT(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${Wm(n)}`)}(t,e)}function fS(t,e){const n={};return CT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ol(t,(r,s)=>{const i=dS(s,e.ha(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function pS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof cS||t instanceof Fa||t instanceof ar||t instanceof uS)}function mS(t,e,n){if(!pS(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Wm(n);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function dP(t,e,n){if((e=xn(e))instanceof lS)return e._internalPath;if(typeof e=="string")return pP(t,e);throw fc("Field path arguments must be of type string or ",t,!1,void 0,n)}const fP=new RegExp("[~\\*/\\[\\]]");function pP(t,e,n){if(e.search(fP)>=0)throw fc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new lS(...e.split("."))._internalPath}catch{throw fc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new X(D.INVALID_ARGUMENT,a+t+l)}function mP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function yP(t,e,n){t=Hf(t,ar);const r=Hf(t.firestore,oS),s=gP(t.converter,e,n);return vP(r,[hP(cP(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,or.none())])}function vP(t,e){return function(n,r){const s=new Cs;return n.asyncQueue.enqueueAndForget(async()=>zD(await ZD(n),r,s)),s.promise}(oP(t),e)}(function(t,e=!0){(function(n){ho=n})(so),$i(new Ds("firestore",(n,{instanceIdentifier:r,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new oS(new GO(n.getProvider("auth-internal")),new YO(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new X(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lc(a.options.projectId,l)}(i,r),i);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Gr(Cv,"3.13.0",t),Gr(Cv,"3.13.0","esm2017")})();const _P={apiKey:"YOUR_API_KEY",authDomain:"YOUR_AUTH_DOMAIN",projectId:"YOUR_PROJECT_ID",storageBucket:"YOUR_STORAGE_BUCKET",messagingSenderId:"YOUR_MESSAGING_SENDER_ID",appId:"YOUR_APP_ID"},gS=Fw(_P),yS=Mx(gS),wP=iP(gS),TP=({onLogin:t,onNavigateToRegister:e})=>{const[n,r]=Xt.useState(""),[s,i]=Xt.useState(""),[o,a]=Xt.useState(""),l=async u=>{u.preventDefault(),a("");try{const c=await wN(yS,n,s);t(c.user)}catch{a("Invalid credentials")}};return Z.jsxs("div",{children:[Z.jsx("h2",{children:"Login"}),Z.jsxs("form",{onSubmit:l,children:[Z.jsxs("div",{children:[Z.jsx("label",{children:"Email:"}),Z.jsx("input",{type:"email",value:n,onChange:u=>r(u.target.value),required:!0})]}),Z.jsxs("div",{children:[Z.jsx("label",{children:"Password:"}),Z.jsx("input",{type:"password",value:s,onChange:u=>i(u.target.value),required:!0})]}),o&&Z.jsx("p",{style:{color:"red"},children:o}),Z.jsx("button",{type:"submit",children:"Login"})]}),Z.jsxs("p",{children:["Noch kein Konto? ",Z.jsx("button",{onClick:e,children:"Registrieren"})]})]})},SP=({onRegister:t})=>{const[e,n]=Xt.useState(""),[r,s]=Xt.useState(""),[i,o]=Xt.useState(""),a=async l=>{l.preventDefault(),o("");try{const u=await _N(yS,e,r);t(u.user)}catch(u){o(u.message)}};return Z.jsxs("div",{children:[Z.jsx("h2",{children:"Register"}),Z.jsxs("form",{onSubmit:a,children:[Z.jsxs("div",{children:[Z.jsx("label",{children:"Email:"}),Z.jsx("input",{type:"email",value:e,onChange:l=>n(l.target.value),required:!0})]}),Z.jsxs("div",{children:[Z.jsx("label",{children:"Password:"}),Z.jsx("input",{type:"password",value:r,onChange:l=>s(l.target.value),required:!0})]}),i&&Z.jsx("p",{style:{color:"red"},children:i}),Z.jsx("button",{type:"submit",children:"Register"})]})]})},vS="15.0.4",Qv=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),Xv=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),Gf=(t,e)=>({startTime:e,type:"setValue",value:t}),_S=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),wS=(t,e,{startTime:n,target:r,timeConstant:s})=>r+(e-r)*Math.exp((n-t)/s),mi=t=>t.type==="exponentialRampToValue",pc=t=>t.type==="linearRampToValue",Nr=t=>mi(t)||pc(t),Km=t=>t.type==="setValue",Jn=t=>t.type==="setValueCurve",mc=(t,e,n,r)=>{const s=t[e];return s===void 0?r:Nr(s)||Km(s)?s.value:Jn(s)?s.values[s.values.length-1]:wS(n,mc(t,e-1,s.startTime,r),s)},Yv=(t,e,n,r,s)=>n===void 0?[r.insertTime,s]:Nr(n)?[n.endTime,n.value]:Km(n)?[n.startTime,n.value]:Jn(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,mc(t,e-1,n.startTime,s)],Kf=t=>t.type==="cancelAndHold",Qf=t=>t.type==="cancelScheduledValues",Cr=t=>Kf(t)||Qf(t)?t.cancelTime:mi(t)||pc(t)?t.endTime:t.startTime,Jv=(t,e,n,{endTime:r,value:s})=>n===s?s:0<n&&0<s||n<0&&s<0?n*(s/n)**((t-e)/(r-e)):0,Zv=(t,e,n,{endTime:r,value:s})=>n+(t-e)/(r-e)*(s-n),EP=(t,e)=>{const n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},kP=(t,{duration:e,startTime:n,values:r})=>{const s=(t-n)/e*(r.length-1);return EP(r,s)},Ql=t=>t.type==="setTarget";class CP{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=Cr(e);if(Kf(e)||Qf(e)){const r=this._automationEvents.findIndex(i=>Qf(e)&&Jn(i)?i.startTime+i.duration>=n:Cr(i)>=n),s=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),Kf(e)){const i=this._automationEvents[this._automationEvents.length-1];if(s!==void 0&&Nr(s)){if(i!==void 0&&Ql(i))throw new Error("The internal list is malformed.");const o=i===void 0?s.insertTime:Jn(i)?i.startTime+i.duration:Cr(i),a=i===void 0?this._defaultValue:Jn(i)?i.values[i.values.length-1]:i.value,l=mi(s)?Jv(n,o,a,s):Zv(n,o,a,s),u=mi(s)?Qv(l,n,this._currenTime):Xv(l,n,this._currenTime);this._automationEvents.push(u)}if(i!==void 0&&Ql(i)&&this._automationEvents.push(Gf(this.getValue(n),n)),i!==void 0&&Jn(i)&&i.startTime+i.duration>n){const o=n-i.startTime,a=(i.values.length-1)/i.duration,l=Math.max(2,1+Math.ceil(o*a)),u=o/(l-1)*a,c=i.values.slice(0,l);if(u<1)for(let h=1;h<l;h+=1){const d=u*h%1;c[h]=i.values[h-1]*(1-d)+i.values[h]*d}this._automationEvents[this._automationEvents.length-1]=_S(c,i.startTime,o)}}}else{const r=this._automationEvents.findIndex(o=>Cr(o)>n),s=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(s!==void 0&&Jn(s)&&Cr(s)+s.duration>n)return!1;const i=mi(e)?Qv(e.value,e.endTime,this._currenTime):pc(e)?Xv(e.value,n,this._currenTime):e;if(r===-1)this._automationEvents.push(i);else{if(Jn(e)&&n+e.duration>Cr(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,i)}}return!0}flush(e){const n=this._automationEvents.findIndex(r=>Cr(r)>e);if(n>1){const r=this._automationEvents.slice(n-1),s=r[0];Ql(s)&&r.unshift(Gf(mc(this._automationEvents,n-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>Cr(o)>e),r=this._automationEvents[n],s=(n===-1?this._automationEvents.length:n)-1,i=this._automationEvents[s];if(i!==void 0&&Ql(i)&&(r===void 0||!Nr(r)||r.insertTime>e))return wS(e,mc(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Km(i)&&(r===void 0||!Nr(r)))return i.value;if(i!==void 0&&Jn(i)&&(r===void 0||!Nr(r)||i.startTime+i.duration>e))return e<i.startTime+i.duration?kP(e,i):i.values[i.values.length-1];if(i!==void 0&&Nr(i)&&(r===void 0||!Nr(r)))return i.value;if(r!==void 0&&mi(r)){const[o,a]=Yv(this._automationEvents,s,i,r,this._defaultValue);return Jv(e,o,a,r)}if(r!==void 0&&pc(r)){const[o,a]=Yv(this._automationEvents,s,i,r,this._defaultValue);return Zv(e,o,a,r)}return this._defaultValue}}const IP=t=>({cancelTime:t,type:"cancelAndHold"}),AP=t=>({cancelTime:t,type:"cancelScheduledValues"}),NP=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),xP=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),OP=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),RP=()=>new DOMException("","AbortError"),DP=t=>(e,n,[r,s,i],o)=>{t(e[s],[n,r,i],a=>a[0]===n&&a[1]===r,o)},PP=t=>(e,n,r)=>{const s=[];for(let i=0;i<r.numberOfInputs;i+=1)s.push(new Set);t.set(e,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},MP=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},Gi=new WeakSet,TS=new WeakMap,Qm=new WeakMap,SS=new WeakMap,Xm=new WeakMap,mh=new WeakMap,ES=new WeakMap,Xf=new WeakMap,Yf=new WeakMap,Jf=new WeakMap,kS={construct(){return kS}},bP=t=>{try{const e=new Proxy(t,kS);new e}catch{return!1}return!0},e_=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,t_=(t,e)=>{const n=[];let r=t.replace(/^[\s]+/,""),s=r.match(e_);for(;s!==null;){const i=s[1].slice(1,-1),o=s[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(o),r=r.slice(s[0].length).replace(/^[\s]+/,""),s=r.match(e_)}return[n.join(";"),r]},n_=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},r_=t=>{if(!bP(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},LP=(t,e,n,r,s,i,o,a,l,u,c,h,d)=>{let p=0;return(m,y,w={credentials:"omit"})=>{const f=c.get(m);if(f!==void 0&&f.has(y))return Promise.resolve();const g=u.get(m);if(g!==void 0){const _=g.get(y);if(_!==void 0)return _}const v=i(m),E=v.audioWorklet===void 0?s(y).then(([_,S])=>{const[k,T]=t_(_,S),I=`${k};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${T}
})})(window,'_AWGS')`;return n(I)}).then(()=>{const _=d._AWGS.pop();if(_===void 0)throw new SyntaxError;r(v.currentTime,v.sampleRate,()=>_(class{},void 0,(S,k)=>{if(S.trim()==="")throw e();const T=Yf.get(v);if(T!==void 0){if(T.has(S))throw e();r_(k),n_(k.parameterDescriptors),T.set(S,k)}else r_(k),n_(k.parameterDescriptors),Yf.set(v,new Map([[S,k]]))},v.sampleRate,void 0,void 0))}):Promise.all([s(y),Promise.resolve(t(h,h))]).then(([[_,S],k])=>{const T=p+1;p=T;const[I,C]=t_(_,S),F=`${I};((AudioWorkletProcessor,registerProcessor)=>{${C}
})(${k?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${k?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${k?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${T}',class extends AudioWorkletProcessor{process(){return !1}})`,W=new Blob([F],{type:"application/javascript; charset=utf-8"}),j=URL.createObjectURL(W);return v.audioWorklet.addModule(j,w).then(()=>{if(a(v))return v;const B=o(v);return B.audioWorklet.addModule(j,w).then(()=>B)}).then(B=>{if(l===null)throw new SyntaxError;try{new l(B,`__sac${T}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(j))});return g===void 0?u.set(m,new Map([[y,E]])):g.set(y,E),E.then(()=>{const _=c.get(m);_===void 0?c.set(m,new Set([y])):_.add(y)}).finally(()=>{const _=u.get(m);_!==void 0&&_.delete(y)}),E}},Rn=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},gh=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return t.delete(r),r},CS=(t,e,n,r)=>{const s=Rn(t,e),i=gh(s,o=>o[0]===n&&o[1]===r);return s.size===0&&t.delete(e),i},cl=t=>Rn(ES,t),Ki=t=>{if(Gi.has(t))throw new Error("The AudioNode is already stored.");Gi.add(t),cl(t).forEach(e=>e(!0))},IS=t=>"port"in t,hl=t=>{if(!Gi.has(t))throw new Error("The AudioNode is not stored.");Gi.delete(t),cl(t).forEach(e=>e(!1))},Zf=(t,e)=>{!IS(t)&&e.every(n=>n.size===0)&&hl(t)},FP=(t,e,n,r,s,i,o,a,l,u,c,h,d)=>{const p=new WeakMap;return(m,y,w,f,g)=>{const{activeInputs:v,passiveInputs:E}=i(y),{outputs:_}=i(m),S=a(m),k=T=>{const I=l(y),C=l(m);if(T){const N=CS(E,m,w,f);t(v,m,N,!1),!g&&!h(m)&&n(C,I,w,f),d(y)&&Ki(y)}else{const N=r(v,m,w,f);e(E,f,N,!1),!g&&!h(m)&&s(C,I,w,f);const A=o(y);if(A===0)c(y)&&Zf(y,v);else{const L=p.get(y);L!==void 0&&clearTimeout(L),p.set(y,setTimeout(()=>{c(y)&&Zf(y,v)},A*1e3))}}};return u(_,[y,w,f],T=>T[0]===y&&T[1]===w&&T[2]===f,!0)?(S.add(k),c(m)?t(v,m,[w,f,k],!0):e(E,f,[m,w,k],!0),!0):!1}},VP=t=>(e,n,[r,s,i],o)=>{const a=e.get(r);a===void 0?e.set(r,new Set([[s,n,i]])):t(a,[s,n,i],l=>l[0]===s&&l[1]===n,o)},$P=t=>(e,n)=>{const r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const s=()=>{n.removeEventListener("ended",s),n.disconnect(r),r.disconnect()};n.addEventListener("ended",s)},UP=t=>(e,n)=>{t(e).add(n)},jP={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},BP=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const u=s(a),c={...jP,...l},h=r(u,c),d=i(u)?e():null;super(a,!1,h,d),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const l=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=l,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const l=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=l,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},Nt=(t,e)=>t.context===e,zP=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Nt(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(o,u)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},gc=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Kn=()=>new DOMException("","IndexSizeError"),Ym=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?Kn():r}})(t.getChannelData)},WP={numberOfChannels:1},qP=(t,e,n,r,s,i,o,a)=>{let l=null;return class AS{constructor(c){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:p}={...WP,...c};l===null&&(l=new s(1,1,44100));const m=r!==null&&e(i,i)?new r({length:h,numberOfChannels:d,sampleRate:p}):l.createBuffer(d,h,p);if(m.numberOfChannels===0)throw n();return typeof m.copyFromChannel!="function"?(o(m),Ym(m)):e(gc,()=>gc(m))||a(m),t.add(m),m}static[Symbol.hasInstance](c){return c!==null&&typeof c=="object"&&Object.getPrototypeOf(c)===AS.prototype||t.has(c)}}},$t=-34028234663852886e22,Ot=-$t,lr=t=>Gi.has(t),HP={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},GP=(t,e,n,r,s,i,o,a)=>class extends t{constructor(u,c){const h=i(u),d={...HP,...c},p=s(h,d),m=o(h),y=m?e():null;super(u,!1,p,y),this._audioBufferSourceNodeRenderer=y,this._isBufferNullified=!1,this._isBufferSet=d.buffer!==null,this._nativeAudioBufferSourceNode=p,this._onended=null,this._playbackRate=n(this,m,p.playbackRate,Ot,$t)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(u){if(this._nativeAudioBufferSourceNode.buffer=u,u!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(u){this._nativeAudioBufferSourceNode.loop=u}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(u){this._nativeAudioBufferSourceNode.loopEnd=u}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(u){this._nativeAudioBufferSourceNode.loopStart=u}get onended(){return this._onended}set onended(u){const c=typeof u=="function"?a(this,u):null;this._nativeAudioBufferSourceNode.onended=c;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===c?u:h}get playbackRate(){return this._playbackRate}start(u=0,c=0,h){if(this._nativeAudioBufferSourceNode.start(u,c,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[u,c]:[u,c,h]),this.context.state!=="closed"){Ki(this);const d=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",d),lr(this)&&hl(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",d)}}stop(u=0){this._nativeAudioBufferSourceNode.stop(u),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=u)}},KP=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null;const l=async(u,c)=>{let h=n(u);const d=Nt(h,c);if(!d){const p={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(c,p),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(c,h),d?await t(c,u.playbackRate,h.playbackRate):await r(c,u.playbackRate,h.playbackRate),await s(u,c,h),h};return{set start(u){o=u},set stop(u){a=u},render(u,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):l(u,c)}}},QP=t=>"playbackRate"in t,XP=t=>"frequency"in t&&"gain"in t,YP=t=>"offset"in t,JP=t=>!("frequency"in t)&&"gain"in t,ZP=t=>"detune"in t&&"frequency"in t,eM=t=>"pan"in t,Dt=t=>Rn(TS,t),dl=t=>Rn(SS,t),ep=(t,e)=>{const{activeInputs:n}=Dt(t);n.forEach(s=>s.forEach(([i])=>{e.includes(t)||ep(i,[...e,t])}));const r=QP(t)?[t.playbackRate]:IS(t)?Array.from(t.parameters.values()):XP(t)?[t.Q,t.detune,t.frequency,t.gain]:YP(t)?[t.offset]:JP(t)?[t.gain]:ZP(t)?[t.detune,t.frequency]:eM(t)?[t.pan]:[];for(const s of r){const i=dl(s);i!==void 0&&i.activeInputs.forEach(([o])=>ep(o,e))}lr(t)&&hl(t)},NS=t=>{ep(t.destination,[])},tM=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),nM=(t,e,n,r,s,i,o,a,l)=>class extends t{constructor(c={}){if(l===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new l(c)}catch(m){throw m.code===12&&m.message==="sampleRate is not in range"?n():m}if(h===null)throw r();if(!tM(c.latencyHint))throw new TypeError(`The provided value '${c.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(c.sampleRate!==void 0&&h.sampleRate!==c.sampleRate)throw n();super(h,2);const{latencyHint:d}=c,{sampleRate:p}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:d==="balanced"?512/p:d==="interactive"||d===void 0?256/p:d==="playback"?1024/p:Math.max(2,Math.min(128,Math.round(d*p/128)))*128/p,this._nativeAudioContext=h,l.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const m=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",m)};h.addEventListener("statechange",m)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),NS(this)}))}createMediaElementSource(c){return new s(this,{mediaElement:c})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(c){return new o(this,{mediaStream:c})}createMediaStreamTrackSource(c){return new a(this,{mediaStreamTrack:c})}resume(){return this._state==="suspended"?new Promise((c,h)=>{const d=()=>{this._nativeAudioContext.removeEventListener("statechange",d),this._nativeAudioContext.state==="running"?c():this.resume().then(c,h)};this._nativeAudioContext.addEventListener("statechange",d)}):this._nativeAudioContext.resume().catch(c=>{throw c===void 0||c.code===15?e():c})}suspend(){return this._nativeAudioContext.suspend().catch(c=>{throw c===void 0?e():c})}},rM=(t,e,n,r,s,i,o,a)=>class extends t{constructor(u,c){const h=i(u),d=o(h),p=s(h,c,d),m=d?e(a):null;super(u,!1,p,m),this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=p}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(u>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=u}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=u}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},sM=t=>{const e=new WeakMap,n=async(r,s)=>{const i=s.destination;return e.set(s,i),await t(r,s,i),i};return{render(r,s){const i=e.get(s);return i!==void 0?Promise.resolve(i):n(r,s)}}},iM=(t,e,n,r,s,i,o,a)=>(l,u)=>{const c=u.listener,h=()=>{const _=new Float32Array(1),S=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),k=o(u);let T=!1,I=[0,0,-1,0,1,0],C=[0,0,0];const N=()=>{if(T)return;T=!0;const W=r(u,256,9,0);W.onaudioprocess=({inputBuffer:j})=>{const B=[i(j,_,0),i(j,_,1),i(j,_,2),i(j,_,3),i(j,_,4),i(j,_,5)];B.some((R,M)=>R!==I[M])&&(c.setOrientation(...B),I=B);const x=[i(j,_,6),i(j,_,7),i(j,_,8)];x.some((R,M)=>R!==C[M])&&(c.setPosition(...x),C=x)},S.connect(W)},A=W=>j=>{j!==I[W]&&(I[W]=j,c.setOrientation(...I))},L=W=>j=>{j!==C[W]&&(C[W]=j,c.setPosition(...C))},F=(W,j,B)=>{const x=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:j});x.connect(S,0,W),x.start(),Object.defineProperty(x.offset,"defaultValue",{get(){return j}});const R=t({context:l},k,x.offset,Ot,$t);return a(R,"value",M=>()=>M.call(R),M=>$=>{try{M.call(R,$)}catch(H){if(H.code!==9)throw H}N(),k&&B($)}),R.cancelAndHoldAtTime=(M=>k?()=>{throw s()}:(...$)=>{const H=M.apply(R,$);return N(),H})(R.cancelAndHoldAtTime),R.cancelScheduledValues=(M=>k?()=>{throw s()}:(...$)=>{const H=M.apply(R,$);return N(),H})(R.cancelScheduledValues),R.exponentialRampToValueAtTime=(M=>k?()=>{throw s()}:(...$)=>{const H=M.apply(R,$);return N(),H})(R.exponentialRampToValueAtTime),R.linearRampToValueAtTime=(M=>k?()=>{throw s()}:(...$)=>{const H=M.apply(R,$);return N(),H})(R.linearRampToValueAtTime),R.setTargetAtTime=(M=>k?()=>{throw s()}:(...$)=>{const H=M.apply(R,$);return N(),H})(R.setTargetAtTime),R.setValueAtTime=(M=>k?()=>{throw s()}:(...$)=>{const H=M.apply(R,$);return N(),H})(R.setValueAtTime),R.setValueCurveAtTime=(M=>k?()=>{throw s()}:(...$)=>{const H=M.apply(R,$);return N(),H})(R.setValueCurveAtTime),R};return{forwardX:F(0,0,A(0)),forwardY:F(1,0,A(1)),forwardZ:F(2,-1,A(2)),positionX:F(6,0,L(0)),positionY:F(7,0,L(1)),positionZ:F(8,0,L(2)),upX:F(3,0,A(3)),upY:F(4,1,A(4)),upZ:F(5,0,A(5))}},{forwardX:d,forwardY:p,forwardZ:m,positionX:y,positionY:w,positionZ:f,upX:g,upY:v,upZ:E}=c.forwardX===void 0?h():c;return{get forwardX(){return d},get forwardY(){return p},get forwardZ(){return m},get positionX(){return y},get positionY(){return w},get positionZ(){return f},get upX(){return g},get upY(){return v},get upZ(){return E}}},yc=t=>"context"in t,fl=t=>yc(t[0]),Hs=(t,e,n,r)=>{for(const s of t)if(n(s)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},s_=(t,e,[n,r],s)=>{Hs(t,[e,n,r],i=>i[0]===e&&i[1]===n,s)},i_=(t,[e,n,r],s)=>{const i=t.get(e);i===void 0?t.set(e,new Set([[n,r]])):Hs(i,[n,r],o=>o[0]===n,s)},po=t=>"inputs"in t,vc=(t,e,n,r)=>{if(po(e)){const s=e.inputs[r];return t.connect(s,n,0),[s,n,0]}return t.connect(e,n,r),[e,n,r]},xS=(t,e,n)=>{for(const r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},oM=(t,e,n)=>gh(t,r=>r[0]===e&&r[1]===n),OS=(t,e)=>{if(!cl(t).delete(e))throw new Error("Missing the expected event listener.")},RS=(t,e,n)=>{const r=Rn(t,e),s=gh(r,i=>i[0]===n);return r.size===0&&t.delete(e),s},_c=(t,e,n,r)=>{po(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},Se=t=>Rn(Qm,t),Va=t=>Rn(Xm,t),$s=t=>Xf.has(t),yu=t=>!Gi.has(t),o_=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const r=t.createScriptProcessor(256,1,1),s=t.createGain(),i=t.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=t.createBufferSource();a.buffer=i,a.loop=!0,a.connect(r).connect(t.destination),a.connect(s),a.disconnect(s),r.onaudioprocess=l=>{const u=l.inputBuffer.getChannelData(0);Array.prototype.some.call(u,c=>c===1)?n(!0):n(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(t.destination)},a.start()}}),Ad=(t,e)=>{const n=new Map;for(const r of t)for(const s of r){const i=n.get(s);n.set(s,i===void 0?1:i+1)}n.forEach((r,s)=>e(s,r))},wc=t=>"context"in t,aM=t=>{const e=new Map;t.connect=(n=>(r,s=0,i=0)=>{const o=wc(r)?n(r,s,i):n(r,s),a=e.get(r);return a===void 0?e.set(r,[{input:i,output:s}]):a.every(l=>l.input!==i||l.output!==s)&&a.push({input:i,output:s}),o})(t.connect.bind(t)),t.disconnect=(n=>(r,s,i)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(const[o,a]of e){const l=a.filter(u=>u.output!==r);l.length===0?e.delete(o):e.set(o,l)}else if(e.has(r))if(s===void 0)e.delete(r);else{const o=e.get(r);if(o!==void 0){const a=o.filter(l=>l.output!==s&&(l.input!==i||i===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(const[o,a]of e)a.forEach(l=>{wc(o)?t.connect(o,l.output,l.input):t.connect(o,l.output)})})(t.disconnect)},lM=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=dl(e),{outputs:o}=Dt(t),a=cl(t),l=u=>{const c=Se(t),h=Va(e);if(u){const d=RS(i,t,n);s_(s,t,d,!1),!r&&!$s(t)&&c.connect(h,n)}else{const d=oM(s,t,n);i_(i,d,!1),!r&&!$s(t)&&c.disconnect(h,n)}};return Hs(o,[e,n],u=>u[0]===e&&u[1]===n,!0)?(a.add(l),lr(t)?s_(s,t,[n,l],!0):i_(i,[t,n,l],!0),!0):!1},uM=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=Dt(e),o=xS(s[r],t,n);return o===null?[CS(i,t,n,r)[2],!1]:[o[2],!0]},cM=(t,e,n)=>{const{activeInputs:r,passiveInputs:s}=dl(e),i=xS(r,t,n);return i===null?[RS(s,t,n)[1],!1]:[i[2],!0]},Jm=(t,e,n,r,s)=>{const[i,o]=uM(t,n,r,s);if(i!==null&&(OS(t,i),o&&!e&&!$s(t)&&_c(Se(t),Se(n),r,s)),lr(n)){const{activeInputs:a}=Dt(n);Zf(n,a)}},Zm=(t,e,n,r)=>{const[s,i]=cM(t,n,r);s!==null&&(OS(t,s),i&&!e&&!$s(t)&&Se(t).disconnect(Va(n),r))},hM=(t,e)=>{const n=Dt(t),r=[];for(const s of n.outputs)fl(s)?Jm(t,e,...s):Zm(t,e,...s),r.push(s[0]);return n.outputs.clear(),r},dM=(t,e,n)=>{const r=Dt(t),s=[];for(const i of r.outputs)i[1]===n&&(fl(i)?Jm(t,e,...i):Zm(t,e,...i),s.push(i[0]),r.outputs.delete(i));return s},fM=(t,e,n,r,s)=>{const i=Dt(t);return Array.from(i.outputs).filter(o=>o[0]===n&&(r===void 0||o[1]===r)&&(s===void 0||o[2]===s)).map(o=>(fl(o)?Jm(t,e,...o):Zm(t,e,...o),i.outputs.delete(o),o[0]))},pM=(t,e,n,r,s,i,o,a,l,u,c,h,d,p,m,y)=>class extends u{constructor(f,g,v,E){super(v),this._context=f,this._nativeAudioNode=v;const _=c(f);h(_)&&n(o_,()=>o_(_,y))!==!0&&aM(v),Qm.set(this,v),ES.set(this,new Set),f.state!=="closed"&&g&&Ki(this),t(this,E,v)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(f){this._nativeAudioNode.channelCount=f}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(f){this._nativeAudioNode.channelCountMode=f}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(f){this._nativeAudioNode.channelInterpretation=f}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(f,g=0,v=0){if(g<0||g>=this._nativeAudioNode.numberOfOutputs)throw s();const E=c(this._context),_=m(E);if(d(f)||p(f))throw i();if(yc(f)){const T=Se(f);try{const C=vc(this._nativeAudioNode,T,g,v),N=yu(this);(_||N)&&this._nativeAudioNode.disconnect(...C),this.context.state!=="closed"&&!N&&yu(f)&&Ki(f)}catch(C){throw C.code===12?i():C}if(e(this,f,g,v,_)){const C=l([this],f);Ad(C,r(_))}return f}const S=Va(f);if(S.name==="playbackRate"&&S.maxValue===1024)throw o();try{this._nativeAudioNode.connect(S,g),(_||yu(this))&&this._nativeAudioNode.disconnect(S,g)}catch(T){throw T.code===12?i():T}if(lM(this,f,g,_)){const T=l([this],f);Ad(T,r(_))}}disconnect(f,g,v){let E;const _=c(this._context),S=m(_);if(f===void 0)E=hM(this,S);else if(typeof f=="number"){if(f<0||f>=this.numberOfOutputs)throw s();E=dM(this,S,f)}else{if(g!==void 0&&(g<0||g>=this.numberOfOutputs)||yc(f)&&v!==void 0&&(v<0||v>=f.numberOfInputs))throw s();if(E=fM(this,S,f,g,v),E.length===0)throw i()}for(const k of E){const T=l([this],k);Ad(T,a)}}},mM=(t,e,n,r,s,i,o,a,l,u,c,h,d)=>(p,m,y,w=null,f=null)=>{const g=y.value,v=new CP(g),E=m?r(v):null,_={get defaultValue(){return g},get maxValue(){return w===null?y.maxValue:w},get minValue(){return f===null?y.minValue:f},get value(){return y.value},set value(S){y.value=S,_.setValueAtTime(S,p.context.currentTime)},cancelAndHoldAtTime(S){if(typeof y.cancelAndHoldAtTime=="function")E===null&&v.flush(p.context.currentTime),v.add(s(S)),y.cancelAndHoldAtTime(S);else{const k=Array.from(v).pop();E===null&&v.flush(p.context.currentTime),v.add(s(S));const T=Array.from(v).pop();y.cancelScheduledValues(S),k!==T&&T!==void 0&&(T.type==="exponentialRampToValue"?y.exponentialRampToValueAtTime(T.value,T.endTime):T.type==="linearRampToValue"?y.linearRampToValueAtTime(T.value,T.endTime):T.type==="setValue"?y.setValueAtTime(T.value,T.startTime):T.type==="setValueCurve"&&y.setValueCurveAtTime(T.values,T.startTime,T.duration))}return _},cancelScheduledValues(S){return E===null&&v.flush(p.context.currentTime),v.add(i(S)),y.cancelScheduledValues(S),_},exponentialRampToValueAtTime(S,k){if(S===0)throw new RangeError;if(!Number.isFinite(k)||k<0)throw new RangeError;const T=p.context.currentTime;return E===null&&v.flush(T),Array.from(v).length===0&&(v.add(u(g,T)),y.setValueAtTime(g,T)),v.add(o(S,k)),y.exponentialRampToValueAtTime(S,k),_},linearRampToValueAtTime(S,k){const T=p.context.currentTime;return E===null&&v.flush(T),Array.from(v).length===0&&(v.add(u(g,T)),y.setValueAtTime(g,T)),v.add(a(S,k)),y.linearRampToValueAtTime(S,k),_},setTargetAtTime(S,k,T){return E===null&&v.flush(p.context.currentTime),v.add(l(S,k,T)),y.setTargetAtTime(S,k,T),_},setValueAtTime(S,k){return E===null&&v.flush(p.context.currentTime),v.add(u(S,k)),y.setValueAtTime(S,k),_},setValueCurveAtTime(S,k,T){const I=S instanceof Float32Array?S:new Float32Array(S);if(h!==null&&h.name==="webkitAudioContext"){const C=k+T,N=p.context.sampleRate,A=Math.ceil(k*N),L=Math.floor(C*N),F=L-A,W=new Float32Array(F);for(let B=0;B<F;B+=1){const x=(I.length-1)/T*((A+B)/N-k),R=Math.floor(x),M=Math.ceil(x);W[B]=R===M?I[R]:(1-(x-R))*I[R]+(1-(M-x))*I[M]}E===null&&v.flush(p.context.currentTime),v.add(c(W,k,T)),y.setValueCurveAtTime(W,k,T);const j=L/N;j<C&&d(_,W[W.length-1],j),d(_,I[I.length-1],C)}else E===null&&v.flush(p.context.currentTime),v.add(c(I,k,T)),y.setValueCurveAtTime(I,k,T);return _}};return n.set(_,y),e.set(_,p),t(_,E),_},gM=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:r,value:s}=n;e.exponentialRampToValueAtTime(s,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:s}=n;e.linearRampToValueAtTime(s,r)}else if(n.type==="setTarget"){const{startTime:r,target:s,timeConstant:i}=n;e.setTargetAtTime(s,r,i)}else if(n.type==="setValue"){const{startTime:r,value:s}=n;e.setValueAtTime(s,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:s,values:i}=n;e.setValueCurveAtTime(i,s,r)}else throw new Error("Can't apply an unknown automation.")}});class DS{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,s)=>e.call(n,r,s,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const yM={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},vM=(t,e,n,r,s,i,o,a,l,u,c,h,d,p)=>class extends e{constructor(y,w,f){var g;const v=a(y),E=l(v),_=c({...yM,...f});d(_);const S=Yf.get(v),k=S==null?void 0:S.get(w),T=E||v.state!=="closed"?v:(g=o(v))!==null&&g!==void 0?g:v,I=s(T,E?null:y.baseLatency,u,w,k,_),C=E?r(w,_,k):null;super(y,!0,I,C);const N=[];I.parameters.forEach((L,F)=>{const W=n(this,E,L);N.push([F,W])}),this._nativeAudioWorkletNode=I,this._onprocessorerror=null,this._parameters=new DS(N),E&&t(v,this);const{activeInputs:A}=i(this);h(I,A)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(y){const w=typeof y=="function"?p(this,y):null;this._nativeAudioWorkletNode.onprocessorerror=w;const f=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=f!==null&&f===w?y:f}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Tc(t,e,n,r,s){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,s);else{const i=t.getChannelData(r);if(e[n].byteLength===0)e[n]=i.slice(s,s+128);else{const o=new Float32Array(i.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(o)}}}const PS=(t,e,n,r,s)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,s):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],s)},Sc=(t,e)=>{const n=[];for(let r=0;r<t;r+=1){const s=[],i=typeof e=="number"?e:e[r];for(let o=0;o<i;o+=1)s.push(new Float32Array(128));n.push(s)}return n},_M=(t,e)=>{const n=Rn(Jf,t),r=Se(e);return Rn(n,r)},wM=async(t,e,n,r,s,i,o)=>{const a=e===null?Math.ceil(t.context.length/128)*128:e.length,l=r.channelCount*r.numberOfInputs,u=s.reduce((w,f)=>w+f,0),c=u===0?null:n.createBuffer(u,a,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=Dt(t),d=await _M(n,t),p=Sc(r.numberOfInputs,r.channelCount),m=Sc(r.numberOfOutputs,s),y=Array.from(t.parameters.keys()).reduce((w,f)=>({...w,[f]:new Float32Array(128)}),{});for(let w=0;w<a;w+=128){if(r.numberOfInputs>0&&e!==null)for(let f=0;f<r.numberOfInputs;f+=1)for(let g=0;g<r.channelCount;g+=1)Tc(e,p[f],g,g,w);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:f},g)=>{Tc(e,y,f,l+g,w)});for(let f=0;f<r.numberOfInputs;f+=1)for(let g=0;g<s[f];g+=1)m[f][g].byteLength===0&&(m[f][g]=new Float32Array(128));try{const f=p.map((v,E)=>h.activeInputs[E].size===0?[]:v),g=o(w/n.sampleRate,n.sampleRate,()=>d.process(f,m,y));if(c!==null)for(let v=0,E=0;v<r.numberOfOutputs;v+=1){for(let _=0;_<s[v];_+=1)PS(c,m[v],_,E+_,w);E+=s[v]}if(!g)break}catch(f){t.dispatchEvent(new ErrorEvent("processorerror",{colno:f.colno,filename:f.filename,lineno:f.lineno,message:f.message}));break}}return c},TM=(t,e,n,r,s,i,o,a,l,u,c,h,d,p,m,y)=>(w,f,g)=>{const v=new WeakMap;let E=null;const _=async(S,k)=>{let T=c(S),I=null;const C=Nt(T,k),N=Array.isArray(f.outputChannelCount)?f.outputChannelCount:Array.from(f.outputChannelCount);if(h===null){const A=N.reduce((j,B)=>j+B,0),L=s(k,{channelCount:Math.max(1,A),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,A)}),F=[];for(let j=0;j<S.numberOfOutputs;j+=1)F.push(r(k,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:N[j]}));const W=o(k,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:1});W.connect=e.bind(null,F),W.disconnect=l.bind(null,F),I=[L,F,W]}else C||(T=new h(k,w));if(v.set(k,I===null?T:I[2]),I!==null){if(E===null){if(g===void 0)throw new Error("Missing the processor constructor.");if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const B=S.channelCount*S.numberOfInputs,x=g.parameterDescriptors===void 0?0:g.parameterDescriptors.length,R=B+x;E=wM(S,R===0?null:await(async()=>{const $=new d(R,Math.ceil(S.context.length/128)*128,k.sampleRate),H=[],Ye=[];for(let le=0;le<f.numberOfInputs;le+=1)H.push(o($,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:1})),Ye.push(s($,{channelCount:f.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:f.channelCount}));const Fe=await Promise.all(Array.from(S.parameters.values()).map(async le=>{const Ue=i($,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:le.value});return await p($,le,Ue.offset),Ue})),J=r($,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,B+x)});for(let le=0;le<f.numberOfInputs;le+=1){H[le].connect(Ye[le]);for(let Ue=0;Ue<f.channelCount;Ue+=1)Ye[le].connect(J,Ue,le*f.channelCount+Ue)}for(const[le,Ue]of Fe.entries())Ue.connect(J,0,B+le),Ue.start(0);return J.connect($.destination),await Promise.all(H.map(le=>m(S,$,le))),y($)})(),k,f,N,g,u)}const A=await E,L=n(k,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[F,W,j]=I;A!==null&&(L.buffer=A,L.start(0)),L.connect(F);for(let B=0,x=0;B<S.numberOfOutputs;B+=1){const R=W[B];for(let M=0;M<N[B];M+=1)F.connect(R,x+M,M);x+=N[B]}return j}if(C)for(const[A,L]of S.parameters.entries())await t(k,L,T.parameters.get(A));else for(const[A,L]of S.parameters.entries())await p(k,L,T.parameters.get(A));return await m(S,k,T),T};return{render(S,k){a(k,S);const T=v.get(k);return T!==void 0?Promise.resolve(T):_(S,k)}}},SM=(t,e,n,r,s,i,o,a,l,u,c,h,d,p,m,y,w,f,g,v)=>class extends m{constructor(_,S){super(_,S),this._nativeContext=_,this._audioWorklet=t===void 0?void 0:{addModule:(k,T)=>t(this,k,T)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new s(this)}createBuffer(_,S,k){return new n({length:S,numberOfChannels:_,sampleRate:k})}createBufferSource(){return new r(this)}createChannelMerger(_=6){return new i(this,{numberOfInputs:_})}createChannelSplitter(_=6){return new o(this,{numberOfOutputs:_})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(_=1){return new c(this,{maxDelayTime:_})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(_,S){return new p(this,{feedback:S,feedforward:_})}createOscillator(){return new y(this)}createPanner(){return new w(this)}createPeriodicWave(_,S,k={disableNormalization:!1}){return new f(this,{...k,imag:S,real:_})}createStereoPanner(){return new g(this)}createWaveShaper(){return new v(this)}decodeAudioData(_,S,k){return u(this._nativeContext,_).then(T=>(typeof S=="function"&&S(T),T),T=>{throw typeof k=="function"&&k(T),T})}},EM={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},kM=(t,e,n,r,s,i,o,a)=>class extends t{constructor(u,c){const h=i(u),d={...EM,...c},p=s(h,d),m=o(h),y=m?n():null;super(u,!1,p,y),this._Q=e(this,m,p.Q,Ot,$t),this._detune=e(this,m,p.detune,1200*Math.log2(Ot),-1200*Math.log2(Ot)),this._frequency=e(this,m,p.frequency,u.sampleRate/2,0),this._gain=e(this,m,p.gain,40*Math.log10(Ot),$t),this._nativeBiquadFilterNode=p,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(u){this._nativeBiquadFilterNode.type=u}getFrequencyResponse(u,c,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(u,c,h)}catch(d){throw d.code===11?r():d}if(u.length!==c.length||c.length!==h.length)throw r()}},CM=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let u=n(a);const c=Nt(u,l);if(!c){const h={Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type};u=e(l,h)}return i.set(l,u),c?(await t(l,a.Q,u.Q),await t(l,a.detune,u.detune),await t(l,a.frequency,u.frequency),await t(l,a.gain,u.gain)):(await r(l,a.Q,u.Q),await r(l,a.detune,u.detune),await r(l,a.frequency,u.frequency),await r(l,a.gain,u.gain)),await s(a,l,u),u};return{render(a,l){const u=i.get(l);return u!==void 0?Promise.resolve(u):o(a,l)}}},IM=(t,e)=>(n,r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t.get(n);if(i!==void 0)return i;try{const o=r();return o instanceof Promise?(t.set(n,o),o.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,o),o)}catch{return e.set(n,!1),!1}},AM={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},NM=(t,e,n,r,s)=>class extends t{constructor(o,a){const l=r(o),u={...AM,...a},c=n(l,u),h=s(l)?e():null;super(o,!1,c,h)}},xM=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Nt(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(o,u)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},OM={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},RM=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const u=r(a),c=i({...OM,...l}),h=n(u,c),d=s(u)?e():null;super(a,!1,h,d)}},DM=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Nt(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(o,u)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},PM=t=>(e,n,r)=>t(n,e,r),MM=t=>(e,n,r=0,s=0)=>{const i=e[r];if(i===void 0)throw t();return wc(n)?i.connect(n,0,s):i.connect(n,0)},bM=t=>(e,n)=>{const r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=e.createBuffer(1,2,44100);return r.buffer=s,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}},LM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},FM=(t,e,n,r,s,i,o)=>class extends t{constructor(l,u){const c=s(l),h={...LM,...u},d=r(c,h),p=i(c),m=p?n():null;super(l,!1,d,m),this._constantSourceNodeRenderer=m,this._nativeConstantSourceNode=d,this._offset=e(this,p,d.offset,Ot,$t),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?o(this,l):null;this._nativeConstantSourceNode.onended=u;const c=this._nativeConstantSourceNode.onended;this._onended=c!==null&&c===u?l:c}start(l=0){if(this._nativeConstantSourceNode.start(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=l),this.context.state!=="closed"){Ki(this);const u=()=>{this._nativeConstantSourceNode.removeEventListener("ended",u),lr(this)&&hl(this)};this._nativeConstantSourceNode.addEventListener("ended",u)}}stop(l=0){this._nativeConstantSourceNode.stop(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=l)}},VM=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null;const l=async(u,c)=>{let h=n(u);const d=Nt(h,c);if(!d){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(c,p),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(c,h),d?await t(c,u.offset,h.offset):await r(c,u.offset,h.offset),await s(u,c,h),h};return{set start(u){o=u},set stop(u){a=u},render(u,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):l(u,c)}}},$M=t=>e=>(t[0]=e,t[0]),UM={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},jM=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const u=r(a),c={...UM,...l},h=n(u,c),p=s(u)?e():null;super(a,!1,h,p),this._isBufferNullified=!1,this._nativeConvolverNode=h,c.buffer!==null&&i(this,c.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const l=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=l.createBuffer(1,1,l.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},BM=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Nt(a,o)){const u={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(o,u)}return r.set(o,a),po(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},zM=(t,e)=>(n,r,s)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,s)}catch(i){throw i.name==="SyntaxError"?t():i}},WM=()=>new DOMException("","DataCloneError"),a_=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{const s=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>s();try{e.postMessage(t,[t])}catch{}finally{s()}})},qM=(t,e,n,r,s,i,o,a,l,u,c)=>(h,d)=>{const p=o(h)?h:i(h);if(s.has(d)){const m=n();return Promise.reject(m)}try{s.add(d)}catch{}return e(l,()=>l(p))?p.decodeAudioData(d).then(m=>(a_(d).catch(()=>{}),e(a,()=>a(m))||c(m),t.add(m),m)):new Promise((m,y)=>{const w=async()=>{try{await a_(d)}catch{}},f=g=>{y(g),w()};try{p.decodeAudioData(d,g=>{typeof g.copyFromChannel!="function"&&(u(g),Ym(g)),t.add(g),w().then(()=>m(g))},g=>{f(g===null?r():g)})}catch(g){f(g)}})},HM=(t,e,n,r,s,i,o,a)=>(l,u)=>{const c=e.get(l);if(c===void 0)throw new Error("Missing the expected cycle count.");const h=i(l.context),d=a(h);if(c===u){if(e.delete(l),!d&&o(l)){const p=r(l),{outputs:m}=n(l);for(const y of m)if(fl(y)){const w=r(y[0]);t(p,w,y[1],y[2])}else{const w=s(y[0]);p.connect(w,y[1])}}}else e.set(l,c-u)},GM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},KM=(t,e,n,r,s,i,o)=>class extends t{constructor(l,u){const c=s(l),h={...GM,...u},d=r(c,h),p=i(c),m=p?n(h.maxDelayTime):null;super(l,!1,d,m),this._delayTime=e(this,p,d.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},QM=(t,e,n,r,s)=>i=>{const o=new WeakMap,a=async(l,u)=>{let c=n(l);const h=Nt(c,u);if(!h){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,delayTime:c.delayTime.value,maxDelayTime:i};c=e(u,d)}return o.set(u,c),h?await t(u,l.delayTime,c.delayTime):await r(u,l.delayTime,c.delayTime),await s(l,u,c),c};return{render(l,u){const c=o.get(u);return c!==void 0?Promise.resolve(c):a(l,u)}}},XM=t=>(e,n,r,s)=>t(e[s],i=>i[0]===n&&i[1]===r),YM=t=>(e,n)=>{t(e).delete(n)},JM=t=>"delayTime"in t,ZM=(t,e,n)=>function r(s,i){const o=yc(i)?i:n(t,i);if(JM(o))return[];if(s[0]===o)return[s];if(s.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(l=>r([...s,o],l[0])).reduce((l,u)=>l.concat(u),[])},Xl=(t,e,n)=>{const r=e[n];if(r===void 0)throw t();return r},e2=t=>(e,n=void 0,r=void 0,s=0)=>n===void 0?e.forEach(i=>i.disconnect()):typeof n=="number"?Xl(t,e,n).disconnect():wc(n)?r===void 0?e.forEach(i=>i.disconnect(n)):s===void 0?Xl(t,e,r).disconnect(n,0):Xl(t,e,r).disconnect(n,0,s):r===void 0?e.forEach(i=>i.disconnect(n)):Xl(t,e,r).disconnect(n,0),t2={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},n2=(t,e,n,r,s,i,o,a)=>class extends t{constructor(u,c){const h=i(u),d={...t2,...c},p=r(h,d),m=o(h),y=m?n():null;super(u,!1,p,y),this._attack=e(this,m,p.attack),this._knee=e(this,m,p.knee),this._nativeDynamicsCompressorNode=p,this._ratio=e(this,m,p.ratio),this._release=e(this,m,p.release),this._threshold=e(this,m,p.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(u){const c=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=u,u>2)throw this._nativeDynamicsCompressorNode.channelCount=c,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(u){const c=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=u,u==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=c,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},r2=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let u=n(a);const c=Nt(u,l);if(!c){const h={attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value};u=e(l,h)}return i.set(l,u),c?(await t(l,a.attack,u.attack),await t(l,a.knee,u.knee),await t(l,a.ratio,u.ratio),await t(l,a.release,u.release),await t(l,a.threshold,u.threshold)):(await r(l,a.attack,u.attack),await r(l,a.knee,u.knee),await r(l,a.ratio,u.ratio),await r(l,a.release,u.release),await r(l,a.threshold,u.threshold)),await s(a,l,u),u};return{render(a,l){const u=i.get(l);return u!==void 0?Promise.resolve(u):o(a,l)}}},s2=()=>new DOMException("","EncodingError"),i2=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}const s=t.document.head;if(s===null)r(new SyntaxError);else{const i=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=t.onerror,u=()=>{t.onerror=l,URL.revokeObjectURL(a)};t.onerror=(c,h,d,p,m)=>{if(h===a||h===t.location.href&&d===1&&p===1)return u(),r(m),!1;if(l!==null)return l(c,h,d,p,m)},i.onerror=()=>{u(),r(new SyntaxError)},i.onload=()=>{u(),n()},i.src=a,i.type="module",s.appendChild(i)}}),o2=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,s){if(r!==null){let i=this._listeners.get(r);i===void 0&&(i=t(this,r),typeof r=="function"&&this._listeners.set(r,i)),this._nativeEventTarget.addEventListener(n,i,s)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,s){const i=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,s)}},a2=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},l2=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},u2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},c2=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const u=s(a),c={...u2,...l},h=r(u,c),d=i(u),p=d?n():null;super(a,!1,h,p),this._gain=e(this,d,h.gain,Ot,$t)}get gain(){return this._gain}},h2=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let u=n(a);const c=Nt(u,l);if(!c){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value};u=e(l,h)}return i.set(l,u),c?await t(l,a.gain,u.gain):await r(l,a.gain,u.gain),await s(a,l,u),u};return{render(a,l){const u=i.get(l);return u!==void 0?Promise.resolve(u):o(a,l)}}},d2=(t,e)=>n=>e(t,n),f2=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},p2=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},m2=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},g2=t=>e=>t.get(e),rt=()=>new DOMException("","InvalidStateError"),y2=t=>e=>{const n=t.get(e);if(n===void 0)throw rt();return n},v2=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r},_2=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},yh=()=>new DOMException("","InvalidAccessError"),w2=t=>{t.getFrequencyResponse=(e=>(n,r,s)=>{if(n.length!==r.length||r.length!==s.length)throw yh();return e.call(t,n,r,s)})(t.getFrequencyResponse)},T2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},S2=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const u=r(a),c=s(u),h={...T2,...l},d=e(u,c?null:a.baseLatency,h),p=c?n(h.feedback,h.feedforward):null;super(a,!1,d,p),w2(d),this._nativeIIRFilterNode=d,i(this,1)}getFrequencyResponse(a,l,u){return this._nativeIIRFilterNode.getFrequencyResponse(a,l,u)}},MS=(t,e,n,r,s,i,o,a,l,u,c)=>{const h=u.length;let d=a;for(let p=0;p<h;p+=1){let m=n[0]*u[p];for(let y=1;y<s;y+=1){const w=d-y&l-1;m+=n[y]*i[w],m-=t[y]*o[w]}for(let y=s;y<r;y+=1)m+=n[y]*i[d-y&l-1];for(let y=s;y<e;y+=1)m-=t[y]*o[d-y&l-1];i[d]=u[p],o[d]=m,d=d+1&l-1,c[p]=m}return d},E2=(t,e,n,r)=>{const s=n instanceof Float64Array?n:new Float64Array(n),i=r instanceof Float64Array?r:new Float64Array(r),o=s.length,a=i.length,l=Math.min(o,a);if(s[0]!==1){for(let m=0;m<o;m+=1)i[m]/=s[0];for(let m=1;m<a;m+=1)s[m]/=s[0]}const u=32,c=new Float32Array(u),h=new Float32Array(u),d=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),p=t.numberOfChannels;for(let m=0;m<p;m+=1){const y=t.getChannelData(m),w=d.getChannelData(m);c.fill(0),h.fill(0),MS(s,o,i,a,l,c,h,0,u,y,w)}return d},k2=(t,e,n,r,s)=>(i,o)=>{const a=new WeakMap;let l=null;const u=async(c,h)=>{let d=null,p=e(c);const m=Nt(p,h);if(h.createIIRFilter===void 0?d=t(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):m||(p=h.createIIRFilter(o,i)),a.set(h,d===null?p:d),d!==null){if(l===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const w=new n(c.context.destination.channelCount,c.context.length,h.sampleRate);l=(async()=>{await r(c,w,w.destination);const f=await s(w);return E2(f,h,i,o)})()}const y=await l;return d.buffer=y,d.start(0),d}return await r(c,h,p),p};return{render(c,h){const d=a.get(h);return d!==void 0?Promise.resolve(d):u(c,h)}}},C2=(t,e,n,r,s,i)=>o=>(a,l)=>{const u=t.get(a);if(u===void 0){if(!o&&i(a)){const c=r(a),{outputs:h}=n(a);for(const d of h)if(fl(d)){const p=r(d[0]);e(c,p,d[1],d[2])}else{const p=s(d[0]);c.disconnect(p,d[1])}}t.set(a,l)}else t.set(a,u+l)},I2=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},A2=(t,e)=>n=>t.has(n)||e(n),N2=(t,e)=>n=>t.has(n)||e(n),x2=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},O2=t=>e=>t!==null&&e instanceof t,R2=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,D2=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,P2=(t,e)=>n=>t(n)||e(n),M2=t=>e=>t!==null&&e instanceof t,b2=t=>t!==null&&t.isSecureContext,L2=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i),l=e(a,o);if(r(a))throw TypeError();super(i,!0,l,null),this._nativeMediaElementAudioSourceNode=l}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},F2={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},V2=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i);if(r(a))throw new TypeError;const l={...F2,...o},u=e(a,l);super(i,!1,u,null),this._nativeMediaStreamAudioDestinationNode=u}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},$2=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i),l=e(a,o);if(r(a))throw new TypeError;super(i,!0,l,null),this._nativeMediaStreamAudioSourceNode=l}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},U2=(t,e,n)=>class extends t{constructor(s,i){const o=n(s),a=e(o,i);super(s,!0,a,null)}},j2=(t,e,n,r,s,i)=>class extends n{constructor(a,l){super(a),this._nativeContext=a,mh.set(this,a),r(a)&&s.set(a,new Set),this._destination=new t(this,l),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const l=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=l;const u=this._nativeContext.onstatechange;this._onstatechange=u!==null&&u===l?a:u}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},$a=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},B2=(t,e)=>(n,r,s)=>{const i=new Set;return n.connect=(o=>(a,l=0,u=0)=>{const c=i.size===0;if(e(a))return o.call(n,a,l,u),t(i,[a,l,u],h=>h[0]===a&&h[1]===l&&h[2]===u,!0),c&&r(),a;o.call(n,a,l),t(i,[a,l],h=>h[0]===a&&h[1]===l,!0),c&&r()})(n.connect),n.disconnect=(o=>(a,l,u)=>{const c=i.size>0;if(a===void 0)o.apply(n),i.clear();else if(typeof a=="number"){o.call(n,a);for(const d of i)d[1]===a&&i.delete(d)}else{e(a)?o.call(n,a,l,u):o.call(n,a,l);for(const d of i)d[0]===a&&(l===void 0||d[1]===l)&&(u===void 0||d[2]===u)&&i.delete(d)}const h=i.size===0;c&&h&&s()})(n.disconnect),n},ke=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)},Xe=(t,e)=>{ke(t,e,"channelCount"),ke(t,e,"channelCountMode"),ke(t,e,"channelInterpretation")},l_=t=>typeof t.getFloatTimeDomainData=="function",z2=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const r=Math.max(n.length,t.fftSize);for(let s=0;s<r;s+=1)e[s]=(n[s]-128)*.0078125;return e}},W2=(t,e)=>(n,r)=>{const s=n.createAnalyser();if(Xe(s,r),!(r.maxDecibels>r.minDecibels))throw e();return ke(s,r,"fftSize"),ke(s,r,"maxDecibels"),ke(s,r,"minDecibels"),ke(s,r,"smoothingTimeConstant"),t(l_,()=>l_(s))||z2(s),s},q2=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,Me=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)},H2=t=>{t.start=(e=>{let n=!1;return(r=0,s=0,i)=>{if(n)throw rt();e.call(t,r,s,i),n=!0}})(t.start)},eg=t=>{t.start=(e=>(n=0,r=0,s)=>{if(typeof s=="number"&&s<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,s)})(t.start)},tg=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},G2=(t,e,n,r,s,i,o,a,l,u,c)=>(h,d)=>{const p=h.createBufferSource();return Xe(p,d),Me(p,d,"playbackRate"),ke(p,d,"buffer"),ke(p,d,"loop"),ke(p,d,"loopEnd"),ke(p,d,"loopStart"),e(n,()=>n(h))||H2(p),e(r,()=>r(h))||l(p),e(s,()=>s(h))||u(p,h),e(i,()=>i(h))||eg(p),e(o,()=>o(h))||c(p,h),e(a,()=>a(h))||tg(p),t(h,p),p},K2=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,Q2=(t,e)=>(n,r,s)=>{const i=n.destination;if(i.channelCount!==r)try{i.channelCount=r}catch{}s&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:r});const o=t(n,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>l=>{a.call(o,l);try{i.channelCount=l}catch(u){if(l>i.maxChannelCount)throw u}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>l=>{a.call(o,l),i.channelCountMode=l}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>l=>{a.call(o,l),i.channelInterpretation=l}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},X2=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,Y2=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},J2=(t,e,n,r,s)=>(i,o,a,l,u,c)=>{if(a!==null)try{const h=new a(i,l,c),d=new Map;let p=null;if(Object.defineProperties(h,{channelCount:{get:()=>c.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>p,set:m=>{typeof p=="function"&&h.removeEventListener("processorerror",p),p=typeof m=="function"?m:null,typeof p=="function"&&h.addEventListener("processorerror",p)}}}),h.addEventListener=(m=>(...y)=>{if(y[0]==="processorerror"){const w=typeof y[1]=="function"?y[1]:typeof y[1]=="object"&&y[1]!==null&&typeof y[1].handleEvent=="function"?y[1].handleEvent:null;if(w!==null){const f=d.get(y[1]);f!==void 0?y[1]=f:(y[1]=g=>{g.type==="error"?(Object.defineProperties(g,{type:{value:"processorerror"}}),w(g)):w(new ErrorEvent(y[0],{...g}))},d.set(w,y[1]))}}return m.call(h,"error",y[1],y[2]),m.call(h,...y)})(h.addEventListener),h.removeEventListener=(m=>(...y)=>{if(y[0]==="processorerror"){const w=d.get(y[1]);w!==void 0&&(d.delete(y[1]),y[1]=w)}return m.call(h,"error",y[1],y[2]),m.call(h,y[0],y[1],y[2])})(h.removeEventListener),c.numberOfOutputs!==0){const m=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(m).connect(i.destination),s(h,()=>m.disconnect(),()=>m.connect(i.destination))}return h}catch(h){throw h.code===11?r():h}if(u===void 0)throw r();return Y2(c),e(i,o,u,c)},bS=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),Z2=t=>new Promise((e,n)=>{const{port1:r,port2:s}=new MessageChannel;r.onmessage=({data:i})=>{r.close(),s.close(),e(i)},r.onmessageerror=({data:i})=>{r.close(),s.close(),n(i)},s.postMessage(t)}),eb=async(t,e)=>{const n=await Z2(e);return new t(n)},tb=(t,e,n,r)=>{let s=Jf.get(t);s===void 0&&(s=new WeakMap,Jf.set(t,s));const i=eb(n,r);return s.set(e,i),i},nb=(t,e,n,r,s,i,o,a,l,u,c,h,d)=>(p,m,y,w)=>{if(w.numberOfInputs===0&&w.numberOfOutputs===0)throw l();const f=Array.isArray(w.outputChannelCount)?w.outputChannelCount:Array.from(w.outputChannelCount);if(f.some(V=>V<1))throw l();if(f.length!==w.numberOfOutputs)throw e();if(w.channelCountMode!=="explicit")throw l();const g=w.channelCount*w.numberOfInputs,v=f.reduce((V,G)=>V+G,0),E=y.parameterDescriptors===void 0?0:y.parameterDescriptors.length;if(g+E>6||v>6)throw l();const _=new MessageChannel,S=[],k=[];for(let V=0;V<w.numberOfInputs;V+=1)S.push(o(p,{channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:1})),k.push(s(p,{channelCount:w.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:w.channelCount}));const T=[];if(y.parameterDescriptors!==void 0)for(const{defaultValue:V,maxValue:G,minValue:Ge,name:Ie}of y.parameterDescriptors){const ce=i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:w.parameterData[Ie]!==void 0?w.parameterData[Ie]:V===void 0?0:V});Object.defineProperties(ce.offset,{defaultValue:{get:()=>V===void 0?0:V},maxValue:{get:()=>G===void 0?Ot:G},minValue:{get:()=>Ge===void 0?$t:Ge}}),T.push(ce)}const I=r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,g+E)}),C=bS(m,p.sampleRate),N=a(p,C,g+E,Math.max(1,v)),A=s(p,{channelCount:Math.max(1,v),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,v)}),L=[];for(let V=0;V<w.numberOfOutputs;V+=1)L.push(r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:f[V]}));for(let V=0;V<w.numberOfInputs;V+=1){S[V].connect(k[V]);for(let G=0;G<w.channelCount;G+=1)k[V].connect(I,G,V*w.channelCount+G)}const F=new DS(y.parameterDescriptors===void 0?[]:y.parameterDescriptors.map(({name:V},G)=>{const Ge=T[G];return Ge.connect(I,0,g+G),Ge.start(0),[V,Ge.offset]}));I.connect(N);let W=w.channelInterpretation,j=null;const B=w.numberOfOutputs===0?[N]:L,x={get bufferSize(){return C},get channelCount(){return w.channelCount},set channelCount(V){throw n()},get channelCountMode(){return w.channelCountMode},set channelCountMode(V){throw n()},get channelInterpretation(){return W},set channelInterpretation(V){for(const G of S)G.channelInterpretation=V;W=V},get context(){return N.context},get inputs(){return S},get numberOfInputs(){return w.numberOfInputs},get numberOfOutputs(){return w.numberOfOutputs},get onprocessorerror(){return j},set onprocessorerror(V){typeof j=="function"&&x.removeEventListener("processorerror",j),j=typeof V=="function"?V:null,typeof j=="function"&&x.addEventListener("processorerror",j)},get parameters(){return F},get port(){return _.port2},addEventListener(...V){return N.addEventListener(V[0],V[1],V[2])},connect:t.bind(null,B),disconnect:u.bind(null,B),dispatchEvent(...V){return N.dispatchEvent(V[0])},removeEventListener(...V){return N.removeEventListener(V[0],V[1],V[2])}},R=new Map;_.port1.addEventListener=(V=>(...G)=>{if(G[0]==="message"){const Ge=typeof G[1]=="function"?G[1]:typeof G[1]=="object"&&G[1]!==null&&typeof G[1].handleEvent=="function"?G[1].handleEvent:null;if(Ge!==null){const Ie=R.get(G[1]);Ie!==void 0?G[1]=Ie:(G[1]=ce=>{c(p.currentTime,p.sampleRate,()=>Ge(ce))},R.set(Ge,G[1]))}}return V.call(_.port1,G[0],G[1],G[2])})(_.port1.addEventListener),_.port1.removeEventListener=(V=>(...G)=>{if(G[0]==="message"){const Ge=R.get(G[1]);Ge!==void 0&&(R.delete(G[1]),G[1]=Ge)}return V.call(_.port1,G[0],G[1],G[2])})(_.port1.removeEventListener);let M=null;Object.defineProperty(_.port1,"onmessage",{get:()=>M,set:V=>{typeof M=="function"&&_.port1.removeEventListener("message",M),M=typeof V=="function"?V:null,typeof M=="function"&&(_.port1.addEventListener("message",M),_.port1.start())}}),y.prototype.port=_.port1;let $=null;tb(p,x,y,w).then(V=>$=V);const Ye=Sc(w.numberOfInputs,w.channelCount),Fe=Sc(w.numberOfOutputs,f),J=y.parameterDescriptors===void 0?[]:y.parameterDescriptors.reduce((V,{name:G})=>({...V,[G]:new Float32Array(128)}),{});let le=!0;const Ue=()=>{w.numberOfOutputs>0&&N.disconnect(A);for(let V=0,G=0;V<w.numberOfOutputs;V+=1){const Ge=L[V];for(let Ie=0;Ie<f[V];Ie+=1)A.disconnect(Ge,G+Ie,Ie);G+=f[V]}},z=new Map;N.onaudioprocess=({inputBuffer:V,outputBuffer:G})=>{if($!==null){const Ge=h(x);for(let Ie=0;Ie<C;Ie+=128){for(let ce=0;ce<w.numberOfInputs;ce+=1)for(let De=0;De<w.channelCount;De+=1)Tc(V,Ye[ce],De,De,Ie);y.parameterDescriptors!==void 0&&y.parameterDescriptors.forEach(({name:ce},De)=>{Tc(V,J,ce,g+De,Ie)});for(let ce=0;ce<w.numberOfInputs;ce+=1)for(let De=0;De<f[ce];De+=1)Fe[ce][De].byteLength===0&&(Fe[ce][De]=new Float32Array(128));try{const ce=Ye.map((rn,Sr)=>{if(Ge[Sr].size>0)return z.set(Sr,C/128),rn;const Mh=z.get(Sr);return Mh===void 0?[]:(rn.every(IE=>IE.every(AE=>AE===0))&&(Mh===1?z.delete(Sr):z.set(Sr,Mh-1)),rn)});le=c(p.currentTime+Ie/p.sampleRate,p.sampleRate,()=>$.process(ce,Fe,J));for(let rn=0,Sr=0;rn<w.numberOfOutputs;rn+=1){for(let To=0;To<f[rn];To+=1)PS(G,Fe[rn],To,Sr+To,Ie);Sr+=f[rn]}}catch(ce){le=!1,x.dispatchEvent(new ErrorEvent("processorerror",{colno:ce.colno,filename:ce.filename,lineno:ce.lineno,message:ce.message}))}if(!le){for(let ce=0;ce<w.numberOfInputs;ce+=1){S[ce].disconnect(k[ce]);for(let De=0;De<w.channelCount;De+=1)k[Ie].disconnect(I,De,ce*w.channelCount+De)}if(y.parameterDescriptors!==void 0){const ce=y.parameterDescriptors.length;for(let De=0;De<ce;De+=1){const rn=T[De];rn.disconnect(I,0,g+De),rn.stop()}}I.disconnect(N),N.onaudioprocess=null,cs?Ue():Xs();break}}}};let cs=!1;const hs=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Qs=()=>N.connect(hs).connect(p.destination),Xs=()=>{N.disconnect(hs),hs.disconnect()},kE=()=>{if(le){Xs(),w.numberOfOutputs>0&&N.connect(A);for(let V=0,G=0;V<w.numberOfOutputs;V+=1){const Ge=L[V];for(let Ie=0;Ie<f[V];Ie+=1)A.connect(Ge,G+Ie,Ie);G+=f[V]}}cs=!0},CE=()=>{le&&(Qs(),Ue()),cs=!1};return Qs(),d(x,kE,CE)},LS=(t,e)=>{const n=t.createBiquadFilter();return Xe(n,e),Me(n,e,"Q"),Me(n,e,"detune"),Me(n,e,"frequency"),Me(n,e,"gain"),ke(n,e,"type"),n},rb=(t,e)=>(n,r)=>{const s=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,s),Xe(s,r),s},sb=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw rt()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw rt()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw rt()}})},pl=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Xe(n,e),sb(n),n},ib=(t,e,n,r,s)=>(i,o)=>{if(i.createConstantSource===void 0)return n(i,o);const a=i.createConstantSource();return Xe(a,o),Me(a,o,"offset"),e(r,()=>r(i))||eg(a),e(s,()=>s(i))||tg(a),t(i,a),a},mo=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),ob=(t,e,n,r)=>(s,{offset:i,...o})=>{const a=s.createBuffer(1,2,44100),l=e(s,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=n(s,{...o,gain:i}),c=a.getChannelData(0);c[0]=1,c[1]=1,l.buffer=a,l.loop=!0;const h={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(m){u.channelCount=m},get channelCountMode(){return u.channelCountMode},set channelCountMode(m){u.channelCountMode=m},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(m){u.channelInterpretation=m},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return l.onended},set onended(m){l.onended=m},addEventListener(...m){return l.addEventListener(m[0],m[1],m[2])},dispatchEvent(...m){return l.dispatchEvent(m[0])},removeEventListener(...m){return l.removeEventListener(m[0],m[1],m[2])},start(m=0){l.start.call(l,m)},stop(m=0){l.stop.call(l,m)}},d=()=>l.connect(u),p=()=>l.disconnect(u);return t(s,l),r(mo(h,u),d,p)},ab=(t,e)=>(n,r)=>{const s=n.createConvolver();if(Xe(s,r),r.disableNormalization===s.normalize&&(s.normalize=!r.disableNormalization),ke(s,r,"buffer"),r.channelCount>2||(e(s,"channelCount",i=>()=>i.call(s),i=>o=>{if(o>2)throw t();return i.call(s,o)}),r.channelCountMode==="max"))throw t();return e(s,"channelCountMode",i=>()=>i.call(s),i=>o=>{if(o==="max")throw t();return i.call(s,o)}),s},FS=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Xe(n,e),Me(n,e,"delayTime"),n},lb=t=>(e,n)=>{const r=e.createDynamicsCompressor();if(Xe(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return Me(r,n,"attack"),Me(r,n,"knee"),Me(r,n,"ratio"),Me(r,n,"release"),Me(r,n,"threshold"),r},Ht=(t,e)=>{const n=t.createGain();return Xe(n,e),Me(n,e,"gain"),n},ub=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);const s=e.createIIRFilter(r.feedforward,r.feedback);return Xe(s,r),s};function cb(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function hb(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function u_(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=hb(n,e),n[0]+=t[r];return n}const db=(t,e,n,r)=>(s,i,{channelCount:o,channelCountMode:a,channelInterpretation:l,feedback:u,feedforward:c})=>{const h=bS(i,s.sampleRate),d=u instanceof Float64Array?u:new Float64Array(u),p=c instanceof Float64Array?c:new Float64Array(c),m=d.length,y=p.length,w=Math.min(m,y);if(m===0||m>20)throw r();if(d[0]===0)throw e();if(y===0||y>20)throw r();if(p[0]===0)throw e();if(d[0]!==1){for(let T=0;T<y;T+=1)p[T]/=d[0];for(let T=1;T<m;T+=1)d[T]/=d[0]}const f=n(s,h,o,o);f.channelCount=o,f.channelCountMode=a,f.channelInterpretation=l;const g=32,v=[],E=[],_=[];for(let T=0;T<o;T+=1){v.push(0);const I=new Float32Array(g),C=new Float32Array(g);I.fill(0),C.fill(0),E.push(I),_.push(C)}f.onaudioprocess=T=>{const I=T.inputBuffer,C=T.outputBuffer,N=I.numberOfChannels;for(let A=0;A<N;A+=1){const L=I.getChannelData(A),F=C.getChannelData(A);v[A]=MS(d,m,p,y,w,E[A],_[A],v[A],g,L,F)}};const S=s.sampleRate/2;return mo({get bufferSize(){return h},get channelCount(){return f.channelCount},set channelCount(T){f.channelCount=T},get channelCountMode(){return f.channelCountMode},set channelCountMode(T){f.channelCountMode=T},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(T){f.channelInterpretation=T},get context(){return f.context},get inputs(){return[f]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},addEventListener(...T){return f.addEventListener(T[0],T[1],T[2])},dispatchEvent(...T){return f.dispatchEvent(T[0])},getFrequencyResponse(T,I,C){if(T.length!==I.length||I.length!==C.length)throw t();const N=T.length;for(let A=0;A<N;A+=1){const L=-Math.PI*(T[A]/S),F=[Math.cos(L),Math.sin(L)],W=u_(p,F),j=u_(d,F),B=cb(W,j);I[A]=Math.sqrt(B[0]*B[0]+B[1]*B[1]),C[A]=Math.atan2(B[1],B[0])}},removeEventListener(...T){return f.removeEventListener(T[0],T[1],T[2])}},f)},fb=(t,e)=>t.createMediaElementSource(e.mediaElement),pb=(t,e)=>{const n=t.createMediaStreamDestination();return Xe(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},mb=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const r=n.slice(0,1),s=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(s,"mediaStream",{value:e}),s},gb=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);const s=new MediaStream([r]),i=n.createMediaStreamSource(s);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return i},yb=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,vb=(t,e,n,r,s,i)=>(o,a)=>{const l=o.createOscillator();return Xe(l,a),Me(l,a,"detune"),Me(l,a,"frequency"),a.periodicWave!==void 0?l.setPeriodicWave(a.periodicWave):ke(l,a,"type"),e(n,()=>n(o))||eg(l),e(r,()=>r(o))||i(l,o),e(s,()=>s(o))||tg(l),t(o,l),l},_b=t=>(e,n)=>{const r=e.createPanner();return r.orientationX===void 0?t(e,n):(Xe(r,n),Me(r,n,"orientationX"),Me(r,n,"orientationY"),Me(r,n,"orientationZ"),Me(r,n,"positionX"),Me(r,n,"positionY"),Me(r,n,"positionZ"),ke(r,n,"coneInnerAngle"),ke(r,n,"coneOuterAngle"),ke(r,n,"coneOuterGain"),ke(r,n,"distanceModel"),ke(r,n,"maxDistance"),ke(r,n,"panningModel"),ke(r,n,"refDistance"),ke(r,n,"rolloffFactor"),r)},wb=(t,e,n,r,s,i,o,a,l,u)=>(c,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:p,distanceModel:m,maxDistance:y,orientationX:w,orientationY:f,orientationZ:g,panningModel:v,positionX:E,positionY:_,positionZ:S,refDistance:k,rolloffFactor:T,...I})=>{const C=c.createPanner();if(I.channelCount>2||I.channelCountMode==="max")throw o();Xe(C,I);const N={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},A=n(c,{...N,channelInterpretation:"speakers",numberOfInputs:6}),L=r(c,{...I,gain:1}),F=r(c,{...N,gain:1}),W=r(c,{...N,gain:0}),j=r(c,{...N,gain:0}),B=r(c,{...N,gain:0}),x=r(c,{...N,gain:0}),R=r(c,{...N,gain:0}),M=s(c,256,6,1),$=i(c,{...N,curve:new Float32Array([1,1]),oversample:"none"});let H=[w,f,g],Ye=[E,_,S];const Fe=new Float32Array(1);M.onaudioprocess=({inputBuffer:z})=>{const cs=[l(z,Fe,0),l(z,Fe,1),l(z,Fe,2)];cs.some((Qs,Xs)=>Qs!==H[Xs])&&(C.setOrientation(...cs),H=cs);const hs=[l(z,Fe,3),l(z,Fe,4),l(z,Fe,5)];hs.some((Qs,Xs)=>Qs!==Ye[Xs])&&(C.setPosition(...hs),Ye=hs)},Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(j.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0}),Object.defineProperty(x.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0});const J={get bufferSize(){},get channelCount(){return C.channelCount},set channelCount(z){if(z>2)throw o();L.channelCount=z,C.channelCount=z},get channelCountMode(){return C.channelCountMode},set channelCountMode(z){if(z==="max")throw o();L.channelCountMode=z,C.channelCountMode=z},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(z){L.channelInterpretation=z,C.channelInterpretation=z},get coneInnerAngle(){return C.coneInnerAngle},set coneInnerAngle(z){C.coneInnerAngle=z},get coneOuterAngle(){return C.coneOuterAngle},set coneOuterAngle(z){C.coneOuterAngle=z},get coneOuterGain(){return C.coneOuterGain},set coneOuterGain(z){if(z<0||z>1)throw e();C.coneOuterGain=z},get context(){return C.context},get distanceModel(){return C.distanceModel},set distanceModel(z){C.distanceModel=z},get inputs(){return[L]},get maxDistance(){return C.maxDistance},set maxDistance(z){if(z<0)throw new RangeError;C.maxDistance=z},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get orientationX(){return F.gain},get orientationY(){return W.gain},get orientationZ(){return j.gain},get panningModel(){return C.panningModel},set panningModel(z){C.panningModel=z},get positionX(){return B.gain},get positionY(){return x.gain},get positionZ(){return R.gain},get refDistance(){return C.refDistance},set refDistance(z){if(z<0)throw new RangeError;C.refDistance=z},get rolloffFactor(){return C.rolloffFactor},set rolloffFactor(z){if(z<0)throw new RangeError;C.rolloffFactor=z},addEventListener(...z){return L.addEventListener(z[0],z[1],z[2])},dispatchEvent(...z){return L.dispatchEvent(z[0])},removeEventListener(...z){return L.removeEventListener(z[0],z[1],z[2])}};h!==J.coneInnerAngle&&(J.coneInnerAngle=h),d!==J.coneOuterAngle&&(J.coneOuterAngle=d),p!==J.coneOuterGain&&(J.coneOuterGain=p),m!==J.distanceModel&&(J.distanceModel=m),y!==J.maxDistance&&(J.maxDistance=y),w!==J.orientationX.value&&(J.orientationX.value=w),f!==J.orientationY.value&&(J.orientationY.value=f),g!==J.orientationZ.value&&(J.orientationZ.value=g),v!==J.panningModel&&(J.panningModel=v),E!==J.positionX.value&&(J.positionX.value=E),_!==J.positionY.value&&(J.positionY.value=_),S!==J.positionZ.value&&(J.positionZ.value=S),k!==J.refDistance&&(J.refDistance=k),T!==J.rolloffFactor&&(J.rolloffFactor=T),(H[0]!==1||H[1]!==0||H[2]!==0)&&C.setOrientation(...H),(Ye[0]!==0||Ye[1]!==0||Ye[2]!==0)&&C.setPosition(...Ye);const le=()=>{L.connect(C),t(L,$,0,0),$.connect(F).connect(A,0,0),$.connect(W).connect(A,0,1),$.connect(j).connect(A,0,2),$.connect(B).connect(A,0,3),$.connect(x).connect(A,0,4),$.connect(R).connect(A,0,5),A.connect(M).connect(c.destination)},Ue=()=>{L.disconnect(C),a(L,$,0,0),$.disconnect(F),F.disconnect(A),$.disconnect(W),W.disconnect(A),$.disconnect(j),j.disconnect(A),$.disconnect(B),B.disconnect(A),$.disconnect(x),x.disconnect(A),$.disconnect(R),R.disconnect(A),A.disconnect(M),M.disconnect(c.destination)};return u(mo(J,C),le,Ue)},Tb=t=>(e,{disableNormalization:n,imag:r,real:s})=>{const i=r instanceof Float32Array?r:new Float32Array(r),o=s instanceof Float32Array?s:new Float32Array(s),a=e.createPeriodicWave(o,i,{disableNormalization:n});if(Array.from(r).length<2)throw t();return a},ml=(t,e,n,r)=>t.createScriptProcessor(e,n,r),Sb=(t,e)=>(n,r)=>{const s=r.channelCountMode;if(s==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);const i=n.createStereoPanner();return Xe(i,r),Me(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>s,set:o=>{if(o!==s)throw e()}}),i},Eb=(t,e,n,r,s,i)=>{const a=new Float32Array([1,1]),l=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},c={...u,oversample:"none"},h=(m,y,w,f)=>{const g=new Float32Array(16385),v=new Float32Array(16385);for(let I=0;I<16385;I+=1){const C=I/16384*l;g[I]=Math.cos(C),v[I]=Math.sin(C)}const E=n(m,{...u,gain:0}),_=r(m,{...c,curve:g}),S=r(m,{...c,curve:a}),k=n(m,{...u,gain:0}),T=r(m,{...c,curve:v});return{connectGraph(){y.connect(E),y.connect(S.inputs===void 0?S:S.inputs[0]),y.connect(k),S.connect(w),w.connect(_.inputs===void 0?_:_.inputs[0]),w.connect(T.inputs===void 0?T:T.inputs[0]),_.connect(E.gain),T.connect(k.gain),E.connect(f,0,0),k.connect(f,0,1)},disconnectGraph(){y.disconnect(E),y.disconnect(S.inputs===void 0?S:S.inputs[0]),y.disconnect(k),S.disconnect(w),w.disconnect(_.inputs===void 0?_:_.inputs[0]),w.disconnect(T.inputs===void 0?T:T.inputs[0]),_.disconnect(E.gain),T.disconnect(k.gain),E.disconnect(f,0,0),k.disconnect(f,0,1)}}},d=(m,y,w,f)=>{const g=new Float32Array(16385),v=new Float32Array(16385),E=new Float32Array(16385),_=new Float32Array(16385),S=Math.floor(16385/2);for(let B=0;B<16385;B+=1)if(B>S){const x=(B-S)/(16384-S)*l;g[B]=Math.cos(x),v[B]=Math.sin(x),E[B]=0,_[B]=1}else{const x=B/(16384-S)*l;g[B]=1,v[B]=0,E[B]=Math.cos(x),_[B]=Math.sin(x)}const k=e(m,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),T=n(m,{...u,gain:0}),I=r(m,{...c,curve:g}),C=n(m,{...u,gain:0}),N=r(m,{...c,curve:v}),A=r(m,{...c,curve:a}),L=n(m,{...u,gain:0}),F=r(m,{...c,curve:E}),W=n(m,{...u,gain:0}),j=r(m,{...c,curve:_});return{connectGraph(){y.connect(k),y.connect(A.inputs===void 0?A:A.inputs[0]),k.connect(T,0),k.connect(C,0),k.connect(L,1),k.connect(W,1),A.connect(w),w.connect(I.inputs===void 0?I:I.inputs[0]),w.connect(N.inputs===void 0?N:N.inputs[0]),w.connect(F.inputs===void 0?F:F.inputs[0]),w.connect(j.inputs===void 0?j:j.inputs[0]),I.connect(T.gain),N.connect(C.gain),F.connect(L.gain),j.connect(W.gain),T.connect(f,0,0),L.connect(f,0,0),C.connect(f,0,1),W.connect(f,0,1)},disconnectGraph(){y.disconnect(k),y.disconnect(A.inputs===void 0?A:A.inputs[0]),k.disconnect(T,0),k.disconnect(C,0),k.disconnect(L,1),k.disconnect(W,1),A.disconnect(w),w.disconnect(I.inputs===void 0?I:I.inputs[0]),w.disconnect(N.inputs===void 0?N:N.inputs[0]),w.disconnect(F.inputs===void 0?F:F.inputs[0]),w.disconnect(j.inputs===void 0?j:j.inputs[0]),I.disconnect(T.gain),N.disconnect(C.gain),F.disconnect(L.gain),j.disconnect(W.gain),T.disconnect(f,0,0),L.disconnect(f,0,0),C.disconnect(f,0,1),W.disconnect(f,0,1)}}},p=(m,y,w,f,g)=>{if(y===1)return h(m,w,f,g);if(y===2)return d(m,w,f,g);throw s()};return(m,{channelCount:y,channelCountMode:w,pan:f,...g})=>{if(w==="max")throw s();const v=t(m,{...g,channelCount:1,channelCountMode:w,numberOfInputs:2}),E=n(m,{...g,channelCount:y,channelCountMode:w,gain:1}),_=n(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:f});let{connectGraph:S,disconnectGraph:k}=p(m,y,E,_,v);Object.defineProperty(_.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_.gain,"maxValue",{get:()=>1}),Object.defineProperty(_.gain,"minValue",{get:()=>-1});const T={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(A){E.channelCount!==A&&(I&&k(),{connectGraph:S,disconnectGraph:k}=p(m,A,E,_,v),I&&S()),E.channelCount=A},get channelCountMode(){return E.channelCountMode},set channelCountMode(A){if(A==="clamped-max"||A==="max")throw s();E.channelCountMode=A},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(A){E.channelInterpretation=A},get context(){return E.context},get inputs(){return[E]},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get pan(){return _.gain},addEventListener(...A){return E.addEventListener(A[0],A[1],A[2])},dispatchEvent(...A){return E.dispatchEvent(A[0])},removeEventListener(...A){return E.removeEventListener(A[0],A[1],A[2])}};let I=!1;const C=()=>{S(),I=!0},N=()=>{k(),I=!1};return i(mo(T,v),C,N)}},kb=(t,e,n,r,s,i,o)=>(a,l)=>{const u=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,l);Xe(u,l);const c=l.curve===null||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(c!==null&&c.length<2)throw e();ke(u,{curve:c},"curve"),ke(u,l,"oversample");let h=null,d=!1;return o(u,"curve",y=>()=>y.call(u),y=>w=>(y.call(u,w),d&&(r(w)&&h===null?h=t(a,u):!r(w)&&h!==null&&(h(),h=null)),w)),s(u,()=>{d=!0,r(u.curve)&&(h=t(a,u))},()=>{d=!1,h!==null&&(h(),h=null)})},Cb=(t,e,n,r,s)=>(i,{curve:o,oversample:a,...l})=>{const u=i.createWaveShaper(),c=i.createWaveShaper();Xe(u,l),Xe(c,l);const h=n(i,{...l,gain:1}),d=n(i,{...l,gain:-1}),p=n(i,{...l,gain:1}),m=n(i,{...l,gain:-1});let y=null,w=!1,f=null;const g={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(_){h.channelCount=_,d.channelCount=_,u.channelCount=_,p.channelCount=_,c.channelCount=_,m.channelCount=_},get channelCountMode(){return u.channelCountMode},set channelCountMode(_){h.channelCountMode=_,d.channelCountMode=_,u.channelCountMode=_,p.channelCountMode=_,c.channelCountMode=_,m.channelCountMode=_},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(_){h.channelInterpretation=_,d.channelInterpretation=_,u.channelInterpretation=_,p.channelInterpretation=_,c.channelInterpretation=_,m.channelInterpretation=_},get context(){return u.context},get curve(){return f},set curve(_){if(_!==null&&_.length<2)throw e();if(_===null)u.curve=_,c.curve=_;else{const S=_.length,k=new Float32Array(S+2-S%2),T=new Float32Array(S+2-S%2);k[0]=_[0],T[0]=-_[S-1];const I=Math.ceil((S+1)/2),C=(S+1)/2-1;for(let N=1;N<I;N+=1){const A=N/I*C,L=Math.floor(A),F=Math.ceil(A);k[N]=L===F?_[L]:(1-(A-L))*_[L]+(1-(F-A))*_[F],T[N]=L===F?-_[S-1-L]:-((1-(A-L))*_[S-1-L])-(1-(F-A))*_[S-1-F]}k[I]=S%2===1?_[I-1]:(_[I-2]+_[I-1])/2,u.curve=k,c.curve=T}f=_,w&&(r(f)&&y===null?y=t(i,h):y!==null&&(y(),y=null))},get inputs(){return[h]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(_){u.oversample=_,c.oversample=_},addEventListener(..._){return h.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return h.dispatchEvent(_[0])},removeEventListener(..._){return h.removeEventListener(_[0],_[1],_[2])}};o!==null&&(g.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==g.oversample&&(g.oversample=a);const v=()=>{h.connect(u).connect(p),h.connect(d).connect(c).connect(m).connect(p),w=!0,r(f)&&(y=t(i,h))},E=()=>{h.disconnect(u),u.disconnect(p),h.disconnect(d),d.disconnect(c),c.disconnect(m),m.disconnect(p),w=!1,y!==null&&(y(),y=null)};return s(mo(g,p),v,E)},Ft=()=>new DOMException("","NotSupportedError"),Ib={numberOfChannels:1},Ab=(t,e,n,r,s)=>class extends t{constructor(o,a,l){let u;if(typeof o=="number"&&a!==void 0&&l!==void 0)u={length:a,numberOfChannels:o,sampleRate:l};else if(typeof o=="object")u=o;else throw new Error("The given parameters are not valid.");const{length:c,numberOfChannels:h,sampleRate:d}={...Ib,...u},p=r(h,c,d);e($a,()=>$a(p))||p.addEventListener("statechange",(()=>{let m=0;const y=w=>{this._state==="running"&&(m>0?(p.removeEventListener("statechange",y),w.stopImmediatePropagation(),this._waitForThePromiseToSettle(w)):m+=1)};return y})()),super(p,h),this._length=c,this._nativeOfflineAudioContext=p,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",s(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,NS(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},Nb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},xb=(t,e,n,r,s,i,o)=>class extends t{constructor(l,u){const c=s(l),h={...Nb,...u},d=n(c,h),p=i(c),m=p?r():null,y=l.sampleRate/2;super(l,!1,d,m),this._detune=e(this,p,d.detune,153600,-153600),this._frequency=e(this,p,d.frequency,y,-y),this._nativeOscillatorNode=d,this._onended=null,this._oscillatorNodeRenderer=m,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?o(this,l):null;this._nativeOscillatorNode.onended=u;const c=this._nativeOscillatorNode.onended;this._onended=c!==null&&c===u?l:c}get type(){return this._nativeOscillatorNode.type}set type(l){this._nativeOscillatorNode.type=l,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(l){this._nativeOscillatorNode.setPeriodicWave(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=l)}start(l=0){if(this._nativeOscillatorNode.start(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=l),this.context.state!=="closed"){Ki(this);const u=()=>{this._nativeOscillatorNode.removeEventListener("ended",u),lr(this)&&hl(this)};this._nativeOscillatorNode.addEventListener("ended",u)}}stop(l=0){this._nativeOscillatorNode.stop(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=l)}},Ob=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null,l=null;const u=async(c,h)=>{let d=n(c);const p=Nt(d,h);if(!p){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:o===null?void 0:o,type:d.type};d=e(h,m),a!==null&&d.start(a),l!==null&&d.stop(l)}return i.set(h,d),p?(await t(h,c.detune,d.detune),await t(h,c.frequency,d.frequency)):(await r(h,c.detune,d.detune),await r(h,c.frequency,d.frequency)),await s(c,h,d),d};return{set periodicWave(c){o=c},set start(c){a=c},set stop(c){l=c},render(c,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):u(c,h)}}},Rb={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Db=(t,e,n,r,s,i,o)=>class extends t{constructor(l,u){const c=s(l),h={...Rb,...u},d=n(c,h),p=i(c),m=p?r():null;super(l,!1,d,m),this._nativePannerNode=d,this._orientationX=e(this,p,d.orientationX,Ot,$t),this._orientationY=e(this,p,d.orientationY,Ot,$t),this._orientationZ=e(this,p,d.orientationZ,Ot,$t),this._positionX=e(this,p,d.positionX,Ot,$t),this._positionY=e(this,p,d.positionY,Ot,$t),this._positionZ=e(this,p,d.positionZ,Ot,$t),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(l){this._nativePannerNode.coneInnerAngle=l}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(l){this._nativePannerNode.coneOuterAngle=l}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(l){this._nativePannerNode.coneOuterGain=l}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(l){this._nativePannerNode.distanceModel=l}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(l){this._nativePannerNode.maxDistance=l}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(l){this._nativePannerNode.panningModel=l}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(l){this._nativePannerNode.refDistance=l}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(l){this._nativePannerNode.rolloffFactor=l}},Pb=(t,e,n,r,s,i,o,a,l,u)=>()=>{const c=new WeakMap;let h=null;const d=async(p,m)=>{let y=null,w=i(p);const f={channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation},g={...f,coneInnerAngle:w.coneInnerAngle,coneOuterAngle:w.coneOuterAngle,coneOuterGain:w.coneOuterGain,distanceModel:w.distanceModel,maxDistance:w.maxDistance,panningModel:w.panningModel,refDistance:w.refDistance,rolloffFactor:w.rolloffFactor},v=Nt(w,m);if("bufferSize"in w)y=r(m,{...f,gain:1});else if(!v){const E={...g,orientationX:w.orientationX.value,orientationY:w.orientationY.value,orientationZ:w.orientationZ.value,positionX:w.positionX.value,positionY:w.positionY.value,positionZ:w.positionZ.value};w=s(m,E)}if(c.set(m,y===null?w:y),y!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const N=new o(6,p.context.length,m.sampleRate),A=e(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});A.connect(N.destination),h=(async()=>{const L=await Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(async(F,W)=>{const j=n(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:W===0?1:0});return await a(N,F,j.offset),j}));for(let F=0;F<6;F+=1)L[F].connect(A,0,F),L[F].start(0);return u(N)})()}const E=await h,_=r(m,{...f,gain:1});await l(p,m,_);const S=[];for(let N=0;N<E.numberOfChannels;N+=1)S.push(E.getChannelData(N));let k=[S[0][0],S[1][0],S[2][0]],T=[S[3][0],S[4][0],S[5][0]],I=r(m,{...f,gain:1}),C=s(m,{...g,orientationX:k[0],orientationY:k[1],orientationZ:k[2],positionX:T[0],positionY:T[1],positionZ:T[2]});_.connect(I).connect(C.inputs[0]),C.connect(y);for(let N=128;N<E.length;N+=128){const A=[S[0][N],S[1][N],S[2][N]],L=[S[3][N],S[4][N],S[5][N]];if(A.some((F,W)=>F!==k[W])||L.some((F,W)=>F!==T[W])){k=A,T=L;const F=N/m.sampleRate;I.gain.setValueAtTime(0,F),I=r(m,{...f,gain:0}),C=s(m,{...g,orientationX:k[0],orientationY:k[1],orientationZ:k[2],positionX:T[0],positionY:T[1],positionZ:T[2]}),I.gain.setValueAtTime(1,F),_.connect(I).connect(C.inputs[0]),C.connect(y)}}return y}return v?(await t(m,p.orientationX,w.orientationX),await t(m,p.orientationY,w.orientationY),await t(m,p.orientationZ,w.orientationZ),await t(m,p.positionX,w.positionX),await t(m,p.positionY,w.positionY),await t(m,p.positionZ,w.positionZ)):(await a(m,p.orientationX,w.orientationX),await a(m,p.orientationY,w.orientationY),await a(m,p.orientationZ,w.orientationZ),await a(m,p.positionX,w.positionX),await a(m,p.positionY,w.positionY),await a(m,p.positionZ,w.positionZ)),po(w)?await l(p,m,w.inputs[0]):await l(p,m,w),w};return{render(p,m){const y=c.get(m);return y!==void 0?Promise.resolve(y):d(p,m)}}},Mb={disableNormalization:!1},bb=(t,e,n,r)=>class VS{constructor(i,o){const a=e(i),l=r({...Mb,...o}),u=t(a,l);return n.add(u),u}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===VS.prototype||n.has(i)}},Lb=(t,e)=>(n,r,s)=>(t(r).replay(s),e(r,n,s)),Fb=(t,e,n)=>async(r,s,i)=>{const o=t(r);await Promise.all(o.activeInputs.map((a,l)=>Array.from(a).map(async([u,c])=>{const d=await e(u).render(u,s),p=r.context.destination;!n(u)&&(r!==p||!n(r))&&d.connect(i,c,l)})).reduce((a,l)=>[...a,...l],[]))},Vb=(t,e,n)=>async(r,s,i)=>{const o=e(r);await Promise.all(Array.from(o.activeInputs).map(async([a,l])=>{const c=await t(a).render(a,s);n(a)||c.connect(i,l)}))},$b=(t,e,n,r)=>s=>t($a,()=>$a(s))?Promise.resolve(t(r,r)).then(i=>{if(!i){const o=n(s,512,0,1);s.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>s.currentTime,o.connect(s.destination)}return s.startRendering()}):new Promise(i=>{const o=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(s.destination),s.startRendering()}),Ub=t=>(e,n)=>{t.set(e,n)},jb=t=>(e,n)=>t.set(e,n),Bb=(t,e,n,r,s,i,o,a)=>(l,u)=>n(l).render(l,u).then(()=>Promise.all(Array.from(r(u)).map(c=>n(c).render(c,u)))).then(()=>s(u)).then(c=>(typeof c.copyFromChannel!="function"?(o(c),Ym(c)):e(i,()=>i(c))||a(c),t.add(c),c)),zb={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Wb=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const u=s(a),c={...zb,...l},h=n(u,c),d=i(u),p=d?r():null;super(a,!1,h,p),this._pan=e(this,d,h.pan)}get pan(){return this._pan}},qb=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let u=n(a);const c=Nt(u,l);if(!c){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value};u=e(l,h)}return i.set(l,u),c?await t(l,a.pan,u.pan):await r(l,a.pan,u.pan),po(u)?await s(a,l,u.inputs[0]):await s(a,l,u),u};return{render(a,l){const u=i.get(l);return u!==void 0?Promise.resolve(u):o(a,l)}}},Hb=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},Gb=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),s=URL.createObjectURL(n);let i=!1,o=!1;try{await r.audioWorklet.addModule(s);const a=new t(r,"a",{numberOfOutputs:0}),l=r.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,l.connect(a),l.start(0),await r.startRendering(),await new Promise(u=>setTimeout(u))}catch{}finally{URL.revokeObjectURL(s)}return i&&!o},Kb=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(s=>{n.oncomplete=()=>{r.disconnect(),s(n.currentTime!==0)},n.startRendering()})},Qb=()=>new DOMException("","UnknownError"),Xb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Yb=(t,e,n,r,s,i,o)=>class extends t{constructor(l,u){const c=s(l),h={...Xb,...u},d=n(c,h),m=i(c)?r():null;super(l,!0,d,m),this._isCurveNullified=!1,this._nativeWaveShaperNode=d,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(l){if(l===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(l.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=l}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(l){this._nativeWaveShaperNode.oversample=l}},Jb=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Nt(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(o,u)}return r.set(o,a),po(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},Zb=()=>typeof window>"u"?null:window,eL=(t,e)=>n=>{n.copyFromChannel=(r,s,i=0)=>{const o=t(i),a=t(s);if(a>=n.numberOfChannels)throw e();const l=n.length,u=n.getChannelData(a),c=r.length;for(let h=o<0?-o:0;h+o<l&&h<c;h+=1)r[h]=u[h+o]},n.copyToChannel=(r,s,i=0)=>{const o=t(i),a=t(s);if(a>=n.numberOfChannels)throw e();const l=n.length,u=n.getChannelData(a),c=r.length;for(let h=o<0?-o:0;h+o<l&&h<c;h+=1)u[h+o]=r[h]}},tL=t=>e=>{e.copyFromChannel=(n=>(r,s,i=0)=>{const o=t(i),a=t(s);if(o<e.length)return n.call(e,r,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(r,s,i=0)=>{const o=t(i),a=t(s);if(o<e.length)return n.call(e,r,a,o)})(e.copyToChannel)},nL=t=>(e,n)=>{const r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",s=>()=>{const i=s.call(e);return i===r?null:i},s=>i=>s.call(e,i===null?r:i))},rL=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const s=n.createBufferSource();e(r,()=>{const a=r.numberOfInputs;for(let l=0;l<a;l+=1)s.connect(r,0,l)},()=>s.disconnect(r))},$S=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),US=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},gl=(t,e,n,r)=>{let s=t;for(;!s.hasOwnProperty(e);)s=Object.getPrototypeOf(s);const{get:i,set:o}=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(t,e,{get:n(i),set:r(o)})},sL=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),iL=t=>({...t,channelCount:t.numberOfOutputs}),oL=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},jS=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;jS(t,e,n+1e-7)}},aL=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},lL=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},uL=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},ng=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},BS=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},rg=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},cL=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},hL=t=>{t.start=(e=>(n=0,r=0,s)=>{const i=t.buffer,o=i===null?r:Math.min(i.duration,r);i!==null&&o>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,s)})(t.start)},zS=(t,e)=>{const n=e.createGain();t.connect(n);const r=(s=>()=>{s.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),mo(t,n),t.stop=(s=>{let i=!1;return(o=0)=>{if(i)try{s.call(t,o)}catch{n.gain.setValueAtTime(0,o)}else s.call(t,o),i=!0}})(t.stop)},go=(t,e)=>n=>{const r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},dL=DP(Hs),fL=VP(Hs),pL=XM(gh),WS=new WeakMap,mL=p2(WS),Pn=IM(new Map,new WeakMap),Gn=Zb(),qS=W2(Pn,Kn),sg=f2(Dt),mt=Fb(Dt,sg,$s),gL=zP(qS,Se,mt),ye=y2(mh),_r=yb(Gn),pe=M2(_r),HS=new WeakMap,GS=o2(go),yl=K2(Gn),ig=O2(yl),og=R2(Gn),KS=D2(Gn),Ua=X2(Gn),$e=pM(PP(TS),FP(dL,fL,vc,pL,_c,Dt,mL,cl,Se,Hs,lr,$s,yu),Pn,C2(Xf,_c,Dt,Se,Va,lr),Kn,yh,Ft,HM(vc,Xf,Dt,Se,Va,ye,lr,pe),ZM(HS,Dt,Rn),GS,ye,ig,og,KS,pe,Ua),yL=BP($e,gL,Kn,qS,ye,pe),ag=new WeakSet,c_=q2(Gn),QS=$M(new Uint32Array(1)),lg=eL(QS,Kn),ug=tL(QS),XS=qP(ag,Pn,Ft,c_,_r,Hb(c_),lg,ug),vh=$P(Ht),YS=Vb(sg,dl,$s),Qn=PM(YS),yo=G2(vh,Pn,aL,lL,uL,ng,BS,rg,hL,nL(gl),zS),Xn=Lb(m2(dl),YS),vL=KP(Qn,yo,Se,Xn,mt),Mn=mM(MP(SS),HS,Xm,gM,IP,AP,NP,xP,OP,Gf,_S,yl,jS),_L=GP($e,vL,Mn,rt,yo,ye,pe,go),wL=rM($e,sM,Kn,rt,Q2(Ht,gl),ye,pe,mt),TL=CM(Qn,LS,Se,Xn,mt),Gs=jb(WS),SL=kM($e,Mn,TL,yh,LS,ye,pe,Gs),as=B2(Hs,og),EL=rL(rt,as),ls=rb(yl,EL),kL=xM(ls,Se,mt),CL=NM($e,kL,ls,ye,pe),IL=DM(pl,Se,mt),AL=RM($e,IL,pl,ye,pe,iL),NL=ob(vh,yo,Ht,as),vo=ib(vh,Pn,NL,ng,rg),xL=VM(Qn,vo,Se,Xn,mt),OL=FM($e,Mn,xL,vo,ye,pe,go),JS=ab(Ft,gl),RL=BM(JS,Se,mt),DL=jM($e,RL,JS,ye,pe,Gs),PL=QM(Qn,FS,Se,Xn,mt),ML=KM($e,Mn,PL,FS,ye,pe,Gs),ZS=lb(Ft),bL=r2(Qn,ZS,Se,Xn,mt),LL=n2($e,Mn,bL,ZS,Ft,ye,pe,Gs),FL=h2(Qn,Ht,Se,Xn,mt),VL=c2($e,Mn,FL,Ht,ye,pe),$L=db(yh,rt,ml,Ft),_h=$b(Pn,Ht,ml,Kb(Ht,_r)),UL=k2(yo,Se,_r,mt,_h),jL=ub($L),BL=S2($e,jL,UL,ye,pe,Gs),zL=iM(Mn,ls,vo,ml,Ft,$S,pe,gl),eE=new WeakMap,WL=j2(wL,zL,GS,pe,eE,go),tE=vb(vh,Pn,ng,BS,rg,zS),qL=Ob(Qn,tE,Se,Xn,mt),HL=xb($e,Mn,tE,qL,ye,pe,go),nE=bM(yo),GL=Cb(nE,rt,Ht,US,as),wh=kb(nE,rt,GL,US,as,yl,gl),KL=wb(vc,rt,ls,Ht,ml,wh,Ft,_c,$S,as),rE=_b(KL),QL=Pb(Qn,ls,vo,Ht,rE,Se,_r,Xn,mt,_h),XL=Db($e,Mn,rE,QL,ye,pe,Gs),YL=Tb(Kn),JL=bb(YL,ye,new WeakSet,oL),ZL=Eb(ls,pl,Ht,wh,Ft,as),sE=Sb(ZL,Ft),eF=qb(Qn,sE,Se,Xn,mt),tF=Wb($e,Mn,sE,eF,ye,pe),nF=Jb(wh,Se,mt),rF=Yb($e,rt,wh,nF,ye,pe,Gs),iE=b2(Gn),cg=a2(Gn),oE=new WeakMap,sF=v2(oE,_r),iF=iE?LP(Pn,Ft,i2(Gn),cg,l2(RP),ye,sF,pe,Ua,new WeakMap,new WeakMap,Gb(Ua,_r),Gn):void 0,oF=P2(ig,pe),aF=qM(ag,Pn,WM,s2,new WeakSet,ye,oF,gc,$a,lg,ug),aE=SM(iF,yL,XS,_L,SL,CL,AL,OL,DL,aF,ML,LL,VL,BL,WL,HL,XL,JL,tF,rF),lF=L2($e,fb,ye,pe),uF=V2($e,pb,ye,pe),cF=$2($e,mb,ye,pe),hF=gb(rt,pe),dF=U2($e,hF,ye),fF=nM(aE,rt,Ft,Qb,lF,uF,cF,dF,yl),hg=_2(eE),pF=UP(hg),lE=MM(Kn),mF=YM(hg),uE=e2(Kn),cE=new WeakMap,gF=d2(cE,Rn),yF=nb(lE,Kn,rt,ls,pl,vo,Ht,ml,Ft,uE,cg,gF,as),vF=J2(rt,yF,Ht,Ft,as),_F=TM(Qn,lE,yo,ls,pl,vo,Ht,mF,uE,cg,Se,Ua,_r,Xn,mt,_h),wF=g2(oE),TF=Ub(cE),h_=iE?vM(pF,$e,Mn,_F,vF,Dt,wF,ye,pe,Ua,sL,TF,cL,go):void 0,SF=zM(Ft,_r),EF=Bb(ag,Pn,sg,hg,_h,gc,lg,ug),kF=Ab(aE,Pn,rt,SF,EF),CF=I2(mh,ig),IF=A2(Qm,og),AF=N2(Xm,KS),NF=x2(mh,pe);function hn(t){return t===void 0}function se(t){return t!==void 0}function xF(t){return typeof t=="function"}function Us(t){return typeof t=="number"}function Is(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function OF(t){return typeof t=="boolean"}function An(t){return Array.isArray(t)}function gr(t){return typeof t=="string"}function Yl(t){return gr(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function ee(t,e){if(!t)throw new Error(e)}function es(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function hE(t){!t.isOffline&&t.state!=="running"&&dg('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let dE=!1,d_=!1;function f_(t){dE=t}function RF(t){hn(t)&&dE&&!d_&&(d_=!0,dg("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let fE=console;function DF(...t){fE.log(...t)}function dg(...t){fE.warn(...t)}function PF(t){return new fF(t)}function MF(t,e,n){return new kF(t,e,n)}const Kt=typeof self=="object"?self:null,bF=Kt&&(Kt.hasOwnProperty("AudioContext")||Kt.hasOwnProperty("webkitAudioContext"));function LF(t,e,n){return ee(se(h_),"AudioWorkletNode only works in a secure context (https or localhost)"),new(t instanceof(Kt==null?void 0:Kt.BaseAudioContext)?Kt==null?void 0:Kt.AudioWorkletNode:h_)(t,e,n)}class FF{constructor(e,n,r,s){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(s||44100),.001),this.updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),r=new Worker(n);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function js(t){return AF(t)}function Kr(t){return IF(t)}function vu(t){return NF(t)}function ei(t){return CF(t)}function VF(t){return t instanceof XS}function $F(t,e){return t==="value"||js(e)||Kr(e)||VF(e)}function Oi(t,...e){if(!e.length)return t;const n=e.shift();if(Is(t)&&Is(n))for(const r in n)$F(r,n[r])?t[r]=n[r]:Is(n[r])?(t[r]||Object.assign(t,{[r]:{}}),Oi(t[r],n[r])):Object.assign(t,{[r]:n[r]});return Oi(t,...e)}function UF(t,e){return t.length===e.length&&t.every((n,r)=>e[r]===n)}function Y(t,e,n=[],r){const s={},i=Array.from(e);if(Is(i[0])&&r&&!Reflect.has(i[0],r)&&(Object.keys(i[0]).some(a=>Reflect.has(t,a))||(Oi(s,{[r]:i[0]}),n.splice(n.indexOf(r),1),i.shift())),i.length===1&&Is(i[0]))Oi(s,i[0]);else for(let o=0;o<n.length;o++)se(i[o])&&(s[n[o]]=i[o]);return Oi(t,s)}function jF(t){return t.constructor.getDefaults()}function Ri(t,e){return hn(t)?e:t}function p_(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class wr{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Kt&&this.toString()===Kt.TONE_DEBUG_CLASS)&&DF(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}wr.version=vS;const fg=1e-6;function Qi(t,e){return t>e+fg}function tp(t,e){return Qi(t,e)||wn(t,e)}function Ec(t,e){return t+fg<e}function wn(t,e){return Math.abs(t-e)<fg}function BF(t,e,n){return Math.max(Math.min(t,n),e)}class dn extends wr{constructor(){super(),this.name="Timeline",this._timeline=[];const e=Y(dn.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(ee(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];ee(tp(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const r=this._search(e,n);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const r=this._search(e,n);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(wn(this._timeline[n].time,e)){for(let r=n;r>=0&&wn(this._timeline[r].time,e);r--)n=r;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&tp(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let r=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][n]<=e)return s-1;for(;r<i;){let o=Math.floor(r+(i-r)/2);const a=this._timeline[o],l=this._timeline[o+1];if(wn(a[n],e)){for(let u=o;u<this._timeline.length;u++){const c=this._timeline[u];if(wn(c[n],e))o=u;else break}return o}else{if(Ec(a[n],e)&&Qi(l[n],e))return o;Qi(a[n],e)?i=o:r=o+1}}return-1}_iterate(e,n=0,r=this._timeline.length-1){this._timeline.slice(n,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const r=this._search(e);return r!==-1&&this._iterate(n,0,r),this}forEachAfter(e,n){const r=this._search(e);return this._iterate(n,r+1),this}forEachBetween(e,n,r){let s=this._search(e),i=this._search(n);return s!==-1&&i!==-1?(this._timeline[s].time!==e&&(s+=1),this._timeline[i].time===n&&(i-=1),this._iterate(r,s,i)):s===-1&&this._iterate(r,0,i),this}forEachFrom(e,n){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(n,r+1),this}forEachAtTime(e,n){const r=this._search(e);if(r!==-1&&wn(this._timeline[r].time,e)){let s=r;for(let i=r;i>=0&&wn(this._timeline[i].time,e);i--)s=i;this._iterate(i=>{n(i)},s,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const pE=[];function Th(t){pE.push(t)}function zF(t){pE.forEach(e=>e(t))}const mE=[];function Sh(t){mE.push(t)}function WF(t){mE.forEach(e=>e(t))}class vl extends wr{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(s=>{hn(this._events)&&(this._events={}),this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(n)}),this}once(e,n){const r=(...s)=>{n(...s),this.off(e,r)};return this.on(e,r),this}off(e,n){return e.split(/\W+/).forEach(s=>{if(hn(this._events)&&(this._events={}),this._events.hasOwnProperty(s))if(hn(n))this._events[s]=[];else{const i=this._events[s];for(let o=i.length-1;o>=0;o--)i[o]===n&&i.splice(o,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let s=0,i=r.length;s<i;s++)r[s].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const r=Object.getOwnPropertyDescriptor(vl.prototype,n);Object.defineProperty(e.prototype,n,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class gE extends vl{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class _l extends gE{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new dn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const r=Y(_l.getDefaults(),arguments,["context"]);r.context?(this._context=r.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=PF({latencyHint:r.latencyHint}),this._latencyHint=r.latencyHint),this._ticker=new FF(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(zF(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,r){return this._context.createBuffer(e,n,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,r){return this._context.createPeriodicWave(e,n,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return ee(ei(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return ee(ei(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return ee(ei(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){ee(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){ee(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){ee(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){ee(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return LF(this.rawContext,e,n)}addAudioWorkletModule(e){return He(this,void 0,void 0,function*(){ee(se(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return He(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return ei(this._context)?this._context.resume():Promise.resolve()}close(){return He(this,void 0,void 0,function*(){ei(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&WF(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),r=n.getChannelData(0);for(let i=0;i<r.length;i++)r[i]=e;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=n,s.loop=!0,s.start(0),this._constants.set(e,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=e;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(e,n){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const r=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),s()},id:r,time:i+n})};return s(),r}}class qF extends gE{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return He(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Le(t,e){An(e)?e.forEach(n=>Le(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function yE(t,e){An(e)?e.forEach(n=>yE(t,n)):Object.defineProperty(t,e,{writable:!0})}const fe=()=>{};class _e extends wr{constructor(){super(),this.name="ToneAudioBuffer",this.onload=fe;const e=Y(_e.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,gr(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:fe,onload:fe,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:En().sampleRate}set(e){return e instanceof _e?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return He(this,void 0,void 0,function*(){const n=_e.load(e).then(r=>{this.set(r),this.onload(this)});_e.downloads.push(n);try{yield n}finally{const r=_e.downloads.indexOf(n);_e.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=An(e)&&e[0].length>0,r=n?e.length:1,s=n?e[0].length:e.length,i=En(),o=i.createBuffer(r,s,i.sampleRate),a=!n&&r===1?[e]:e;for(let l=0;l<r;l++)o.copyToChannel(a[l],l);return this._buffer=o,this}toMono(e){if(Us(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const r=this.numberOfChannels;for(let s=0;s<r;s++){const i=this.toArray(s);for(let o=0;o<i.length;o++)n[o]+=i[o]}n=n.map(s=>s/r),this.fromArray(n)}return this}toArray(e){if(Us(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let r=0;r<this.numberOfChannels;r++)n[r]=this.getChannelData(r);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){ee(this.loaded,"Buffer is not loaded");const r=Math.floor(e*this.sampleRate),s=Math.floor(n*this.sampleRate);ee(r<s,"The start time must be less than the end time");const i=s-r,o=En().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(r,s),a);return new _e(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new _e().fromArray(e)}static fromUrl(e){return He(this,void 0,void 0,function*(){return yield new _e().load(e)})}static load(e){return He(this,void 0,void 0,function*(){const n=e.match(/\[([^\]\[]+\|.+)\]$/);if(n){const l=n[1].split("|");let u=l[0];for(const c of l)if(_e.supportsType(c)){u=c;break}e=e.replace(n[0],u)}const r=_e.baseUrl===""||_e.baseUrl.endsWith("/")?_e.baseUrl:_e.baseUrl+"/",s=document.createElement("a");s.href=r+e,s.pathname=(s.pathname+s.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(s.href);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield En().decodeAudioData(o)})}static supportsType(e){const n=e.split("."),r=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return He(this,void 0,void 0,function*(){for(yield Promise.resolve();_e.downloads.length;)yield _e.downloads[0]})}}_e.baseUrl="";_e.downloads=[];class pg extends _l{constructor(){super({clockSource:"offline",context:vu(arguments[0])?arguments[0]:MF(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:vu(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=vu(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return He(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const r=Math.floor(this.sampleRate/128);e&&n%r===0&&(yield new Promise(s=>setTimeout(s,1)))}})}render(){return He(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new _e(n)})}close(){return Promise.resolve()}}const vE=new qF;let gi=vE;function En(){return gi===vE&&bF&&HF(new _l),gi}function HF(t,e=!1){e&&gi.dispose(),ei(t)?gi=new _l(t):vu(t)?gi=new pg(t):gi=t}if(Kt&&!Kt.TONE_SILENCE_LOGGING){const e=` * Tone.js v${vS} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function GF(t){return Math.pow(10,t/20)}function KF(t){return 20*(Math.log(t)/Math.LN10)}function _E(t){return Math.pow(2,t/12)}let Eh=440;function QF(){return Eh}function XF(t){Eh=t}function np(t){return Math.round(wE(t))}function wE(t){return 69+12*Math.log2(t/Eh)}function YF(t){return Eh*Math.pow(2,(t-69)/12)}class mg extends wr{constructor(e,n,r){super(),this.defaultUnits="s",this._val=n,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const r=parseInt(e,10),s=n==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/r)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,r)=>{let s=0;return e&&e!=="0"&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s+=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s+=this._beatsToUnits(parseFloat(r)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof mg&&this.fromType(this._val),hn(this._val))return this._noArg();if(gr(this._val)&&hn(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Is(this._val)){let e=0;for(const n in this._val)if(se(this._val[n])){const r=this._val[n],s=new this.constructor(this.context,n).valueOf()*r;e+=s}return e}if(se(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return gr(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class kn extends mg{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new kn(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const r=new this.constructor(this.context,e).valueOf(),s=this.valueOf(),a=Math.round(s/r)*r-s;return s+a*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let r=n[0],s=new kn(this.context,n[0]).toSeconds();return n.forEach(i=>{const o=new kn(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(s-e)&&(r=i,s=o)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const r=Math.floor(n/this._getTimeSignature());let s=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=s.toString();return i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3))),[r,n,s].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return np(this.toFrequency())}_now(){return this.context.now()}}class un extends kn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return QF()}static set A4(e){XF(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:un.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const s=JF[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?s:un.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,r){let s=1;return e&&e!=="0"&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s*=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s*=this._beatsToUnits(parseFloat(r)/4)),s}}})}transpose(e){return new un(this.context,this.valueOf()*_E(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return np(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/un.A4);let r=Math.round(12*n)+57;const s=Math.floor(r/12);return s<0&&(r+=-12*s),ZF[r%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return YF(e)}static ftom(e){return np(e)}}const JF={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},ZF=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class ta extends kn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Wt extends wr{constructor(){super();const e=Y(Wt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:En()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return RF(e),new kn(this.context,e).toSeconds()}toFrequency(e){return new un(this.context,e).toFrequency()}toTicks(e){return new ta(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(r=>{hn(e[r])&&delete n[r]}),n}get(){const e=jF(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const r=this[n];se(r)&&se(r.value)&&se(r.setValueAtTime)?e[n]=r.value:r instanceof Wt?e[n]=r._getPartialProperties(e[n]):An(r)||Us(r)||gr(r)||OF(r)?e[n]=r:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&se(this[n])&&(this[n]&&se(this[n].value)&&se(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof Wt?this[n].set(e[n]):this[n]=e[n])}),this}}class gg extends dn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,r){return es(n,0),this.add(Object.assign({},r,{state:e,time:n})),this}getLastState(e,n){const r=this._search(n);for(let s=r;s>=0;s--){const i=this._timeline[s];if(i.state===e)return i}}getNextState(e,n){const r=this._search(n);if(r!==-1)for(let s=r;s<this._timeline.length;s++){const i=this._timeline[s];if(i.state===e)return i}}}class Ne extends Wt{constructor(){const e=Y(Ne.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,ee(se(e.param)&&(js(e.param)||e.param instanceof Ne),"param must be an AudioParam");!js(e.param);)e.param=e.param._param;this._swappable=se(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new dn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,se(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Wt.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return se(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return se(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return se(this.maxValue)&&se(this.minValue)&&es(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?GF(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?KF(e):e}setValueAtTime(e,n){const r=this.toSeconds(n),s=this._fromType(e);return ee(isFinite(s)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,r),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),r=this._events.getAfter(n),s=this._events.get(n);let i=this._initialValue;if(s===null)i=this._initialValue;else if(s.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const o=this._events.getBefore(s.time);let a;o===null?a=this._initialValue:a=o.value,s.type==="setTargetAtTime"&&(i=this._exponentialApproach(s.time,a,s.value,s.constant,n))}else if(r===null)i=s.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let o=s.value;if(s.type==="setTargetAtTime"){const a=this._events.getBefore(s.time);a===null?o=this._initialValue:o=a.value}r.type==="linearRampToValueAtTime"?i=this._linearInterpolate(s.time,o,r.time,r.value,n):i=this._exponentialInterpolate(s.time,o,r.time,r.value,n)}else i=s.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const r=this._fromType(e),s=this.toSeconds(n);return ee(isFinite(r)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this._events.add({time:s,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,s),this._param.linearRampToValueAtTime(r,s),this}exponentialRampToValueAtTime(e,n){let r=this._fromType(e);r=wn(r,0)?this._minOutput:r,this._assertRange(r);const s=this.toSeconds(n);return ee(isFinite(r)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,s),this._param.exponentialRampToValueAtTime(r,s),this}exponentialRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(n)),this}linearRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(n)),this}targetRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,n),this}exponentialApproachValueAtTime(e,n,r){n=this.toSeconds(n),r=this.toSeconds(r);const s=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,n,s),this.cancelAndHoldAtTime(n+r*.9),this.linearRampToValueAtTime(e,n+r),this}setTargetAtTime(e,n,r){const s=this._fromType(e);ee(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(s),ee(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:r,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",e,i,r),this._param.setTargetAtTime(s,i,r),this}setValueCurveAtTime(e,n,r,s=1){r=this.toSeconds(r),n=this.toSeconds(n);const i=this._fromType(e[0])*s;this.setValueAtTime(this._toType(i),n);const o=r/(e.length-1);for(let a=1;a<e.length;a++){const l=this._fromType(e[a])*s;this.linearRampToValueAtTime(this._toType(l),n+a*o)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return ee(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),r=this._fromType(this.getValueAtTime(n));ee(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+r);const s=this._events.get(n),i=this._events.getAfter(n);return s&&wn(s.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),n)),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}rampTo(e,n=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,r):this.linearRampTo(e,n,r),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const r=this._events.get(n);if(r&&r.type==="setTargetAtTime"){const s=this._events.getAfter(r.time),i=s?s.time:n+2,o=(i-n)/10;for(let a=n;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,s=>{s.type==="cancelScheduledValues"?e.cancelScheduledValues(s.time):s.type==="setTargetAtTime"?e.setTargetAtTime(s.value,s.time,s.constant):e[s.type](s.value,s.time)}),this}setParam(e){ee(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,r,s,i){return r+(n-r)*Math.exp(-(i-e)/s)}_linearInterpolate(e,n,r,s,i){return n+(s-n)*((i-e)/(r-e))}_exponentialInterpolate(e,n,r,s,i){return n*Math.pow(s/n,(i-e)/(r-e))}}class ne extends Wt{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return se(this.input)?js(this.input)||this.input instanceof Ne?1:this.input.numberOfInputs:0}get numberOfOutputs(){return se(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return se(e)&&(e instanceof ne||Kr(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();ee(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,r=0){return _o(this,e,n,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return dg("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,r=0){return e4(this,e,n,r),this}chain(...e){return rp(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),se(this.input)&&(this.input instanceof ne?this.input.dispose():Kr(this.input)&&this.input.disconnect()),se(this.output)&&(this.output instanceof ne?this.output.dispose():Kr(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function rp(...t){const e=t.shift();t.reduce((n,r)=>(n instanceof ne?n.connect(r):Kr(n)&&_o(n,r),r),e)}function _o(t,e,n=0,r=0){for(ee(se(t),"Cannot connect from undefined node"),ee(se(e),"Cannot connect to undefined node"),(e instanceof ne||Kr(e))&&ee(e.numberOfInputs>0,"Cannot connect to node with no inputs"),ee(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof ne||e instanceof Ne;)se(e.input)&&(e=e.input);for(;t instanceof ne;)se(t.output)&&(t=t.output);js(e)?t.connect(e,n):t.connect(e,n,r)}function e4(t,e,n=0,r=0){if(se(e))for(;e instanceof ne;)e=e.input;for(;!Kr(t);)se(t.output)&&(t=t.output);js(e)?t.disconnect(e,n):Kr(e)?t.disconnect(e,n,r):t.disconnect()}class Ct extends ne{constructor(){const e=Y(Ct.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Ne({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Le(this,"gain")}static getDefaults(){return Object.assign(ne.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Xi extends ne{constructor(e){super(e),this.onended=fe,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ct({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const r=this.toSeconds(n);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(ne.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:fe})}_startGain(e,n=1){ee(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+r):this._gainNode.gain.exponentialApproachValueAtTime(n,e,r)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){ee(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==fe&&(this.onended(this),this.onended=fe,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ee(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=fe,this}}class yg extends Xi{constructor(){const e=Y(yg.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),_o(this._source,this._gainNode),this.offset=new Ne({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Xi.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class ot extends ne{constructor(){const e=Y(ot.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new yg({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ne.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,r=0){return vg(this,e,n,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,r){return this._param.exponentialRampTo(e,n,r),this}linearRampTo(e,n,r){return this._param.linearRampTo(e,n,r),this}targetRampTo(e,n,r){return this._param.targetRampTo(e,n,r),this}exponentialApproachValueAtTime(e,n,r){return this._param.exponentialApproachValueAtTime(e,n,r),this}setTargetAtTime(e,n,r){return this._param.setTargetAtTime(e,n,r),this}setValueCurveAtTime(e,n,r,s){return this._param.setValueCurveAtTime(e,n,r,s),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,r){return this._param.rampTo(e,n,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function vg(t,e,n,r){(e instanceof Ne||js(e)||e instanceof ot&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof ot&&(e.overridden=!0)),_o(t,e,n,r)}class _g extends Ne{constructor(){const e=Y(_g.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new dn(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ne.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,r){n=this.toSeconds(n),this.setRampPoint(n);const s=this._fromType(e),i=this._events.get(n),o=Math.round(Math.max(1/r,1));for(let a=0;a<=o;a++){const l=r*a+n,u=this._exponentialApproach(i.time,i.value,s,r,l);this.linearRampToValueAtTime(this._toType(u),l)}return this}setValueAtTime(e,n){const r=this.toSeconds(n);super.setValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,n){const r=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const r=this._fromType(e),s=this._events.get(n),i=Math.round(Math.max((n-s.time)*10,1)),o=(n-s.time)/i;for(let a=0;a<=i;a++){const l=o*a+s.time,u=this._exponentialInterpolate(s.time,s.value,n,r,l);this.linearRampToValueAtTime(this._toType(u),l)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(hn(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let s=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(s=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(r+s)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),r=this._events.get(n);return Math.max(this._getTicksUntilEvent(r,n),0)}getDurationOfTicks(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(n);return this.getTimeOfTick(s+e)-r}getTimeOfTick(e){const n=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&r&&r.type==="linearRampToValueAtTime"&&n.value!==r.value){const s=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(r.time))-s)/(r.time-n.time),a=Math.sqrt(Math.pow(s,2)-2*o*(n.ticks-e)),l=(-s+a)/o,u=(-s-a)/o;return(l>0?l:u)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const r=this.toSeconds(n),s=this.toSeconds(e),i=this.getTicksAtTime(r);return this.getTicksAtTime(r+s)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class wg extends ot{constructor(){const e=Y(wg.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new _g({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(ot.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Tg extends Wt{constructor(){const e=Y(Tg.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new gg,this._tickOffset=new dn,this._ticksAtTime=new dn,this._secondsAtTime=new dn,this.frequency=new wg({context:this.context,units:e.units,value:e.frequency}),Le(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Wt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),se(n)&&this.setTicksAtTime(n,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const r=this._state.get(n);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),r=this._state.getLastState("stopped",n),s=this._ticksAtTime.get(n),i={state:"paused",time:n};this._state.add(i);let o=s||r,a=s?s.ticks:0,l=null;return this._state.forEachBetween(o.time,n+this.sampleTime,u=>{let c=o.time;const h=this._tickOffset.get(u.time);h&&h.time>=o.time&&(a=h.ticks,c=h.time),o.state==="started"&&u.state!=="started"&&(a+=this.frequency.getTicksAtTime(u.time)-this.frequency.getTicksAtTime(c),u.time!==i.time&&(l={state:u.state,time:u.time,ticks:a})),o=u}),this._state.remove(i),l&&this._ticksAtTime.add(l),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),r=this.frequency.timeToTicks(e,n);this.setTicksAtTime(r,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);const s=this._secondsAtTime.get(e);let i=s||n,o=s?s.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,l=>{let u=i.time;const c=this._tickOffset.get(l.time);c&&c.time>=i.time&&(o=c.seconds,u=c.time),i.state==="started"&&l.state!=="started"&&(o+=l.time-u,l.time!==r.time&&(a={state:l.state,time:l.time,seconds:o})),i=l}),this._state.remove(r),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const r=this._tickOffset.get(n),s=this._state.get(n),i=Math.max(r.time,s.time),o=this.frequency.getTicksAtTime(i)+e-r.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,n,r){let s=this._state.get(e);this._state.forEachBetween(e,n,o=>{s&&s.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(s.time,e),o.time-this.sampleTime,r),s=o});let i=null;if(s&&s.state==="started"){const o=Math.max(s.time,e),a=this.frequency.getTicksAtTime(o),l=this.frequency.getTicksAtTime(s.time),u=a-l;let c=Math.ceil(u)-u;c=wn(c,1)?0:c;let h=this.frequency.getTimeOfTick(a+c);for(;h<n;){try{r(h,Math.round(this.getTicksAtTime(h)))}catch(d){i=d;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class kh extends Wt{constructor(){const e=Y(kh.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=fe,this._lastUpdate=0,this._state=new gg("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new Tg({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Le(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Wt.getDefaults(),{callback:fe,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){hE(this.context);const r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,n),r<this._lastUpdate&&this.emit("start",r,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(s+e,r)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,r=>{switch(r.state){case"started":const s=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,s);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,n,(r,s)=>{this.callback(r,s)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}vl.mixin(kh);class wo extends ne{constructor(){const e=Y(wo.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Ct({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Le(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(ne.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Sg extends ne{constructor(){const e=Y(Sg.getDefaults(),arguments);super(e),this.name="Destination",this.input=new wo({context:this.context}),this.output=new Ct({context:this.context}),this.volume=this.input.volume,rp(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ne.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),rp(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Th(t=>{t.destination=new Sg({context:t})});Sh(t=>{t.destination.dispose()});class t4 extends ne{constructor(){super(...arguments),this.name="Listener",this.positionX=new Ne({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Ne({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Ne({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Ne({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Ne({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Ne({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Ne({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Ne({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Ne({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ne.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Th(t=>{t.listener=new t4({context:t})});Sh(t=>{t.listener.dispose()});class Eg extends wr{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=Y(Eg.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const r=e.urls[n];this.add(n,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:fe,onload:fe,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return ee(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,r=fe,s=fe){return gr(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new _e(this.baseUrl+n,r,s))):this._buffers.set(e.toString(),new _e(n,r,s)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class yi extends ta{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class n4 extends Wt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new dn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const n=this._events.shift();n&&e-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Th(t=>{t.draw=new n4({context:t})});Sh(t=>{t.draw.dispose()});class r4 extends wr{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){ee(se(e.time),"Events must have a time property"),ee(se(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new s4(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const r of n)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let r,s=null;if(n>0)if(e.left.right===null)r=e.left,r.right=e.right,s=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,s=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,s=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,s=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),s&&this._rebalance(s)}e.dispose()}_rotateLeft(e){const n=e.parent,r=e.isLeftChild(),s=e.right;s&&(e.right=s.left,s.left=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rotateRight(e){const n=e.parent,r=e.isLeftChild(),s=e.left;s&&(e.left=s.right,s.right=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let r=n[0];for(let s=1;s<n.length;s++)n[s].low>r.low&&(r=n[s]);return r.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(r=>n.push(r)),n.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const r=[];this._root.search(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}forEachFrom(e,n){if(this._root!==null){const r=[];this._root.searchAfter(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class s4{constructor(e,n,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class i4 extends wr{constructor(e){super(),this.name="TimelineValue",this._timeline=new dn({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class Yi extends ne{constructor(){super(Y(Yi.getDefaults(),arguments,["context"]))}connect(e,n=0,r=0){return vg(this,e,n,r),this}}class wl extends Yi{constructor(){const e=Y(wl.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,An(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):xF(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(ot.getDefaults(),{length:1024})}setMap(e,n=1024){const r=new Float32Array(n);for(let s=0,i=n;s<i;s++){const o=s/(i-1)*2-1;r[s]=e(o,s)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(r=>r.includes(e));ee(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class kg extends Yi{constructor(){const e=Y(kg.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new wl({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Yi.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class ts{constructor(e,n){this.id=ts._eventId++,this._remainderTime=0;const r=Object.assign(ts.getDefaults(),n);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=Math.floor(r.time),this._remainderTime=r.time-this.time}static getDefaults(){return{callback:fe,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}ts._eventId=0;class Cg extends ts{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(Cg.getDefaults(),n);this.duration=r.duration,this._interval=r.interval,this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},ts.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Ec(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new yi(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Ec(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new yi(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);Qi(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Ch extends Wt{constructor(){const e=Y(Ch.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new i4(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new dn,this._repeatedEvents=new r4,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new kh({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Le(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Wt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const r=n%(this._swingTicks*2)/(this._swingTicks*2),s=Math.sin(r*Math.PI)*this._swingAmount;e+=new yi(this.context,this._swingTicks*2/3).toSeconds()*s}f_(!0),this._timeline.forEachAtTime(n,r=>r.invoke(e)),f_(!1)}schedule(e,n){const r=new ts(this,{callback:e,time:new ta(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,n,r,s=1/0){const i=new Cg(this,{callback:e,duration:new kn(this.context,s).toTicks(),interval:new kn(this.context,n).toTicks(),time:new ta(this.context,r).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,n){const r=new ts(this,{callback:e,once:!0,time:new ta(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(n,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new yi(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let r;return se(n)&&(r=this.toTicks(n)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){An(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new kn(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new kn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new yi(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new yi(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),r=this._clock.frequency.timeToTicks(e,n);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(n),s=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,n),i=n+s;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),r=this.getTicksAtTime(n),s=e-r%e;return this._clock.nextTickTime(s,n)}}syncSignal(e,n){const r=this.now();let s=this.bpm,i=1/(60/s.getValueAtTime(r)/this.PPQ),o=[];if(e.units==="time"){const l=.015625/i,u=new Ct(l),c=new kg(-1),h=new Ct(l);s.chain(u,c,h),s=h,i=1/i,o=[u,c,h]}n||(e.getValueAtTime(r)!==0?n=e.getValueAtTime(r)/i:n=0);const a=new Ct(n);return s.connect(a),a.connect(e._param),o.push(a),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const r=this._syncedSignals[n];r.signal===e&&(r.nodes.forEach(s=>s.dispose()),r.signal.value=r.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),yE(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}vl.mixin(Ch);Th(t=>{t.transport=new Ch({context:t})});Sh(t=>{t.transport.dispose()});class en extends ne{constructor(e){super(e),this.input=void 0,this._state=new gg("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=fe,this._syncedStop=fe,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new wo({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Le(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(ne.getDefaults(),{mute:!1,onstop:fe,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,r){let s=hn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(s=this._clampToCurrentTime(s),!this._synced&&this._state.getValueAtTime(s)==="started")ee(Qi(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,n,r);else if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const i=this._state.get(s);i&&(i.offset=this.toSeconds(Ri(n,0)),i.duration=r?this.toSeconds(r):void 0);const o=this.context.transport.schedule(a=>{this._start(a,n,r)},s);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else hE(this.context),this._start(s,n,r);return this}stop(e){let n=hn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||se(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const r=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(r)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(Qi(n,0)){const r=this._state.get(n);if(r&&r.state==="started"&&r.time!==n){const s=n-this.toSeconds(r.time);let i;r.duration&&(i=this.toSeconds(r.duration)-s),this._start(e,this.toSeconds(r.offset)+s,i)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=fe,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Ih extends Xi{constructor(){const e=Y(Ih.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,_o(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Ne({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new _e(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Xi.getDefaults(),{url:new _e,loop:!1,loopEnd:0,loopStart:0,onload:fe,onerror:fe,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,r,s=1){ee(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,s),this.loop?n=Ri(n,this.loopStart):n=Ri(n,0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,l=this.toSeconds(this.loopStart),u=a-l;tp(o,a)&&(o=(o-l)%u+l),wn(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Ec(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),se(r)){let a=this.toSeconds(r);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Ks(t,e){return He(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,r=new pg(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class Ig extends Xi{constructor(){const e=Y(Ig.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],_o(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Ne({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Ne({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Le(this,["frequency","detune"])}static getDefaults(){return Object.assign(Xi.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class We extends en{constructor(){const e=Y(We.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new ot({context:this.context,units:"frequency",value:e.frequency}),Le(this,"frequency"),this.detune=new ot({context:this.context,units:"cents",value:e.detune}),Le(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(en.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),r=new Ig({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return We._periodicWaveCache.find(n=>n.phase===this._phase&&UF(n.partials,this._partials));{const e=We._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const r=this._getCachedPeriodicWave();if(se(r)){const{partials:s,wave:i}=r;this._wave=i,this._partials=s,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[s,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(s,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),We._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:s,type:this._type,wave:this._wave}),We._periodicWaveCache.length>100&&We._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){es(e,0);let n=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(n=r[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const s=new Float32Array(e);this._partials.forEach((i,o)=>s[o]=i),this._partials=Array.from(s),this.type=this._type}}_getRealImaginary(e,n){let s=2048;const i=new Float32Array(s),o=new Float32Array(s);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,s=a,this._partials.length===0)return[i,o]}else{const l=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);l?(a=parseInt(l[2],10)+1,this._partialCount=parseInt(l[2],10),e=l[1],a=Math.max(a,2),s=a):this._partialCount=0,this._partials=[]}for(let l=1;l<s;++l){const u=2/(l*Math.PI);let c;switch(e){case"sine":c=l<=a?1:0,this._partials[l-1]=c;break;case"square":c=l&1?2*u:0,this._partials[l-1]=c;break;case"sawtooth":c=u*(l&1?1:-1),this._partials[l-1]=c;break;case"triangle":l&1?c=2*(u*u)*(l-1>>1&1?-1:1):c=0,this._partials[l-1]=c;break;case"custom":c=this._partials[l-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}c!==0?(i[l]=-c*Math.sin(n*l),o[l]=c*Math.cos(n*l)):(i[l]=0,o[l]=0)}return[i,o]}_inverseFFT(e,n,r){let s=0;const i=e.length;for(let o=0;o<i;o++)s+=e[o]*Math.cos(o*r)+n[o]*Math.sin(o*r);return s}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let r=0;const s=Math.PI*2,i=32;for(let o=0;o<i;o++)r=Math.max(this._inverseFFT(e,n,o/i*s),r);return BF(-this._inverseFFT(e,n,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return He(this,arguments,void 0,function*(e=1024){return Ks(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}We._periodicWaveCache=[];class o4 extends Yi{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new wl({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ji extends ot{constructor(){const e=Y(Ji.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Ct({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ot.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Ah extends en{constructor(){const e=Y(Ah.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new o4({context:this.context}),this._modulationNode=new Ct({context:this.context}),this._carrier=new We({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new We({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ji({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Le(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(We.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return He(this,arguments,void 0,function*(e=1024){return Ks(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Nh extends en{constructor(){const e=Y(Nh.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Ct({context:this.context,gain:0}),this._carrier=new We({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new ot({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new We({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ji({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Ji({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Le(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(We.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return He(this,arguments,void 0,function*(e=1024){return Ks(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Tl extends en{constructor(){const e=Y(Tl.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Ct({context:this.context,gain:0}),this._thresh=new wl({context:this.context,mapping:n=>n<=0?-1:1}),this.width=new ot({context:this.context,units:"audioRange",value:e.width}),this._triangle=new We({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Le(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(en.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return He(this,arguments,void 0,function*(e=1024){return Ks(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class xh extends en{constructor(){const e=Y(xh.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new ot({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ot({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Le(this,["frequency","detune"])}static getDefaults(){return Object.assign(We.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,r=e/(this._oscillators.length-1);this._forEach((s,i)=>s.detune.value=n+r*i)}}get count(){return this._oscillators.length}set count(e){if(es(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const r=new We({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):fe});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,r)=>n.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(){return He(this,arguments,void 0,function*(e=1024){return Ks(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Oh extends en{constructor(){const e=Y(Oh.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Ji({context:this.context,value:2}),this._pulse=new Tl({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new We({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Le(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(en.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return He(this,arguments,void 0,function*(e=1024){return Ks(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const m_={am:Ah,fat:xh,fm:Nh,oscillator:We,pulse:Tl,pwm:Oh};class kc extends en{constructor(){const e=Y(kc.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new ot({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ot({context:this.context,units:"cents",value:e.detune}),Le(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(We.getDefaults(),Nh.getDefaults(),Ah.getDefaults(),xh.getDefaults(),Tl.getDefaults(),Oh.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=m_[e],r=this.now();if(this._oscillator){const s=this._oscillator;s.stop(r),this.context.setTimeout(()=>s.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof m_[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Us(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Us(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&gr(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return He(this,arguments,void 0,function*(e=1024){return Ks(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function TE(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){es(i,t,e),n.set(this,i)}})}}function Tr(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){es(this.toSeconds(i),t,e),n.set(this,i)}})}}class Rh extends en{constructor(){const e=Y(Rh.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new _e({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(en.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:fe,onerror:fe,playbackRate:1,reverse:!1})}load(e){return He(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=fe){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,r){return super.start(e,n,r),this}_start(e,n,r){this._loop?n=Ri(n,this._loopStart):n=Ri(n,0);const s=this.toSeconds(n),i=r;r=Ri(r,Math.max(this._buffer.duration-s,0));let o=this.toSeconds(r);o=o/this._playbackRate,e=this.toSeconds(e);const a=new Ih({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&hn(i)?a.start(e,s):a.start(e,s,o-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(n))}restart(e,n,r){return super.restart(e,n,r),this}_restart(e,n,r){var s;(s=[...this._activeSources].pop())===null||s===void 0||s.stop(e),this._start(e,n,r)}seek(e,n){const r=this.toSeconds(n);if(this._state.getValueAtTime(r)==="started"){const s=this.toSeconds(e);this._stop(r),this._start(r,s)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&es(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&es(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),r=this._state.getNextState("stopped",n);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(s=>s.cancelStop())),this._activeSources.forEach(s=>{s.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Dn([Tr(0)],Rh.prototype,"fadeIn",void 0);Dn([Tr(0)],Rh.prototype,"fadeOut",void 0);class us extends ne{constructor(){const e=Y(us.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new ot({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(ne.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(gr(e))return e;{let r;for(r in Jl)if(Jl[r][n]===e)return r;return e}}_setCurve(e,n,r){if(gr(r)&&Reflect.has(Jl,r)){const s=Jl[r];Is(s)?e!=="_decayCurve"&&(this[e]=s[n]):this[e]=s}else if(An(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let s=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/s;s=(1-o)/a}if(s<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,s,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,s,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let l=1;l<a.length;l++)if(a[l-1]<=o&&o<=a[l]){a=this._attackCurve.slice(l),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,s,n)}if(i&&this.sustain<1){const a=n*this.sustain,l=e+s;this.log("decay",l),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+l):this._sig.exponentialApproachValueAtTime(a,l,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(ee(An(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,r=1){return n=this.toSeconds(n),this.triggerAttack(n,r),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,r=0){return vg(this,e,n,r),this}asArray(){return He(this,arguments,void 0,function*(e=1024){const n=e/this.context.sampleRate,r=new pg(1,n,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),o=i*.1,a=i+o,l=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:r}));return l._sig.toDestination(),l.triggerAttackRelease(n*(s+o)/a,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Dn([Tr(0)],us.prototype,"attack",void 0);Dn([Tr(0)],us.prototype,"decay",void 0);Dn([TE(0,1)],us.prototype,"sustain",void 0);Dn([Tr(0)],us.prototype,"release",void 0);const Jl=(()=>{let e,n;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/127*(Math.PI/2));const s=[],i=6.4;for(e=0;e<127;e++){n=e/127;const d=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;s[e]=d/10+n*.83}s[127]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/127*a)/a;const l=[];for(e=0;e<128;e++)n=e/127,l[e]=.5*(1-Math.cos(Math.PI*n));const u=[];for(e=0;e<128;e++){n=e/127;const d=Math.pow(n,3)*4+.2,p=Math.cos(d*Math.PI*2*n);u[e]=Math.abs(p*(1-n))}function c(d){const p=new Array(d.length);for(let m=0;m<d.length;m++)p[m]=1-d[m];return p}function h(d){return d.slice(0).reverse()}return{bounce:{In:c(u),Out:u},cosine:{In:r,Out:h(r)},exponential:"exponential",linear:"linear",ripple:{In:s,Out:c(s)},sine:{In:l,Out:c(l)},step:{In:o,Out:c(o)}}})();class Zi extends ne{constructor(){const e=Y(Zi.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n),this._volume=this.output=new wo({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Le(this,"volume")}static getDefaults(){return Object.assign(ne.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const r=this["_original_"+e]=this[e];this[e]=(...s)=>{const i=s[n],o=this.context.transport.schedule(a=>{s[n]=a,r.apply(this,s)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,r,s){const i=this.toSeconds(r),o=this.toSeconds(n);return this.triggerAttack(e,i,s),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class eo extends Zi{constructor(){const e=Y(eo.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Zi.getDefaults(),{detune:0,onsilence:fe,portamento:0})}triggerAttack(e,n,r=1){this.log("triggerAttack",e,n,r);const s=this.toSeconds(n);return this._triggerEnvelopeAttack(s,r),this.setNote(e,s),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const r=this.toSeconds(n),s=e instanceof un?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,i,r)}else this.frequency.setValueAtTime(s,r);return this}}Dn([Tr(0)],eo.prototype,"portamento",void 0);class Ag extends us{constructor(){super(Y(Ag.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ct({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class ja extends eo{constructor(){const e=Y(ja.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new kc(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Ag(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Le(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(eo.getDefaults(),{envelope:Object.assign(p_(us.getDefaults(),Object.keys(ne.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(p_(kc.getDefaults(),[...Object.keys(en.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),s=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+s)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Dh extends ja{constructor(){const e=Y(Dh.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Le(this,["oscillator","envelope"])}static getDefaults(){return Oi(eo.getDefaults(),ja.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const r=this.toSeconds(n),s=this.toFrequency(e instanceof un?e.toFrequency():e),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,r),this.oscillator.frequency.exponentialRampToValueAtTime(s,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Dn([TE(0)],Dh.prototype,"octaves",void 0);Dn([Tr(0)],Dh.prototype,"pitchDecay",void 0);const SE=new Set;function Ng(t){SE.add(t)}function EE(t,e){const n=`registerProcessor("${t}", ${e})`;SE.add(n)}const a4=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Ng(a4);const l4=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Ng(l4);const u4=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Ng(u4);const c4="feedback-comb-filter",h4=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;EE(c4,h4);class Ph extends Zi{constructor(){const e=Y(Ph.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const n={};Object.keys(e.urls).forEach(r=>{const s=parseInt(r,10);if(ee(Yl(r)||Us(s)&&isFinite(s),`url key is neither a note or midi pitch: ${r}`),Yl(r)){const i=new un(this.context,r).toMidi();n[i]=e.urls[r]}else Us(s)&&isFinite(s)&&(n[s]=e.urls[s])}),this._buffers=new Eg({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Zi.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:fe,onerror:fe,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,r=1){return this.log("triggerAttack",e,n,r),Array.isArray(e)||(e=[e]),e.forEach(s=>{const i=wE(new un(this.context,s).toFrequency()),o=Math.round(i),a=i-o,l=this._findClosest(o),u=o-l,c=this._buffers.get(u),h=_E(l+a),d=new Ih({url:c,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);d.start(n,0,c.duration/h,r),An(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const p=this._activeSources.get(o),m=p.indexOf(d);m!==-1&&p.splice(m,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const s=new un(this.context,r).toMidi();if(this._activeSources.has(s)&&this._activeSources.get(s).length){const i=this._activeSources.get(s);n=this.toSeconds(n),i.forEach(o=>{o.stop(n)}),this._activeSources.set(s,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,r,s=1){const i=this.toSeconds(r);return this.triggerAttack(e,i,s),An(n)?(ee(An(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const l=n[Math.min(a,n.length-1)];this.triggerRelease(o,i+this.toSeconds(l))})):this.triggerRelease(e,i+this.toSeconds(n)),this}add(e,n,r){if(ee(Yl(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Yl(e)){const s=new un(this.context,e).toMidi();this._buffers.add(s,n,r)}else this._buffers.add(e,n,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}Dn([Tr(0)],Ph.prototype,"attack",void 0);Dn([Tr(0)],Ph.prototype,"release",void 0);class xg extends ne{constructor(){const e=Y(xg.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Ne({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Le(this,"pan")}static getDefaults(){return Object.assign(ne.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const d4="bit-crusher",f4=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;EE(d4,f4);class Be extends ne{constructor(){const e=Y(Be.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Ct({context:this.context}),Be._allSolos.has(this.context)||Be._allSolos.set(this.context,new Set),Be._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(ne.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Be._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Be._soloed.has(this.context)||Be._soloed.set(this.context,new Set),Be._soloed.get(this.context).add(this)}_removeSolo(){Be._soloed.has(this.context)&&Be._soloed.get(this.context).delete(this)}_isSoloed(){return Be._soloed.has(this.context)&&Be._soloed.get(this.context).has(this)}_noSolos(){return!Be._soloed.has(this.context)||Be._soloed.has(this.context)&&Be._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Be._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Be._allSolos=new Map;Be._soloed=new Map;class Og extends ne{constructor(){const e=Y(Og.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new xg({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new wo({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Le(this,["pan","volume"])}static getDefaults(){return Object.assign(ne.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class vi extends ne{constructor(){const e=Y(vi.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new Be({solo:e.solo,context:this.context}),this._panVol=this.output=new Og({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Le(this,["pan","volume"])}static getDefaults(){return Object.assign(ne.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return vi.buses.has(e)||vi.buses.set(e,new Ct({context:this.context})),vi.buses.get(e)}send(e,n=0){const r=this._getBus(e),s=new Ct({context:this.context,units:"decibels",gain:n});return this.connect(s),s.connect(r),s}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}vi.buses=new Map;En().transport;En().destination;En().destination;En().listener;En().draw;En();const p4=({user:t})=>{const[e,n]=Xt.useState([]),[r,s]=Xt.useState(!1),i=new ja().toDestination(),o=c=>{if(i.triggerAttackRelease(c.frequency,"8n"),r){const h={note:c.name,frequency:c.frequency,time:new Date().toISOString()};n([...e,h])}},a=()=>{n([]),s(!0)},l=async()=>{if(s(!1),t){const c=rP(wP,"users",t.uid);await yP(c,{notes:e},{merge:!0}),alert("Noten gespeichert")}},u=[{name:"C4",frequency:"261.63"},{name:"D4",frequency:"293.66"},{name:"E4",frequency:"329.63"}];return Z.jsxs("div",{children:[Z.jsx("h2",{children:"Synthesizer"}),Z.jsx("div",{children:u.map(c=>Z.jsx("button",{onClick:()=>o(c),children:c.name},c.name))}),t&&Z.jsxs("div",{children:[Z.jsx("button",{onClick:a,disabled:r,children:"Aufnahme starten"}),Z.jsx("button",{onClick:l,disabled:!r,children:"Aufnahme stoppen"})]})]})},m4=()=>{const[t,e]=Xt.useState(null),[n,r]=Xt.useState(!1),s=o=>{e(o)},i=o=>{e(o),r(!1)};return Z.jsx("div",{children:t?Z.jsxs(Z.Fragment,{children:[Z.jsxs("h2",{children:["Willkommen, ",t.email]}),Z.jsx(p4,{user:t})]}):n?Z.jsx(SP,{onRegister:i}):Z.jsx(TP,{onLogin:s,onNavigateToRegister:()=>r(!0)})})};tI.render(Z.jsx(zE.StrictMode,{children:Z.jsx(m4,{})}),document.getElementById("root"));
